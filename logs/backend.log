[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------------< com.aetheris:rag-backend >----------------------
[INFO] Building Aetheris RAG Backend 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot-maven-plugin:3.5.9:run (default-cli) > test-compile @ rag-backend >>>
[INFO] 
[INFO] --- maven-resources-plugin:3.3.1:resources (default-resources) @ rag-backend ---
[INFO] Copying 2 resources from src/main/resources to target/classes
[INFO] Copying 5 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ rag-backend ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.3.1:testResources (default-testResources) @ rag-backend ---
[INFO] skip non existing resourceDirectory /Users/hubin5/app/Aetheris/backend/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.11.0:testCompile (default-testCompile) @ rag-backend ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] <<< spring-boot-maven-plugin:3.5.9:run (default-cli) < test-compile @ rag-backend <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot-maven-plugin:3.5.9:run (default-cli) @ rag-backend ---
[INFO] Attaching agents: []
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.9)

2025-12-31 15:09:37.749 [main] INFO  c.a.rag.AetherisRagApplication - Starting AetherisRagApplication using Java 21.0.8 with PID 66970 (/Users/hubin5/app/Aetheris/backend/target/classes started by hubin5 in /Users/hubin5/app/Aetheris/backend)
2025-12-31 15:09:37.750 [main] DEBUG c.a.rag.AetherisRagApplication - Running with Spring Boot v3.5.9, Spring v6.2.15
2025-12-31 15:09:37.750 [main] INFO  c.a.rag.AetherisRagApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-31 15:09:38.459 [main] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2025-12-31 15:09:38.459 [main] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.aetheris.rag'
2025-12-31 15:09:38.619 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-31 15:09:38.621 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-31 15:09:38.649 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-12-31 15:09:38.736 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/ChunkMapper.class]
2025-12-31 15:09:38.736 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/ResourceMapper.class]
2025-12-31 15:09:38.736 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/UserBehaviorMapper.class]
2025-12-31 15:09:38.736 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/UserMapper.class]
2025-12-31 15:09:38.737 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chunkMapper' and 'com.aetheris.rag.mapper.ChunkMapper' mapperInterface
2025-12-31 15:09:38.739 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'resourceMapper' and 'com.aetheris.rag.mapper.ResourceMapper' mapperInterface
2025-12-31 15:09:38.739 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userBehaviorMapper' and 'com.aetheris.rag.mapper.UserBehaviorMapper' mapperInterface
2025-12-31 15:09:38.739 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.aetheris.rag.mapper.UserMapper' mapperInterface
2025-12-31 15:09:39.348 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-31 15:09:39.361 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-31 15:09:39.362 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.50]
2025-12-31 15:09:39.407 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-31 15:09:39.408 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1620 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-12-31 15:09:39.563 [main] INFO  com.aetheris.rag.util.JwtUtil - Initialized JwtUtil with expiration: 86400 ms
2025-12-31 15:09:39.733 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-31 15:09:39.899 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@178dc733
2025-12-31 15:09:39.901 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-31 15:09:39.937 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/aetheris_rag?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true (MySQL 8.0)
2025-12-31 15:09:40.245 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 2 migrations (execution time 00:00.022s)
2025-12-31 15:09:40.259 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `aetheris_rag`: 1
2025-12-31 15:09:40.262 [main] INFO  o.f.core.internal.command.DbMigrate - Schema `aetheris_rag` is up to date. No migration necessary.
2025-12-31 15:09:40.429 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/ChunkMapper.xml]'
2025-12-31 15:09:40.440 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/ResourceMapper.xml]'
2025-12-31 15:09:40.449 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/UserBehaviorMapper.xml]'
2025-12-31 15:09:40.457 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/UserMapper.xml]'
2025-12-31 15:09:40.672 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-31 15:09:40.856 [main] INFO  c.a.r.service.impl.VectorServiceImpl - 向量索引将在 Phase 5 完整实现时创建: chunk_vector_index
2025-12-31 15:09:40.857 [main] INFO  c.aetheris.rag.config.RedissonConfig - 初始化 Redisson 客户端: localhost:6379
2025-12-31 15:09:40.935 [main] INFO  org.redisson.Version - Redisson 3.25.0
2025-12-31 15:09:41.091 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-12-31 15:09:41.095 [redisson-netty-4-8] INFO  o.r.c.pool.MasterConnectionPool - 2 connections initialized for localhost/127.0.0.1:6379
2025-12-31 15:09:41.123 [main] INFO  c.aetheris.rag.config.RedissonConfig - Redisson 客户端初始化成功
2025-12-31 15:09:41.140 [main] INFO  c.a.rag.gateway.cache.EmbeddingCache - Initialized EmbeddingCache with TTL: 30 days
2025-12-31 15:09:41.408 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 4 endpoints beneath base path '/actuator'
2025-12-31 15:09:41.437 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f0d68111-0214-42ee-bece-42858989ddca

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-12-31 15:09:41.445 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-12-31 15:09:41.682 [main] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2025-12-31 15:09:41.952 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-12-31 15:09:41.965 [main] INFO  c.a.rag.AetherisRagApplication - Started AetherisRagApplication in 4.634 seconds (process running for 4.907)
2025-12-31 15:10:04.497 [tomcat-handler-0] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-31 15:10:04.497 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-31 15:10:04.498 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-31 15:11:07.630 [tomcat-handler-3] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:11:07.631 [tomcat-handler-3] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:11:07.636 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:11:07.639 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce9893] was not registered for synchronization because synchronization is not active
2025-12-31 15:11:07.648 [tomcat-handler-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1293482353 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:11:07.649 [tomcat-handler-3] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:11:07.661 [tomcat-handler-3] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:11:07.673 [tomcat-handler-3] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:11:07.674 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce9893]
2025-12-31 15:11:07.756 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:11:07.756 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8c7142] was not registered for synchronization because synchronization is not active
2025-12-31 15:11:07.757 [tomcat-handler-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2083082893 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:11:07.757 [tomcat-handler-3] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:11:07.758 [tomcat-handler-3] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:11:07.75659(Timestamp), 5(Long)
2025-12-31 15:11:07.765 [tomcat-handler-3] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:11:07.765 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8c7142]
2025-12-31 15:11:07.766 [tomcat-handler-3] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:20:06.833 [tomcat-handler-11] DEBUG com.aetheris.rag.util.JwtUtil - Invalid JWT token: JWT expired 452832 milliseconds ago at 2025-12-31T07:12:34.000Z. Current time: 2025-12-31T07:20:06.832Z. Allowed clock skew: 0 milliseconds.
2025-12-31 15:20:32.055 [tomcat-handler-12] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:20:32.055 [tomcat-handler-12] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:20:32.055 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:20:32.055 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d63607d] was not registered for synchronization because synchronization is not active
2025-12-31 15:20:32.056 [tomcat-handler-12] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@89939158 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:20:32.056 [tomcat-handler-12] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:20:32.057 [tomcat-handler-12] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:20:32.058 [tomcat-handler-12] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:20:32.058 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d63607d]
2025-12-31 15:20:32.141 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:20:32.141 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9bbffd] was not registered for synchronization because synchronization is not active
2025-12-31 15:20:32.141 [tomcat-handler-12] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@955073243 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:20:32.141 [tomcat-handler-12] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:20:32.141 [tomcat-handler-12] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:20:32.1411(Timestamp), 5(Long)
2025-12-31 15:20:32.145 [tomcat-handler-12] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:20:32.146 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9bbffd]
2025-12-31 15:20:32.146 [tomcat-handler-12] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:20:44.070 [tomcat-handler-13] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 5
2025-12-31 15:20:44.078 [tomcat-handler-13] INFO  c.a.r.controller.ResourceController - POST /api/resources - userId=5, title=Phase 4 验收测试文档
2025-12-31 15:20:44.087 [tomcat-handler-13] INFO  c.a.r.s.impl.ResourceServiceImpl - 开始上传资源: Phase 4 验收测试文档, 文件: /Users/hubin5/app/Aetheris/uploads/test-markdown.md
2025-12-31 15:20:44.089 [tomcat-handler-13] DEBUG c.a.r.s.impl.ResourceServiceImpl - 文件内容哈希: 83269218b0eb9d9896a944b5924a46874ee3fce12de6b581b49d21a63b4318cf
2025-12-31 15:20:44.089 [tomcat-handler-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:20:44.089 [tomcat-handler-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7287e872]
2025-12-31 15:20:44.090 [tomcat-handler-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1588039151 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will be managed by Spring
2025-12-31 15:20:44.090 [tomcat-handler-13] DEBUG c.a.r.m.R.findByContentHash - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE content_hash = ?
2025-12-31 15:20:44.091 [tomcat-handler-13] DEBUG c.a.r.m.R.findByContentHash - ==> Parameters: 83269218b0eb9d9896a944b5924a46874ee3fce12de6b581b49d21a63b4318cf(String)
2025-12-31 15:20:44.093 [tomcat-handler-13] DEBUG c.a.r.m.R.findByContentHash - <==      Total: 1
2025-12-31 15:20:44.093 [tomcat-handler-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7287e872]
2025-12-31 15:20:44.093 [tomcat-handler-13] INFO  c.a.r.s.impl.ResourceServiceImpl - 资源已存在（内容哈希重复）: 1
2025-12-31 15:20:44.094 [tomcat-handler-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7287e872]
2025-12-31 15:20:44.094 [tomcat-handler-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7287e872]
2025-12-31 15:20:44.094 [tomcat-handler-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7287e872]
2025-12-31 15:27:09.461 [tomcat-handler-16] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:27:09.461 [tomcat-handler-16] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:27:09.461 [tomcat-handler-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:27:09.461 [tomcat-handler-16] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26c4b9be] was not registered for synchronization because synchronization is not active
2025-12-31 15:27:09.462 [tomcat-handler-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@671302422 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:27:09.462 [tomcat-handler-16] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:27:09.462 [tomcat-handler-16] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:27:09.464 [tomcat-handler-16] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:27:09.464 [tomcat-handler-16] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26c4b9be]
2025-12-31 15:27:09.542 [tomcat-handler-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:27:09.543 [tomcat-handler-16] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693e492d] was not registered for synchronization because synchronization is not active
2025-12-31 15:27:09.543 [tomcat-handler-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1781798141 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:27:09.543 [tomcat-handler-16] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:27:09.543 [tomcat-handler-16] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:27:09.542821(Timestamp), 5(Long)
2025-12-31 15:27:09.547 [tomcat-handler-16] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:27:09.547 [tomcat-handler-16] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693e492d]
2025-12-31 15:27:09.547 [tomcat-handler-16] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:27:47.979 [tomcat-handler-17] DEBUG com.aetheris.rag.util.JwtUtil - Invalid JWT token: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-12-31 15:28:12.463 [tomcat-handler-18] DEBUG com.aetheris.rag.util.JwtUtil - Invalid JWT token: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-12-31 15:28:32.629 [tomcat-handler-19] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:28:32.629 [tomcat-handler-19] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:28:32.629 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:28:32.629 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fff1d47] was not registered for synchronization because synchronization is not active
2025-12-31 15:28:32.630 [tomcat-handler-19] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@71535250 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:28:32.631 [tomcat-handler-19] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:28:32.631 [tomcat-handler-19] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:28:32.632 [tomcat-handler-19] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:28:32.633 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fff1d47]
2025-12-31 15:28:32.707 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:28:32.707 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78278813] was not registered for synchronization because synchronization is not active
2025-12-31 15:28:32.707 [tomcat-handler-19] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@256223093 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:28:32.708 [tomcat-handler-19] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:28:32.708 [tomcat-handler-19] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:28:32.707511(Timestamp), 5(Long)
2025-12-31 15:28:32.712 [tomcat-handler-19] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:28:32.712 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78278813]
2025-12-31 15:28:32.712 [tomcat-handler-19] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:28:44.234 [tomcat-handler-20] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 5
2025-12-31 15:28:44.236 [tomcat-handler-20] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2025-12-31 15:28:44.237 [tomcat-handler-20] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:28:44.237 [tomcat-handler-20] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6bf168] was not registered for synchronization because synchronization is not active
2025-12-31 15:28:44.238 [tomcat-handler-20] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@940985720 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:28:44.238 [tomcat-handler-20] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2025-12-31 15:28:44.240 [tomcat-handler-20] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2025-12-31 15:28:44.241 [tomcat-handler-20] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 1
2025-12-31 15:28:44.241 [tomcat-handler-20] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6bf168]
2025-12-31 15:28:44.242 [tomcat-handler-20] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:28:44.242 [tomcat-handler-20] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3b07bc] was not registered for synchronization because synchronization is not active
2025-12-31 15:28:44.242 [tomcat-handler-20] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1561609595 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:28:44.242 [tomcat-handler-20] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2025-12-31 15:28:44.242 [tomcat-handler-20] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2025-12-31 15:28:44.244 [tomcat-handler-20] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2025-12-31 15:28:44.244 [tomcat-handler-20] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3b07bc]
2025-12-31 15:30:11.002 [tomcat-handler-23] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:30:11.003 [tomcat-handler-23] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:30:11.003 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:30:11.003 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b34b5f7] was not registered for synchronization because synchronization is not active
2025-12-31 15:30:11.004 [tomcat-handler-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@368265441 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:30:11.004 [tomcat-handler-23] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:30:11.005 [tomcat-handler-23] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:30:11.006 [tomcat-handler-23] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:30:11.006 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b34b5f7]
2025-12-31 15:30:11.087 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:30:11.087 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce42da] was not registered for synchronization because synchronization is not active
2025-12-31 15:30:11.087 [tomcat-handler-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1793838777 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:30:11.087 [tomcat-handler-23] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:30:11.088 [tomcat-handler-23] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:30:11.087541(Timestamp), 5(Long)
2025-12-31 15:30:11.091 [tomcat-handler-23] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:30:11.091 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce42da]
2025-12-31 15:30:11.091 [tomcat-handler-23] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:30:18.965 [tomcat-handler-24] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 5
2025-12-31 15:30:18.966 [tomcat-handler-24] INFO  c.a.r.controller.ResourceController - GET /api/resources/1
2025-12-31 15:30:18.966 [tomcat-handler-24] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:30:18.966 [tomcat-handler-24] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a036f5] was not registered for synchronization because synchronization is not active
2025-12-31 15:30:18.967 [tomcat-handler-24] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@597174234 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:30:18.968 [tomcat-handler-24] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2025-12-31 15:30:18.968 [tomcat-handler-24] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 1(Long)
2025-12-31 15:30:18.969 [tomcat-handler-24] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2025-12-31 15:30:18.969 [tomcat-handler-24] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a036f5]
2025-12-31 15:31:51.294 [tomcat-handler-27] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:31:51.294 [tomcat-handler-27] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:31:51.295 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:31:51.295 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4215d9be] was not registered for synchronization because synchronization is not active
2025-12-31 15:31:51.296 [tomcat-handler-27] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1288847244 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:31:51.296 [tomcat-handler-27] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:31:51.296 [tomcat-handler-27] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:31:51.297 [tomcat-handler-27] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:31:51.298 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4215d9be]
2025-12-31 15:31:51.374 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:31:51.374 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@def35b7] was not registered for synchronization because synchronization is not active
2025-12-31 15:31:51.374 [tomcat-handler-27] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1633404317 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:31:51.374 [tomcat-handler-27] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:31:51.374 [tomcat-handler-27] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:31:51.374193(Timestamp), 5(Long)
2025-12-31 15:31:51.379 [tomcat-handler-27] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:31:51.379 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@def35b7]
2025-12-31 15:31:51.379 [tomcat-handler-27] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:32:02.606 [tomcat-handler-28] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 5
2025-12-31 15:32:02.607 [tomcat-handler-28] INFO  c.a.r.controller.ResourceController - GET /api/resources/1/chunks
2025-12-31 15:32:02.607 [tomcat-handler-28] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:32:02.607 [tomcat-handler-28] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f616fc] was not registered for synchronization because synchronization is not active
2025-12-31 15:32:02.608 [tomcat-handler-28] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1841351416 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:32:02.608 [tomcat-handler-28] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2025-12-31 15:32:02.608 [tomcat-handler-28] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 1(Long)
2025-12-31 15:32:02.610 [tomcat-handler-28] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 1
2025-12-31 15:32:02.610 [tomcat-handler-28] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f616fc]
2025-12-31 15:34:06.695 [tomcat-handler-31] DEBUG com.aetheris.rag.util.JwtUtil - Invalid JWT token: JWT expired 49694 milliseconds ago at 2025-12-31T07:33:17.000Z. Current time: 2025-12-31T07:34:06.694Z. Allowed clock skew: 0 milliseconds.
2025-12-31 15:34:10.905 [tomcat-handler-32] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:34:10.906 [tomcat-handler-32] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:34:10.906 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:34:10.906 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3bf1b5] was not registered for synchronization because synchronization is not active
2025-12-31 15:34:10.907 [tomcat-handler-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@50077250 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:34:10.907 [tomcat-handler-32] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:34:10.908 [tomcat-handler-32] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:34:10.909 [tomcat-handler-32] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:34:10.909 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3bf1b5]
2025-12-31 15:34:10.986 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:34:10.986 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c11479] was not registered for synchronization because synchronization is not active
2025-12-31 15:34:10.986 [tomcat-handler-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@270857197 wrapping com.mysql.cj.jdbc.ConnectionImpl@178dc733] will not be managed by Spring
2025-12-31 15:34:10.986 [tomcat-handler-32] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:34:10.986 [tomcat-handler-32] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:34:10.986072(Timestamp), 5(Long)
2025-12-31 15:34:10.991 [tomcat-handler-32] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:34:10.991 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c11479]
2025-12-31 15:34:10.991 [tomcat-handler-32] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:34:21.729 [tomcat-handler-33] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 5
2025-12-31 15:34:21.730 [tomcat-handler-33] INFO  c.a.r.controller.ResourceController - POST /api/resources - userId=5, title=Phase 4 验收测试文档
2025-12-31 15:34:21.732 [tomcat-handler-33] INFO  c.a.r.s.impl.ResourceServiceImpl - 开始上传资源: Phase 4 验收测试文档, 文件: /Users/hubin5/app/Aetheris/uploads/test-markdown.md
2025-12-31 15:34:21.733 [tomcat-handler-33] DEBUG c.a.r.s.impl.ResourceServiceImpl - 文件内容哈希: 83269218b0eb9d9896a944b5924a46874ee3fce12de6b581b49d21a63b4318cf
2025-12-31 15:34:21.733 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:34:21.733 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c7488b]
2025-12-31 15:34:21.733 [tomcat-handler-33] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@342023997 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will be managed by Spring
2025-12-31 15:34:21.733 [tomcat-handler-33] DEBUG c.a.r.m.R.findByContentHash - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE content_hash = ?
2025-12-31 15:34:21.733 [tomcat-handler-33] DEBUG c.a.r.m.R.findByContentHash - ==> Parameters: 83269218b0eb9d9896a944b5924a46874ee3fce12de6b581b49d21a63b4318cf(String)
2025-12-31 15:34:21.735 [tomcat-handler-33] DEBUG c.a.r.m.R.findByContentHash - <==      Total: 1
2025-12-31 15:34:21.735 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c7488b]
2025-12-31 15:34:21.735 [tomcat-handler-33] INFO  c.a.r.s.impl.ResourceServiceImpl - 资源已存在（内容哈希重复）: 1
2025-12-31 15:34:21.735 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c7488b]
2025-12-31 15:34:21.735 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c7488b]
2025-12-31 15:34:21.735 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c7488b]
2025-12-31 15:35:53.915 [tomcat-handler-35] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:35:53.916 [tomcat-handler-35] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:35:53.916 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:35:53.916 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9ee368] was not registered for synchronization because synchronization is not active
2025-12-31 15:35:53.917 [tomcat-handler-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1522807401 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:35:53.917 [tomcat-handler-35] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:35:53.917 [tomcat-handler-35] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:35:53.919 [tomcat-handler-35] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:35:53.919 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9ee368]
2025-12-31 15:35:54.006 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:35:54.006 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113c6d27] was not registered for synchronization because synchronization is not active
2025-12-31 15:35:54.007 [tomcat-handler-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@721635787 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:35:54.007 [tomcat-handler-35] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:35:54.007 [tomcat-handler-35] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:35:54.006635(Timestamp), 5(Long)
2025-12-31 15:35:54.011 [tomcat-handler-35] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:35:54.011 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113c6d27]
2025-12-31 15:35:54.011 [tomcat-handler-35] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:36:01.341 [tomcat-handler-36] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:36:01.342 [tomcat-handler-36] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:36:01.342 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:36:01.342 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3068bbb0] was not registered for synchronization because synchronization is not active
2025-12-31 15:36:01.343 [tomcat-handler-36] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1120906703 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:36:01.343 [tomcat-handler-36] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:36:01.344 [tomcat-handler-36] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:36:01.345 [tomcat-handler-36] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:36:01.345 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3068bbb0]
2025-12-31 15:36:01.432 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:36:01.433 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583af423] was not registered for synchronization because synchronization is not active
2025-12-31 15:36:01.433 [tomcat-handler-36] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@762999215 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:36:01.433 [tomcat-handler-36] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:36:01.433 [tomcat-handler-36] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:36:01.432787(Timestamp), 5(Long)
2025-12-31 15:36:01.437 [tomcat-handler-36] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:36:01.438 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583af423]
2025-12-31 15:36:01.438 [tomcat-handler-36] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:36:19.026 [tomcat-handler-37] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:36:19.026 [tomcat-handler-37] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:36:19.027 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:36:19.027 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e716293] was not registered for synchronization because synchronization is not active
2025-12-31 15:36:19.028 [tomcat-handler-37] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1902447250 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:36:19.028 [tomcat-handler-37] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:36:19.028 [tomcat-handler-37] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:36:19.029 [tomcat-handler-37] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:36:19.030 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e716293]
2025-12-31 15:36:19.112 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:36:19.112 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3a5f3f] was not registered for synchronization because synchronization is not active
2025-12-31 15:36:19.112 [tomcat-handler-37] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1210767345 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:36:19.112 [tomcat-handler-37] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:36:19.113 [tomcat-handler-37] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:36:19.112468(Timestamp), 5(Long)
2025-12-31 15:36:19.116 [tomcat-handler-37] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:36:19.116 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3a5f3f]
2025-12-31 15:36:19.116 [tomcat-handler-37] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:37:27.209 [tomcat-handler-38] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:37:27.209 [tomcat-handler-38] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:37:27.209 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:37:27.209 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@775d316c] was not registered for synchronization because synchronization is not active
2025-12-31 15:37:27.216 [tomcat-handler-38] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2040185335 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:37:27.216 [tomcat-handler-38] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:37:27.216 [tomcat-handler-38] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:37:27.218 [tomcat-handler-38] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:37:27.218 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@775d316c]
2025-12-31 15:37:27.299 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:37:27.299 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a7cbcc] was not registered for synchronization because synchronization is not active
2025-12-31 15:37:27.299 [tomcat-handler-38] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@653220837 wrapping com.mysql.cj.jdbc.ConnectionImpl@219251cd] will not be managed by Spring
2025-12-31 15:37:27.299 [tomcat-handler-38] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:37:27.300 [tomcat-handler-38] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:37:27.298953(Timestamp), 5(Long)
2025-12-31 15:37:27.303 [tomcat-handler-38] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:37:27.303 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a7cbcc]
2025-12-31 15:37:27.303 [tomcat-handler-38] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:38:58.589 [tomcat-handler-39] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: test222@example.com
2025-12-31 15:38:58.590 [tomcat-handler-39] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: test222@example.com
2025-12-31 15:38:58.590 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:38:58.590 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a2497d3] was not registered for synchronization because synchronization is not active
2025-12-31 15:38:58.592 [tomcat-handler-39] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@82016487 wrapping com.mysql.cj.jdbc.ConnectionImpl@dcfca3] will not be managed by Spring
2025-12-31 15:38:58.592 [tomcat-handler-39] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:38:58.592 [tomcat-handler-39] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: test222@example.com(String)
2025-12-31 15:38:58.593 [tomcat-handler-39] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:38:58.594 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a2497d3]
2025-12-31 15:38:58.674 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:38:58.674 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6beaefbb] was not registered for synchronization because synchronization is not active
2025-12-31 15:38:58.675 [tomcat-handler-39] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1959892577 wrapping com.mysql.cj.jdbc.ConnectionImpl@dcfca3] will not be managed by Spring
2025-12-31 15:38:58.675 [tomcat-handler-39] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:38:58.675 [tomcat-handler-39] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:38:58.67481(Timestamp), 5(Long)
2025-12-31 15:38:58.678 [tomcat-handler-39] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:38:58.678 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6beaefbb]
2025-12-31 15:38:58.678 [tomcat-handler-39] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 5
2025-12-31 15:40:37.542 [tomcat-handler-40] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2025-12-31 15:40:37.543 [tomcat-handler-40] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2025-12-31 15:40:37.543 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:40:37.544 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608a2ec7] was not registered for synchronization because synchronization is not active
2025-12-31 15:40:37.545 [tomcat-handler-40] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1850592422 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:40:37.545 [tomcat-handler-40] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:40:37.545 [tomcat-handler-40] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2025-12-31 15:40:37.546 [tomcat-handler-40] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:40:37.546 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608a2ec7]
2025-12-31 15:40:37.629 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:40:37.629 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3d29a2] was not registered for synchronization because synchronization is not active
2025-12-31 15:40:37.629 [tomcat-handler-40] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@504753727 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:40:37.629 [tomcat-handler-40] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:40:37.630 [tomcat-handler-40] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:40:37.629501(Timestamp), 7(Long)
2025-12-31 15:40:37.635 [tomcat-handler-40] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:40:37.635 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3d29a2]
2025-12-31 15:40:37.635 [tomcat-handler-40] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2025-12-31 15:41:26.690 [tomcat-handler-41] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2025-12-31 15:41:26.690 [tomcat-handler-41] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2025-12-31 15:41:26.691 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:41:26.691 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3318cba7] was not registered for synchronization because synchronization is not active
2025-12-31 15:41:26.692 [tomcat-handler-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1038033844 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:41:26.692 [tomcat-handler-41] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:41:26.692 [tomcat-handler-41] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2025-12-31 15:41:26.693 [tomcat-handler-41] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:41:26.693 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3318cba7]
2025-12-31 15:41:26.778 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:41:26.778 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2298f] was not registered for synchronization because synchronization is not active
2025-12-31 15:41:26.778 [tomcat-handler-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@164794439 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:41:26.778 [tomcat-handler-41] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:41:26.779 [tomcat-handler-41] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:41:26.778564(Timestamp), 7(Long)
2025-12-31 15:41:26.783 [tomcat-handler-41] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:41:26.783 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2298f]
2025-12-31 15:41:26.783 [tomcat-handler-41] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2025-12-31 15:44:54.757 [tomcat-handler-42] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2025-12-31 15:44:54.758 [tomcat-handler-42] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2025-12-31 15:44:54.758 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:44:54.758 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adb61bf] was not registered for synchronization because synchronization is not active
2025-12-31 15:44:54.759 [tomcat-handler-42] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1142724244 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:44:54.759 [tomcat-handler-42] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:44:54.759 [tomcat-handler-42] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2025-12-31 15:44:54.760 [tomcat-handler-42] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:44:54.761 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adb61bf]
2025-12-31 15:44:54.841 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:44:54.841 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5219caf] was not registered for synchronization because synchronization is not active
2025-12-31 15:44:54.841 [tomcat-handler-42] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@342278957 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:44:54.841 [tomcat-handler-42] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:44:54.841 [tomcat-handler-42] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:44:54.841284(Timestamp), 7(Long)
2025-12-31 15:44:54.845 [tomcat-handler-42] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:44:54.846 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5219caf]
2025-12-31 15:44:54.846 [tomcat-handler-42] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2025-12-31 15:44:55.802 [tomcat-handler-43] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:44:55.803 [tomcat-handler-43] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:44:55.806 [tomcat-handler-43] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:44:55.806 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:44:55.807 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7747162c]
2025-12-31 15:44:55.807 [tomcat-handler-43] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@991389739 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:44:55.807 [tomcat-handler-43] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:44:55.807 [tomcat-handler-43] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:44:55.808 [tomcat-handler-43] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:44:55.808 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7747162c]
2025-12-31 15:44:55.808 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7747162c]
2025-12-31 15:44:55.808 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7747162c]
2025-12-31 15:44:55.808 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7747162c]
2025-12-31 15:44:55.983 [tomcat-handler-44] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:44:55.984 [tomcat-handler-44] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:44:55.986 [tomcat-handler-44] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:44:55.986 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:44:55.986 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376be6b3]
2025-12-31 15:44:55.986 [tomcat-handler-44] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1781710212 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:44:55.986 [tomcat-handler-44] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:44:55.987 [tomcat-handler-44] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:44:55.988 [tomcat-handler-44] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:44:55.988 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376be6b3]
2025-12-31 15:44:55.988 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376be6b3]
2025-12-31 15:44:55.989 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376be6b3]
2025-12-31 15:44:55.989 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376be6b3]
2025-12-31 15:45:40.356 [tomcat-handler-45] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:45:40.357 [tomcat-handler-45] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2025-12-31 15:45:40.358 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:45:40.358 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106004cf] was not registered for synchronization because synchronization is not active
2025-12-31 15:45:40.359 [tomcat-handler-45] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1586885773 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:45:40.359 [tomcat-handler-45] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2025-12-31 15:45:40.360 [tomcat-handler-45] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2025-12-31 15:45:40.361 [tomcat-handler-45] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 1
2025-12-31 15:45:40.361 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106004cf]
2025-12-31 15:45:40.362 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:45:40.362 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372b18e2] was not registered for synchronization because synchronization is not active
2025-12-31 15:45:40.362 [tomcat-handler-45] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@670905524 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:45:40.362 [tomcat-handler-45] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2025-12-31 15:45:40.362 [tomcat-handler-45] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2025-12-31 15:45:40.363 [tomcat-handler-45] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2025-12-31 15:45:40.363 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372b18e2]
2025-12-31 15:46:14.021 [tomcat-handler-46] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:46:14.022 [tomcat-handler-46] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:46:14.025 [tomcat-handler-46] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:46:14.025 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:46:14.025 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52100ecc]
2025-12-31 15:46:14.025 [tomcat-handler-46] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1491625404 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:46:14.025 [tomcat-handler-46] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:46:14.026 [tomcat-handler-46] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:46:14.028 [tomcat-handler-46] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:46:14.028 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52100ecc]
2025-12-31 15:46:14.028 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52100ecc]
2025-12-31 15:46:14.028 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52100ecc]
2025-12-31 15:46:14.028 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52100ecc]
2025-12-31 15:46:14.125 [tomcat-handler-47] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:46:14.125 [tomcat-handler-48] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:46:14.126 [tomcat-handler-47] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2025-12-31 15:46:14.126 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:46:14.126 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdeebda] was not registered for synchronization because synchronization is not active
2025-12-31 15:46:14.127 [tomcat-handler-48] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:46:14.127 [tomcat-handler-47] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@750614725 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:46:14.127 [tomcat-handler-47] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2025-12-31 15:46:14.127 [tomcat-handler-47] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2025-12-31 15:46:14.129 [tomcat-handler-47] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 1
2025-12-31 15:46:14.129 [tomcat-handler-48] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:46:14.129 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:46:14.129 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37632d6b]
2025-12-31 15:46:14.129 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdeebda]
2025-12-31 15:46:14.129 [tomcat-handler-48] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1174256595 wrapping com.mysql.cj.jdbc.ConnectionImpl@2c198f9] will be managed by Spring
2025-12-31 15:46:14.129 [tomcat-handler-48] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:46:14.129 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:46:14.130 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167c9655] was not registered for synchronization because synchronization is not active
2025-12-31 15:46:14.130 [tomcat-handler-48] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:46:14.130 [tomcat-handler-47] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1400769278 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:46:14.130 [tomcat-handler-47] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2025-12-31 15:46:14.130 [tomcat-handler-47] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2025-12-31 15:46:14.131 [tomcat-handler-47] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2025-12-31 15:46:14.131 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167c9655]
2025-12-31 15:46:14.131 [tomcat-handler-48] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:46:14.131 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37632d6b]
2025-12-31 15:46:14.131 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37632d6b]
2025-12-31 15:46:14.131 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37632d6b]
2025-12-31 15:46:14.131 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37632d6b]
2025-12-31 15:46:54.307 [tomcat-handler-49] DEBUG com.aetheris.rag.util.JwtUtil - Invalid JWT token: JWT expired 33307 milliseconds ago at 2025-12-31T07:46:21.000Z. Current time: 2025-12-31T07:46:54.307Z. Allowed clock skew: 0 milliseconds.
2025-12-31 15:47:03.014 [tomcat-handler-50] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2025-12-31 15:47:03.015 [tomcat-handler-50] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2025-12-31 15:47:03.015 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:47:03.015 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12502b54] was not registered for synchronization because synchronization is not active
2025-12-31 15:47:03.016 [tomcat-handler-50] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1284956510 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:47:03.016 [tomcat-handler-50] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:47:03.016 [tomcat-handler-50] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2025-12-31 15:47:03.018 [tomcat-handler-50] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:47:03.018 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12502b54]
2025-12-31 15:47:03.096 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:47:03.096 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d8ea5e4] was not registered for synchronization because synchronization is not active
2025-12-31 15:47:03.096 [tomcat-handler-50] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@236402570 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:47:03.096 [tomcat-handler-50] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:47:03.097 [tomcat-handler-50] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:47:03.096578(Timestamp), 7(Long)
2025-12-31 15:47:03.100 [tomcat-handler-50] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:47:03.101 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d8ea5e4]
2025-12-31 15:47:03.101 [tomcat-handler-50] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2025-12-31 15:47:03.301 [tomcat-handler-51] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:47:03.302 [tomcat-handler-51] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:47:03.304 [tomcat-handler-51] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:47:03.304 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:47:03.304 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7189668b]
2025-12-31 15:47:03.305 [tomcat-handler-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@786207502 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:47:03.305 [tomcat-handler-51] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:47:03.305 [tomcat-handler-51] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:47:03.307 [tomcat-handler-51] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:47:03.307 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7189668b]
2025-12-31 15:47:03.307 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7189668b]
2025-12-31 15:47:03.307 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7189668b]
2025-12-31 15:47:03.307 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7189668b]
2025-12-31 15:47:03.449 [tomcat-handler-52] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:47:03.450 [tomcat-handler-52] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:47:03.451 [tomcat-handler-52] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:47:03.452 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:47:03.452 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6403a524]
2025-12-31 15:47:03.452 [tomcat-handler-52] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@892380145 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:47:03.452 [tomcat-handler-52] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:47:03.452 [tomcat-handler-52] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:47:03.453 [tomcat-handler-52] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:47:03.454 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6403a524]
2025-12-31 15:47:03.454 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6403a524]
2025-12-31 15:47:03.454 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6403a524]
2025-12-31 15:47:03.454 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6403a524]
2025-12-31 15:49:10.413 [tomcat-handler-53] DEBUG com.aetheris.rag.util.JwtUtil - Invalid JWT token: JWT expired 41413 milliseconds ago at 2025-12-31T07:48:29.000Z. Current time: 2025-12-31T07:49:10.413Z. Allowed clock skew: 0 milliseconds.
2025-12-31 15:49:18.446 [tomcat-handler-54] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2025-12-31 15:49:18.446 [tomcat-handler-54] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2025-12-31 15:49:18.446 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:49:18.446 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a53e37] was not registered for synchronization because synchronization is not active
2025-12-31 15:49:18.447 [tomcat-handler-54] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1231214771 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:49:18.447 [tomcat-handler-54] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2025-12-31 15:49:18.447 [tomcat-handler-54] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2025-12-31 15:49:18.449 [tomcat-handler-54] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2025-12-31 15:49:18.449 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a53e37]
2025-12-31 15:49:18.530 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:49:18.530 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85fd288] was not registered for synchronization because synchronization is not active
2025-12-31 15:49:18.530 [tomcat-handler-54] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1726284082 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will not be managed by Spring
2025-12-31 15:49:18.530 [tomcat-handler-54] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2025-12-31 15:49:18.531 [tomcat-handler-54] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2025-12-31 15:49:18.530648(Timestamp), 7(Long)
2025-12-31 15:49:18.535 [tomcat-handler-54] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2025-12-31 15:49:18.535 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85fd288]
2025-12-31 15:49:18.535 [tomcat-handler-54] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2025-12-31 15:49:18.743 [tomcat-handler-55] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:49:18.744 [tomcat-handler-55] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:49:18.746 [tomcat-handler-55] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:49:18.746 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:49:18.746 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4d7714]
2025-12-31 15:49:18.747 [tomcat-handler-55] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@642927978 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:49:18.747 [tomcat-handler-55] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:49:18.747 [tomcat-handler-55] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:49:18.748 [tomcat-handler-55] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:49:18.749 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4d7714]
2025-12-31 15:49:18.749 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4d7714]
2025-12-31 15:49:18.749 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4d7714]
2025-12-31 15:49:18.749 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4d7714]
2025-12-31 15:49:18.815 [tomcat-handler-57] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:49:18.816 [tomcat-handler-56] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2025-12-31 15:49:18.816 [tomcat-handler-57] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2025-12-31 15:49:18.817 [tomcat-handler-56] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2025-12-31 15:49:18.817 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:49:18.817 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@549ba75] was not registered for synchronization because synchronization is not active
2025-12-31 15:49:18.818 [tomcat-handler-56] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@225509073 wrapping com.mysql.cj.jdbc.ConnectionImpl@2c198f9] will not be managed by Spring
2025-12-31 15:49:18.818 [tomcat-handler-56] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2025-12-31 15:49:18.818 [tomcat-handler-56] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2025-12-31 15:49:18.818 [tomcat-handler-57] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2025-12-31 15:49:18.818 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:49:18.818 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3eb10e]
2025-12-31 15:49:18.818 [tomcat-handler-57] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1693651369 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a7245b7] will be managed by Spring
2025-12-31 15:49:18.818 [tomcat-handler-57] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2025-12-31 15:49:18.819 [tomcat-handler-57] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2025-12-31 15:49:18.820 [tomcat-handler-56] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 1
2025-12-31 15:49:18.820 [tomcat-handler-57] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2025-12-31 15:49:18.820 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@549ba75]
2025-12-31 15:49:18.820 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3eb10e]
2025-12-31 15:49:18.820 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2025-12-31 15:49:18.820 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3eb10e]
2025-12-31 15:49:18.820 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679f74f9] was not registered for synchronization because synchronization is not active
2025-12-31 15:49:18.820 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3eb10e]
2025-12-31 15:49:18.820 [tomcat-handler-56] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1767409274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2c198f9] will not be managed by Spring
2025-12-31 15:49:18.820 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3eb10e]
2025-12-31 15:49:18.821 [tomcat-handler-56] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2025-12-31 15:49:18.821 [tomcat-handler-56] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2025-12-31 15:49:18.822 [tomcat-handler-56] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2025-12-31 15:49:18.822 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679f74f9]
