[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------------< com.aetheris:rag-backend >----------------------
[INFO] Building Aetheris RAG Backend 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot-maven-plugin:3.5.9:run (default-cli) > test-compile @ rag-backend >>>
[INFO] 
[INFO] --- maven-resources-plugin:3.3.1:resources (default-resources) @ rag-backend ---
[INFO] Copying 2 resources from src/main/resources to target/classes
[INFO] Copying 5 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ rag-backend ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.3.1:testResources (default-testResources) @ rag-backend ---
[INFO] skip non existing resourceDirectory /Users/hubin5/app/Aetheris/backend/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.11.0:testCompile (default-testCompile) @ rag-backend ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] <<< spring-boot-maven-plugin:3.5.9:run (default-cli) < test-compile @ rag-backend <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot-maven-plugin:3.5.9:run (default-cli) @ rag-backend ---
[INFO] Attaching agents: []
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.9)

2026-01-06 13:16:00.732 [main] INFO  c.a.rag.AetherisRagApplication - Starting AetherisRagApplication using Java 21.0.8 with PID 6686 (/Users/hubin5/app/Aetheris/backend/target/classes started by hubin5 in /Users/hubin5/app/Aetheris/backend)
2026-01-06 13:16:00.736 [main] DEBUG c.a.rag.AetherisRagApplication - Running with Spring Boot v3.5.9, Spring v6.2.15
2026-01-06 13:16:00.736 [main] INFO  c.a.rag.AetherisRagApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-06 13:16:01.455 [main] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Searching for mappers annotated with @Mapper
2026-01-06 13:16:01.456 [main] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Using auto-configuration base package 'com.aetheris.rag'
2026-01-06 13:16:01.625 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-06 13:16:01.628 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-06 13:16:01.664 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2026-01-06 13:16:01.748 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/ChunkMapper.class]
2026-01-06 13:16:01.749 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/ResourceMapper.class]
2026-01-06 13:16:01.749 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/UserBehaviorMapper.class]
2026-01-06 13:16:01.749 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [/Users/hubin5/app/Aetheris/backend/target/classes/com/aetheris/rag/mapper/UserMapper.class]
2026-01-06 13:16:01.750 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chunkMapper' and 'com.aetheris.rag.mapper.ChunkMapper' mapperInterface
2026-01-06 13:16:01.751 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'resourceMapper' and 'com.aetheris.rag.mapper.ResourceMapper' mapperInterface
2026-01-06 13:16:01.751 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userBehaviorMapper' and 'com.aetheris.rag.mapper.UserBehaviorMapper' mapperInterface
2026-01-06 13:16:01.751 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userMapper' and 'com.aetheris.rag.mapper.UserMapper' mapperInterface
2026-01-06 13:16:02.336 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-06 13:16:02.348 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-06 13:16:02.348 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.50]
2026-01-06 13:16:02.408 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-06 13:16:02.409 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1639 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2026-01-06 13:16:02.563 [main] INFO  c.aetheris.rag.config.DotenvConfig - ✅ .env 文件已加载: /Users/hubin5/app/Aetheris/.env
2026-01-06 13:16:02.573 [main] INFO  com.aetheris.rag.util.JwtUtil - Initialized JwtUtil with expiration: 604800000 ms
2026-01-06 13:16:02.729 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 13:16:02.882 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5615f82d
2026-01-06 13:16:02.883 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 13:16:02.921 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/aetheris_rag?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true (MySQL 8.0)
2026-01-06 13:16:03.245 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 2 migrations (execution time 00:00.025s)
2026-01-06 13:16:03.259 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `aetheris_rag`: 1
2026-01-06 13:16:03.262 [main] INFO  o.f.core.internal.command.DbMigrate - Schema `aetheris_rag` is up to date. No migration necessary.
2026-01-06 13:16:03.428 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/ChunkMapper.xml]'
2026-01-06 13:16:03.436 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/ResourceMapper.xml]'
2026-01-06 13:16:03.441 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/UserBehaviorMapper.xml]'
2026-01-06 13:16:03.449 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [/Users/hubin5/app/Aetheris/backend/target/classes/mapper/UserMapper.xml]'
2026-01-06 13:16:03.636 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2026-01-06 13:16:03.783 [main] INFO  c.a.r.service.impl.VectorServiceImpl - 向量索引将在 Phase 5 完整实现时创建: chunk_vector_index
2026-01-06 13:16:03.784 [main] INFO  c.aetheris.rag.config.RedissonConfig - 初始化 Redisson 客户端: localhost:6379
2026-01-06 13:16:03.849 [main] INFO  org.redisson.Version - Redisson 3.25.0
2026-01-06 13:16:03.996 [redisson-netty-4-5] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2026-01-06 13:16:04.002 [redisson-netty-4-8] INFO  o.r.c.pool.MasterConnectionPool - 2 connections initialized for localhost/127.0.0.1:6379
2026-01-06 13:16:04.048 [main] INFO  c.aetheris.rag.config.RedissonConfig - Redisson 客户端初始化成功
2026-01-06 13:16:04.069 [main] INFO  c.a.rag.gateway.cache.EmbeddingCache - Initialized EmbeddingCache with TTL: 30 days
2026-01-06 13:16:04.319 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 4 endpoints beneath base path '/actuator'
2026-01-06 13:16:04.345 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 6698833b-b645-43a1-a76c-496bd581ff7d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-06 13:16:04.351 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-06 13:16:04.548 [main] DEBUG o.m.s.b.a.MybatisAutoConfiguration - Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-06 13:16:04.754 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-01-06 13:16:04.768 [main] INFO  c.a.rag.AetherisRagApplication - Started AetherisRagApplication in 4.472 seconds (process running for 4.748)
2026-01-06 13:16:27.533 [tomcat-handler-0] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-06 13:16:27.533 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-06 13:16:27.535 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-06 13:18:22.657 [tomcat-handler-1] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:18:22.657 [tomcat-handler-1] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:18:22.663 [tomcat-handler-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:18:22.668 [tomcat-handler-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed4e3c0] was not registered for synchronization because synchronization is not active
2026-01-06 13:18:22.676 [tomcat-handler-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@475487016 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:18:22.677 [tomcat-handler-1] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:18:22.690 [tomcat-handler-1] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:18:22.710 [tomcat-handler-1] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:18:22.711 [tomcat-handler-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed4e3c0]
2026-01-06 13:18:22.795 [tomcat-handler-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:18:22.795 [tomcat-handler-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18bafc3b] was not registered for synchronization because synchronization is not active
2026-01-06 13:18:22.795 [tomcat-handler-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1093479869 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:18:22.795 [tomcat-handler-1] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:18:22.797 [tomcat-handler-1] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:18:22.795062(Timestamp), 7(Long)
2026-01-06 13:18:22.804 [tomcat-handler-1] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:18:22.805 [tomcat-handler-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18bafc3b]
2026-01-06 13:18:22.805 [tomcat-handler-1] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:18:23.209 [tomcat-handler-2] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:18:23.212 [tomcat-handler-2] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:18:23.223 [tomcat-handler-2] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:18:23.223 [tomcat-handler-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:18:23.224 [tomcat-handler-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5691e43f]
2026-01-06 13:18:23.224 [tomcat-handler-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1766922030 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will be managed by Spring
2026-01-06 13:18:23.224 [tomcat-handler-2] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:18:23.225 [tomcat-handler-2] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:18:23.226 [tomcat-handler-2] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:18:23.227 [tomcat-handler-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5691e43f]
2026-01-06 13:18:23.228 [tomcat-handler-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5691e43f]
2026-01-06 13:18:23.228 [tomcat-handler-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5691e43f]
2026-01-06 13:18:23.228 [tomcat-handler-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5691e43f]
2026-01-06 13:18:41.936 [tomcat-handler-3] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:18:41.937 [tomcat-handler-3] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:18:41.937 [tomcat-handler-3] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:18:41.938 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:18:41.938 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2690c2c2] was not registered for synchronization because synchronization is not active
2026-01-06 13:18:41.939 [tomcat-handler-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1541399086 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:18:41.939 [tomcat-handler-3] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:18:41.939 [tomcat-handler-3] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:18:41.941 [tomcat-handler-3] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:18:41.941 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2690c2c2]
2026-01-06 13:18:42.023 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:18:42.024 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@494ebf00] was not registered for synchronization because synchronization is not active
2026-01-06 13:18:42.024 [tomcat-handler-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1768485433 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:18:42.024 [tomcat-handler-3] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:18:42.024 [tomcat-handler-3] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:18:42.023783(Timestamp), 7(Long)
2026-01-06 13:18:42.028 [tomcat-handler-3] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:18:42.028 [tomcat-handler-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@494ebf00]
2026-01-06 13:18:42.028 [tomcat-handler-3] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:18:42.305 [tomcat-handler-4] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:18:42.306 [tomcat-handler-4] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:18:42.308 [tomcat-handler-4] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:18:42.308 [tomcat-handler-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:18:42.308 [tomcat-handler-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c683c89]
2026-01-06 13:18:42.309 [tomcat-handler-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1588978100 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will be managed by Spring
2026-01-06 13:18:42.309 [tomcat-handler-4] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:18:42.309 [tomcat-handler-4] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:18:42.313 [tomcat-handler-4] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:18:42.313 [tomcat-handler-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c683c89]
2026-01-06 13:18:42.314 [tomcat-handler-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c683c89]
2026-01-06 13:18:42.314 [tomcat-handler-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c683c89]
2026-01-06 13:18:42.314 [tomcat-handler-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c683c89]
2026-01-06 13:19:21.614 [tomcat-handler-5] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:19:21.616 [tomcat-handler-5] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:19:21.619 [tomcat-handler-5] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:19:21.619 [tomcat-handler-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:19:21.619 [tomcat-handler-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c5530]
2026-01-06 13:19:21.619 [tomcat-handler-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1977892416 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will be managed by Spring
2026-01-06 13:19:21.619 [tomcat-handler-5] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:19:21.620 [tomcat-handler-5] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:19:21.621 [tomcat-handler-5] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:19:21.621 [tomcat-handler-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c5530]
2026-01-06 13:19:21.621 [tomcat-handler-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c5530]
2026-01-06 13:19:21.621 [tomcat-handler-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c5530]
2026-01-06 13:19:21.621 [tomcat-handler-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c5530]
2026-01-06 13:19:32.155 [tomcat-handler-6] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:19:32.157 [tomcat-handler-6] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:19:32.157 [tomcat-handler-6] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:19:32.157 [tomcat-handler-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:19:32.158 [tomcat-handler-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dced861] was not registered for synchronization because synchronization is not active
2026-01-06 13:19:32.159 [tomcat-handler-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@18653127 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:19:32.159 [tomcat-handler-6] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:19:32.159 [tomcat-handler-6] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:19:32.160 [tomcat-handler-6] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:19:32.161 [tomcat-handler-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dced861]
2026-01-06 13:19:32.244 [tomcat-handler-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:19:32.244 [tomcat-handler-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c951d7] was not registered for synchronization because synchronization is not active
2026-01-06 13:19:32.244 [tomcat-handler-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@195004031 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:19:32.244 [tomcat-handler-6] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:19:32.245 [tomcat-handler-6] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:19:32.24447(Timestamp), 7(Long)
2026-01-06 13:19:32.249 [tomcat-handler-6] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:19:32.249 [tomcat-handler-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c951d7]
2026-01-06 13:19:32.249 [tomcat-handler-6] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:19:33.046 [tomcat-handler-7] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:19:33.048 [tomcat-handler-7] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:19:33.051 [tomcat-handler-7] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:19:33.051 [tomcat-handler-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:19:33.051 [tomcat-handler-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edada42]
2026-01-06 13:19:33.051 [tomcat-handler-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@601662774 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will be managed by Spring
2026-01-06 13:19:33.051 [tomcat-handler-7] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:19:33.051 [tomcat-handler-7] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:19:33.053 [tomcat-handler-7] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:19:33.053 [tomcat-handler-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edada42]
2026-01-06 13:19:33.053 [tomcat-handler-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edada42]
2026-01-06 13:19:33.053 [tomcat-handler-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edada42]
2026-01-06 13:19:33.054 [tomcat-handler-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edada42]
2026-01-06 13:22:26.963 [tomcat-handler-8] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:22:26.965 [tomcat-handler-8] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:22:26.965 [tomcat-handler-8] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:22:26.965 [tomcat-handler-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:22:26.965 [tomcat-handler-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5d2465] was not registered for synchronization because synchronization is not active
2026-01-06 13:22:26.966 [tomcat-handler-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1083884510 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:22:26.967 [tomcat-handler-8] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:22:26.967 [tomcat-handler-8] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:22:26.968 [tomcat-handler-8] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:22:26.969 [tomcat-handler-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5d2465]
2026-01-06 13:22:27.056 [tomcat-handler-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:22:27.056 [tomcat-handler-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7c9e5] was not registered for synchronization because synchronization is not active
2026-01-06 13:22:27.056 [tomcat-handler-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@654228408 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:22:27.057 [tomcat-handler-8] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:22:27.057 [tomcat-handler-8] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:22:27.056371(Timestamp), 7(Long)
2026-01-06 13:22:27.064 [tomcat-handler-8] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:22:27.065 [tomcat-handler-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7c9e5]
2026-01-06 13:22:27.065 [tomcat-handler-8] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:22:30.262 [tomcat-handler-9] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:22:30.266 [tomcat-handler-9] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:22:30.267 [tomcat-handler-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:22:30.267 [tomcat-handler-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d70ec31] was not registered for synchronization because synchronization is not active
2026-01-06 13:22:30.268 [tomcat-handler-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1507777225 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:22:30.268 [tomcat-handler-9] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:22:30.271 [tomcat-handler-9] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:22:30.277 [tomcat-handler-9] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:22:30.277 [tomcat-handler-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d70ec31]
2026-01-06 13:22:30.278 [tomcat-handler-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:22:30.278 [tomcat-handler-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d72824] was not registered for synchronization because synchronization is not active
2026-01-06 13:22:30.278 [tomcat-handler-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1775967276 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:22:30.278 [tomcat-handler-9] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:22:30.278 [tomcat-handler-9] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:22:30.281 [tomcat-handler-9] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:22:30.281 [tomcat-handler-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d72824]
2026-01-06 13:23:05.653 [tomcat-handler-10] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:23:05.655 [tomcat-handler-10] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:23:05.655 [tomcat-handler-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:23:05.655 [tomcat-handler-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef602c5] was not registered for synchronization because synchronization is not active
2026-01-06 13:23:05.664 [tomcat-handler-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@3272043 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:23:05.664 [tomcat-handler-10] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:23:05.665 [tomcat-handler-10] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:23:05.669 [tomcat-handler-10] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:23:05.669 [tomcat-handler-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef602c5]
2026-01-06 13:23:05.669 [tomcat-handler-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:23:05.669 [tomcat-handler-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410ce750] was not registered for synchronization because synchronization is not active
2026-01-06 13:23:05.669 [tomcat-handler-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2144478622 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:23:05.669 [tomcat-handler-10] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:23:05.670 [tomcat-handler-10] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:23:05.671 [tomcat-handler-10] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:23:05.671 [tomcat-handler-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410ce750]
2026-01-06 13:24:16.345 [tomcat-handler-11] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:24:16.346 [tomcat-handler-11] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:24:16.349 [tomcat-handler-11] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:24:16.349 [tomcat-handler-11] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:24:16.349 [tomcat-handler-11] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774810d2]
2026-01-06 13:24:16.349 [tomcat-handler-11] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1096456608 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will be managed by Spring
2026-01-06 13:24:16.349 [tomcat-handler-11] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:24:16.349 [tomcat-handler-11] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:24:16.351 [tomcat-handler-11] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:24:16.351 [tomcat-handler-11] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774810d2]
2026-01-06 13:24:16.351 [tomcat-handler-11] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774810d2]
2026-01-06 13:24:16.351 [tomcat-handler-11] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774810d2]
2026-01-06 13:24:16.351 [tomcat-handler-11] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774810d2]
2026-01-06 13:24:24.416 [tomcat-handler-12] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:24:24.418 [tomcat-handler-12] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:24:24.418 [tomcat-handler-12] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:24:24.418 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:24:24.418 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c0f84c] was not registered for synchronization because synchronization is not active
2026-01-06 13:24:24.419 [tomcat-handler-12] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1997413003 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:24:24.419 [tomcat-handler-12] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:24:24.419 [tomcat-handler-12] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:24:24.420 [tomcat-handler-12] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:24:24.421 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c0f84c]
2026-01-06 13:24:24.502 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:24:24.502 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4fc2ad] was not registered for synchronization because synchronization is not active
2026-01-06 13:24:24.502 [tomcat-handler-12] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1223640368 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:24:24.502 [tomcat-handler-12] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:24:24.503 [tomcat-handler-12] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:24:24.50249(Timestamp), 7(Long)
2026-01-06 13:24:24.507 [tomcat-handler-12] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:24:24.507 [tomcat-handler-12] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4fc2ad]
2026-01-06 13:24:24.507 [tomcat-handler-12] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:26:12.512 [tomcat-handler-13] ERROR com.aetheris.rag.util.JwtUtil - Token 格式错误: Invalid compact JWT string: Compact JWSs must contain exactly 2 period characters, and compact JWEs must contain exactly 4.  Found: 0
2026-01-06 13:26:12.513 [tomcat-handler-13] ERROR c.a.r.c.SecurityConfig$JwtAuthenticationFilter - 验证 Token 时发生未知错误: Token 格式错误
java.lang.RuntimeException: Token 格式错误
	at com.aetheris.rag.util.JwtUtil.parseToken(JwtUtil.java:158)
	at com.aetheris.rag.config.SecurityConfig$JwtAuthenticationFilter.doFilterInternal(SecurityConfig.java:101)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: io.jsonwebtoken.MalformedJwtException: Invalid compact JWT string: Compact JWSs must contain exactly 2 period characters, and compact JWEs must contain exactly 4.  Found: 0
	at io.jsonwebtoken.impl.JwtTokenizer.tokenize(JwtTokenizer.java:102)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:372)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:364)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:94)
	at io.jsonwebtoken.impl.io.AbstractParser.parse(AbstractParser.java:36)
	at io.jsonwebtoken.impl.io.AbstractParser.parse(AbstractParser.java:29)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseSignedClaims(DefaultJwtParser.java:827)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:803)
	at com.aetheris.rag.util.JwtUtil.parseToken(JwtUtil.java:151)
	... 82 common frames omitted
2026-01-06 13:26:27.315 [tomcat-handler-19] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: admin@aetheris.com
2026-01-06 13:26:27.316 [tomcat-handler-19] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: admin@aetheris.com
2026-01-06 13:26:27.316 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:26:27.316 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a487fed] was not registered for synchronization because synchronization is not active
2026-01-06 13:26:27.317 [tomcat-handler-19] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@60617435 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:26:27.317 [tomcat-handler-19] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:26:27.317 [tomcat-handler-19] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: admin@aetheris.com(String)
2026-01-06 13:26:27.319 [tomcat-handler-19] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:26:27.319 [tomcat-handler-19] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a487fed]
2026-01-06 13:26:27.399 [tomcat-handler-19] WARN  c.a.r.e.GlobalExceptionHandler - 未授权访问: 邮箱或密码错误
2026-01-06 13:27:04.944 [tomcat-handler-21] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: admin@aetheris.com
2026-01-06 13:27:04.944 [tomcat-handler-21] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: admin@aetheris.com
2026-01-06 13:27:04.944 [tomcat-handler-21] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:27:04.944 [tomcat-handler-21] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31b0b18a] was not registered for synchronization because synchronization is not active
2026-01-06 13:27:04.945 [tomcat-handler-21] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1064786380 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:27:04.945 [tomcat-handler-21] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:27:04.945 [tomcat-handler-21] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: admin@aetheris.com(String)
2026-01-06 13:27:04.947 [tomcat-handler-21] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:27:04.947 [tomcat-handler-21] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31b0b18a]
2026-01-06 13:27:05.023 [tomcat-handler-21] WARN  c.a.r.e.GlobalExceptionHandler - 未授权访问: 邮箱或密码错误
2026-01-06 13:27:09.880 [tomcat-handler-23] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: phase4test@test.com
2026-01-06 13:27:09.881 [tomcat-handler-23] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: phase4test@test.com
2026-01-06 13:27:09.881 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:27:09.881 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e65acb8] was not registered for synchronization because synchronization is not active
2026-01-06 13:27:09.882 [tomcat-handler-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1081335304 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:27:09.882 [tomcat-handler-23] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:27:09.882 [tomcat-handler-23] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: phase4test@test.com(String)
2026-01-06 13:27:09.883 [tomcat-handler-23] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:27:09.883 [tomcat-handler-23] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e65acb8]
2026-01-06 13:27:09.960 [tomcat-handler-23] WARN  c.a.r.e.GlobalExceptionHandler - 未授权访问: 邮箱或密码错误
2026-01-06 13:27:13.429 [tomcat-handler-25] INFO  c.a.rag.controller.AuthController - POST /api/auth/register - username: admin2
2026-01-06 13:27:13.431 [tomcat-handler-25] INFO  c.a.rag.service.impl.AuthServiceImpl - 注册新用户: admin2
2026-01-06 13:27:13.431 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:27:13.431 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:13.431 [tomcat-handler-25] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1508675362 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will be managed by Spring
2026-01-06 13:27:13.431 [tomcat-handler-25] DEBUG c.a.r.mapper.UserMapper.emailExists - ==>  Preparing: SELECT COUNT(*) > 0 FROM users WHERE email = ?
2026-01-06 13:27:13.432 [tomcat-handler-25] DEBUG c.a.r.mapper.UserMapper.emailExists - ==> Parameters: admin2@aetheris.com(String)
2026-01-06 13:27:13.433 [tomcat-handler-25] DEBUG c.a.r.mapper.UserMapper.emailExists - <==      Total: 1
2026-01-06 13:27:13.433 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:13.434 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687] from current transaction
2026-01-06 13:27:13.434 [tomcat-handler-25] DEBUG c.a.r.m.UserMapper.usernameExists - ==>  Preparing: SELECT COUNT(*) > 0 FROM users WHERE username = ?
2026-01-06 13:27:13.434 [tomcat-handler-25] DEBUG c.a.r.m.UserMapper.usernameExists - ==> Parameters: admin2(String)
2026-01-06 13:27:13.435 [tomcat-handler-25] DEBUG c.a.r.m.UserMapper.usernameExists - <==      Total: 1
2026-01-06 13:27:13.435 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:13.513 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687] from current transaction
2026-01-06 13:27:13.514 [tomcat-handler-25] DEBUG c.a.rag.mapper.UserMapper.insert - ==>  Preparing: INSERT INTO users (username, email, password_hash, created_at, updated_at, last_active_at) VALUES (?, ?, ?, ?, ?, ?)
2026-01-06 13:27:13.515 [tomcat-handler-25] DEBUG c.a.rag.mapper.UserMapper.insert - ==> Parameters: admin2(String), admin2@aetheris.com(String), $2a$10$.ewkRPwVemtzy6ouV0E.sO.MDhG3qBPK9fulaKJNErs21MGaK.Vgq(String), 2026-01-06 13:27:13.512008(Timestamp), 2026-01-06 13:27:13.512009(Timestamp), 2026-01-06 13:27:13.51201(Timestamp)
2026-01-06 13:27:13.517 [tomcat-handler-25] DEBUG c.a.rag.mapper.UserMapper.insert - <==    Updates: 1
2026-01-06 13:27:13.519 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:13.519 [tomcat-handler-25] INFO  c.a.rag.service.impl.AuthServiceImpl - User registered successfully: 13
2026-01-06 13:27:13.519 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:13.519 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:13.519 [tomcat-handler-25] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f892687]
2026-01-06 13:27:17.778 [tomcat-handler-27] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 13
2026-01-06 13:27:17.779 [tomcat-handler-27] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:27:17.780 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:27:17.780 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5554968e] was not registered for synchronization because synchronization is not active
2026-01-06 13:27:17.780 [tomcat-handler-27] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1331797253 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:27:17.781 [tomcat-handler-27] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:27:17.781 [tomcat-handler-27] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:27:17.784 [tomcat-handler-27] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:27:17.784 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5554968e]
2026-01-06 13:27:17.784 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:27:17.784 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b4871] was not registered for synchronization because synchronization is not active
2026-01-06 13:27:17.785 [tomcat-handler-27] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1153524768 wrapping com.mysql.cj.jdbc.ConnectionImpl@5615f82d] will not be managed by Spring
2026-01-06 13:27:17.785 [tomcat-handler-27] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:27:17.785 [tomcat-handler-27] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:27:17.787 [tomcat-handler-27] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:27:17.787 [tomcat-handler-27] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b4871]
2026-01-06 13:29:00.664 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=27s600ms), soft-evicting connections from pool.
2026-01-06 13:30:24.056 [tomcat-handler-29] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:30:24.057 [tomcat-handler-29] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:30:24.057 [tomcat-handler-29] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:30:24.057 [tomcat-handler-29] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5294491b] was not registered for synchronization because synchronization is not active
2026-01-06 13:30:24.058 [tomcat-handler-29] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1548991801 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:30:24.058 [tomcat-handler-29] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:30:24.059 [tomcat-handler-29] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5294491b]
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d42e925] was not registered for synchronization because synchronization is not active
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@750332865 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:30:24.061 [tomcat-handler-29] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:30:24.062 [tomcat-handler-29] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:30:24.063 [tomcat-handler-29] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d42e925]
2026-01-06 13:30:24.128 [tomcat-handler-30] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:30:24.129 [tomcat-handler-30] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:30:24.129 [tomcat-handler-30] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:30:24.129 [tomcat-handler-30] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d41484d] was not registered for synchronization because synchronization is not active
2026-01-06 13:30:24.129 [tomcat-handler-30] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@120622337 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:30:24.129 [tomcat-handler-30] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:30:24.130 [tomcat-handler-30] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:30:24.132 [tomcat-handler-30] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:30:24.132 [tomcat-handler-30] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d41484d]
2026-01-06 13:30:24.132 [tomcat-handler-30] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:30:24.132 [tomcat-handler-30] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e7b6317] was not registered for synchronization because synchronization is not active
2026-01-06 13:30:24.132 [tomcat-handler-30] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2031047093 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:30:24.132 [tomcat-handler-30] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:30:24.133 [tomcat-handler-30] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:30:24.134 [tomcat-handler-30] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:30:24.134 [tomcat-handler-30] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e7b6317]
2026-01-06 13:31:36.823 [tomcat-handler-31] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:31:36.824 [tomcat-handler-31] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:31:36.827 [tomcat-handler-31] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:31:36.827 [tomcat-handler-31] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:31:36.827 [tomcat-handler-31] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346e0b18]
2026-01-06 13:31:36.828 [tomcat-handler-31] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1050042472 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will be managed by Spring
2026-01-06 13:31:36.828 [tomcat-handler-31] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:31:36.828 [tomcat-handler-31] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:31:36.829 [tomcat-handler-31] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:31:36.829 [tomcat-handler-31] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346e0b18]
2026-01-06 13:31:36.829 [tomcat-handler-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346e0b18]
2026-01-06 13:31:36.829 [tomcat-handler-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346e0b18]
2026-01-06 13:31:36.829 [tomcat-handler-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346e0b18]
2026-01-06 13:31:47.111 [tomcat-handler-32] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:31:47.112 [tomcat-handler-32] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:31:47.112 [tomcat-handler-32] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:31:47.112 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:31:47.112 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe61b7f] was not registered for synchronization because synchronization is not active
2026-01-06 13:31:47.113 [tomcat-handler-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1243996605 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:31:47.113 [tomcat-handler-32] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:31:47.114 [tomcat-handler-32] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:31:47.115 [tomcat-handler-32] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:31:47.115 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe61b7f]
2026-01-06 13:31:47.198 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:31:47.198 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbb0691] was not registered for synchronization because synchronization is not active
2026-01-06 13:31:47.198 [tomcat-handler-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@336190330 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:31:47.198 [tomcat-handler-32] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:31:47.198 [tomcat-handler-32] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:31:47.197972(Timestamp), 7(Long)
2026-01-06 13:31:47.202 [tomcat-handler-32] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:31:47.202 [tomcat-handler-32] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbb0691]
2026-01-06 13:31:47.202 [tomcat-handler-32] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:31:48.580 [tomcat-handler-33] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:31:48.582 [tomcat-handler-33] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:31:48.582 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:31:48.582 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb97303] was not registered for synchronization because synchronization is not active
2026-01-06 13:31:48.583 [tomcat-handler-33] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@536181131 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:31:48.583 [tomcat-handler-33] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:31:48.583 [tomcat-handler-33] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb97303]
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132d2d64] was not registered for synchronization because synchronization is not active
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@77297001 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:31:48.586 [tomcat-handler-33] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:31:48.587 [tomcat-handler-33] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:31:48.588 [tomcat-handler-33] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132d2d64]
2026-01-06 13:32:04.017 [tomcat-handler-34] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:04.017 [tomcat-handler-35] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:04.025 [tomcat-handler-34] INFO  c.a.r.controller.ResourceController - GET /api/resources/5
2026-01-06 13:32:04.025 [tomcat-handler-35] INFO  c.a.r.controller.ResourceController - GET /api/resources/5/chunks
2026-01-06 13:32:04.025 [tomcat-handler-34] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:04.025 [tomcat-handler-34] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e77c2a3] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:04.025 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:04.025 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebd3444] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:04.028 [tomcat-handler-34] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1887094243 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:04.028 [tomcat-handler-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@638647575 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:32:04.028 [tomcat-handler-34] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:32:04.028 [tomcat-handler-35] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:32:04.028 [tomcat-handler-34] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 5(Long)
2026-01-06 13:32:04.028 [tomcat-handler-35] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 5(Long)
2026-01-06 13:32:04.030 [tomcat-handler-34] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:32:04.030 [tomcat-handler-34] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e77c2a3]
2026-01-06 13:32:04.043 [tomcat-handler-35] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 39
2026-01-06 13:32:04.043 [tomcat-handler-35] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebd3444]
2026-01-06 13:32:21.108 [tomcat-handler-36] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:21.109 [tomcat-handler-36] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:32:21.109 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:21.109 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5641ab97] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:21.110 [tomcat-handler-36] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1073911260 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:21.111 [tomcat-handler-36] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:32:21.111 [tomcat-handler-36] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:32:21.114 [tomcat-handler-36] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:32:21.114 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5641ab97]
2026-01-06 13:32:21.115 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:21.115 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e4b556] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:21.115 [tomcat-handler-36] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1775283545 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:21.115 [tomcat-handler-36] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:32:21.115 [tomcat-handler-36] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:32:21.117 [tomcat-handler-36] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:32:21.117 [tomcat-handler-36] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e4b556]
2026-01-06 13:32:33.924 [tomcat-handler-37] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:33.925 [tomcat-handler-37] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:32:33.925 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:33.925 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295efd8] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:33.926 [tomcat-handler-37] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@887993561 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:33.926 [tomcat-handler-37] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:32:33.926 [tomcat-handler-37] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:32:33.928 [tomcat-handler-37] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:32:33.928 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295efd8]
2026-01-06 13:32:33.928 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:33.928 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e6aca5] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:33.929 [tomcat-handler-37] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@958429902 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:33.929 [tomcat-handler-37] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:32:33.929 [tomcat-handler-37] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:32:33.930 [tomcat-handler-37] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:32:33.930 [tomcat-handler-37] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e6aca5]
2026-01-06 13:32:38.095 [tomcat-handler-38] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:38.095 [tomcat-handler-39] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:38.096 [tomcat-handler-39] INFO  c.a.r.controller.ResourceController - GET /api/resources/5/chunks
2026-01-06 13:32:38.096 [tomcat-handler-38] INFO  c.a.r.controller.ResourceController - GET /api/resources/5
2026-01-06 13:32:38.096 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:38.096 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:38.096 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cdb940c] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:38.096 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63613b9c] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:38.098 [tomcat-handler-39] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1111699665 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:38.099 [tomcat-handler-38] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@552484668 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:32:38.099 [tomcat-handler-39] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:32:38.099 [tomcat-handler-38] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:32:38.100 [tomcat-handler-38] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 5(Long)
2026-01-06 13:32:38.100 [tomcat-handler-39] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 5(Long)
2026-01-06 13:32:38.101 [tomcat-handler-38] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:32:38.102 [tomcat-handler-38] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63613b9c]
2026-01-06 13:32:38.107 [tomcat-handler-39] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 39
2026-01-06 13:32:38.107 [tomcat-handler-39] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cdb940c]
2026-01-06 13:32:39.198 [tomcat-handler-40] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:39.199 [tomcat-handler-40] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:32:39.199 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:39.199 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef1b2e4] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:39.200 [tomcat-handler-40] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@569782878 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:39.200 [tomcat-handler-40] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:32:39.201 [tomcat-handler-40] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:32:39.203 [tomcat-handler-40] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:32:39.203 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef1b2e4]
2026-01-06 13:32:39.203 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:39.203 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3c7f20] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:39.203 [tomcat-handler-40] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@512328433 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:39.203 [tomcat-handler-40] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:32:39.204 [tomcat-handler-40] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:32:39.205 [tomcat-handler-40] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:32:39.205 [tomcat-handler-40] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3c7f20]
2026-01-06 13:32:43.365 [tomcat-handler-41] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:43.366 [tomcat-handler-41] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:32:43.366 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:43.366 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b1772c] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:43.367 [tomcat-handler-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1591395173 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:43.367 [tomcat-handler-41] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:32:43.367 [tomcat-handler-41] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:32:43.369 [tomcat-handler-41] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:32:43.369 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b1772c]
2026-01-06 13:32:43.369 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:43.369 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104258f1] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:43.369 [tomcat-handler-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@411791479 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:43.370 [tomcat-handler-41] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:32:43.370 [tomcat-handler-41] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:32:43.371 [tomcat-handler-41] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:32:43.371 [tomcat-handler-41] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104258f1]
2026-01-06 13:32:53.005 [tomcat-handler-43] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:53.005 [tomcat-handler-42] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:53.006 [tomcat-handler-43] INFO  c.a.r.controller.ResourceController - GET /api/resources/5/chunks
2026-01-06 13:32:53.006 [tomcat-handler-42] INFO  c.a.r.controller.ResourceController - GET /api/resources/5
2026-01-06 13:32:53.006 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:53.006 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:53.006 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b396c79] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:53.007 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47c42999] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:53.008 [tomcat-handler-42] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1162044480 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:32:53.008 [tomcat-handler-43] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1862727110 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:53.008 [tomcat-handler-42] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:32:53.008 [tomcat-handler-43] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:32:53.008 [tomcat-handler-42] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 5(Long)
2026-01-06 13:32:53.008 [tomcat-handler-43] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 5(Long)
2026-01-06 13:32:53.010 [tomcat-handler-42] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:32:53.010 [tomcat-handler-42] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47c42999]
2026-01-06 13:32:53.016 [tomcat-handler-43] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 39
2026-01-06 13:32:53.016 [tomcat-handler-43] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b396c79]
2026-01-06 13:32:54.605 [tomcat-handler-44] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:32:54.606 [tomcat-handler-44] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:32:54.606 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:54.606 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f7aac0a] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:54.608 [tomcat-handler-44] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1226096797 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:54.608 [tomcat-handler-44] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:32:54.609 [tomcat-handler-44] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:32:54.613 [tomcat-handler-44] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:32:54.613 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f7aac0a]
2026-01-06 13:32:54.614 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:32:54.614 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5482303d] was not registered for synchronization because synchronization is not active
2026-01-06 13:32:54.614 [tomcat-handler-44] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@778226779 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:32:54.614 [tomcat-handler-44] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:32:54.614 [tomcat-handler-44] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:32:54.616 [tomcat-handler-44] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:32:54.616 [tomcat-handler-44] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5482303d]
2026-01-06 13:33:21.484 [tomcat-handler-45] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:33:21.484 [tomcat-handler-46] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:33:21.484 [tomcat-handler-45] INFO  c.a.r.controller.ResourceController - GET /api/resources/5
2026-01-06 13:33:21.484 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:33:21.484 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@81bb29e] was not registered for synchronization because synchronization is not active
2026-01-06 13:33:21.485 [tomcat-handler-46] INFO  c.a.r.controller.ResourceController - GET /api/resources/5/chunks
2026-01-06 13:33:21.485 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:33:21.485 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9e569a] was not registered for synchronization because synchronization is not active
2026-01-06 13:33:21.486 [tomcat-handler-45] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@467971892 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:33:21.486 [tomcat-handler-45] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:33:21.486 [tomcat-handler-46] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@125229850 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:33:21.486 [tomcat-handler-46] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:33:21.486 [tomcat-handler-45] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 5(Long)
2026-01-06 13:33:21.486 [tomcat-handler-46] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 5(Long)
2026-01-06 13:33:21.487 [tomcat-handler-45] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:33:21.488 [tomcat-handler-45] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@81bb29e]
2026-01-06 13:33:21.493 [tomcat-handler-46] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 39
2026-01-06 13:33:21.493 [tomcat-handler-46] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9e569a]
2026-01-06 13:34:10.464 [tomcat-handler-47] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:34:10.466 [tomcat-handler-47] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:34:10.466 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:34:10.466 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8eb06a] was not registered for synchronization because synchronization is not active
2026-01-06 13:34:10.467 [tomcat-handler-47] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1217150911 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:34:10.467 [tomcat-handler-47] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:34:10.469 [tomcat-handler-47] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:34:10.473 [tomcat-handler-47] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:34:10.473 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8eb06a]
2026-01-06 13:34:10.473 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:34:10.473 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@798e940c] was not registered for synchronization because synchronization is not active
2026-01-06 13:34:10.473 [tomcat-handler-47] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@33253047 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:34:10.473 [tomcat-handler-47] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:34:10.474 [tomcat-handler-47] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:34:10.475 [tomcat-handler-47] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:34:10.475 [tomcat-handler-47] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@798e940c]
2026-01-06 13:43:27.060 [tomcat-handler-48] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:27.062 [tomcat-handler-48] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:43:27.065 [tomcat-handler-48] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:43:27.065 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:27.065 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250ec7d7]
2026-01-06 13:43:27.065 [tomcat-handler-48] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@804695207 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will be managed by Spring
2026-01-06 13:43:27.065 [tomcat-handler-48] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:43:27.066 [tomcat-handler-48] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:43:27.067 [tomcat-handler-48] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:43:27.067 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250ec7d7]
2026-01-06 13:43:27.068 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250ec7d7]
2026-01-06 13:43:27.068 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250ec7d7]
2026-01-06 13:43:27.068 [tomcat-handler-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250ec7d7]
2026-01-06 13:43:34.290 [tomcat-handler-49] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:34.291 [tomcat-handler-49] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:43:34.291 [tomcat-handler-49] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:43:34.291 [tomcat-handler-49] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:34.291 [tomcat-handler-49] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391765cb] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:34.292 [tomcat-handler-49] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1540673266 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:34.293 [tomcat-handler-49] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:43:34.293 [tomcat-handler-49] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:43:34.294 [tomcat-handler-49] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:43:34.294 [tomcat-handler-49] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391765cb]
2026-01-06 13:43:34.376 [tomcat-handler-49] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:34.377 [tomcat-handler-49] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@adbd872] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:34.377 [tomcat-handler-49] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@148950495 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:34.377 [tomcat-handler-49] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:43:34.377 [tomcat-handler-49] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:43:34.376667(Timestamp), 7(Long)
2026-01-06 13:43:34.380 [tomcat-handler-49] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:43:34.380 [tomcat-handler-49] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@adbd872]
2026-01-06 13:43:34.380 [tomcat-handler-49] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:43:34.437 [tomcat-handler-50] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:34.439 [tomcat-handler-50] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:43:34.439 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:34.439 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad97d79] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:34.439 [tomcat-handler-50] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@244655640 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:34.439 [tomcat-handler-50] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:43:34.439 [tomcat-handler-50] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:43:34.441 [tomcat-handler-50] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:43:34.441 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad97d79]
2026-01-06 13:43:34.442 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:34.442 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4e004] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:34.442 [tomcat-handler-50] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@352810844 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:34.442 [tomcat-handler-50] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:43:34.442 [tomcat-handler-50] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:43:34.443 [tomcat-handler-50] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:43:34.444 [tomcat-handler-50] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4e004]
2026-01-06 13:43:38.348 [tomcat-handler-51] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:38.349 [tomcat-handler-51] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:43:38.349 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:38.349 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5dc8fe] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:38.350 [tomcat-handler-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1029357553 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:38.350 [tomcat-handler-51] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:43:38.351 [tomcat-handler-51] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:43:38.352 [tomcat-handler-51] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:43:38.353 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5dc8fe]
2026-01-06 13:43:38.353 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:38.353 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e703cc] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:38.353 [tomcat-handler-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2022518806 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:38.353 [tomcat-handler-51] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:43:38.353 [tomcat-handler-51] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:43:38.354 [tomcat-handler-51] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:43:38.354 [tomcat-handler-51] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e703cc]
2026-01-06 13:43:41.513 [tomcat-handler-52] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:41.514 [tomcat-handler-52] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:43:41.514 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:41.514 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc2f852] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:41.515 [tomcat-handler-52] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2139843333 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:41.515 [tomcat-handler-52] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:43:41.516 [tomcat-handler-52] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:43:41.517 [tomcat-handler-52] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:43:41.517 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc2f852]
2026-01-06 13:43:41.518 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:41.518 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b2c6fd4] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:41.518 [tomcat-handler-52] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@594806923 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:41.518 [tomcat-handler-52] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:43:41.518 [tomcat-handler-52] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:43:41.519 [tomcat-handler-52] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:43:41.519 [tomcat-handler-52] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b2c6fd4]
2026-01-06 13:43:44.688 [tomcat-handler-53] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:44.688 [tomcat-handler-54] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:44.689 [tomcat-handler-53] INFO  c.a.r.controller.ResourceController - GET /api/resources/5
2026-01-06 13:43:44.689 [tomcat-handler-54] INFO  c.a.r.controller.ResourceController - GET /api/resources/5/chunks
2026-01-06 13:43:44.689 [tomcat-handler-53] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:44.689 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:44.689 [tomcat-handler-53] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@560eb9c8] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:44.689 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a24453] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:44.690 [tomcat-handler-53] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1313091090 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:44.690 [tomcat-handler-54] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@694529751 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:43:44.690 [tomcat-handler-53] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:43:44.690 [tomcat-handler-54] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:43:44.691 [tomcat-handler-53] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 5(Long)
2026-01-06 13:43:44.691 [tomcat-handler-54] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 5(Long)
2026-01-06 13:43:44.692 [tomcat-handler-53] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:43:44.693 [tomcat-handler-53] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@560eb9c8]
2026-01-06 13:43:44.695 [tomcat-handler-54] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 39
2026-01-06 13:43:44.695 [tomcat-handler-54] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a24453]
2026-01-06 13:43:49.398 [tomcat-handler-55] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:49.399 [tomcat-handler-55] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:43:49.399 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:49.400 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620f765a] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:49.400 [tomcat-handler-55] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1714486979 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:49.401 [tomcat-handler-55] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:43:49.401 [tomcat-handler-55] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:43:49.402 [tomcat-handler-55] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:43:49.402 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620f765a]
2026-01-06 13:43:49.402 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:49.402 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bff10b9] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:49.403 [tomcat-handler-55] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@307960378 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:49.403 [tomcat-handler-55] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:43:49.403 [tomcat-handler-55] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:43:49.404 [tomcat-handler-55] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:43:49.404 [tomcat-handler-55] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bff10b9]
2026-01-06 13:43:53.028 [tomcat-handler-56] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:43:53.031 [tomcat-handler-56] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:43:53.031 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:53.031 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@431d832e] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:53.032 [tomcat-handler-56] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@806631724 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:53.032 [tomcat-handler-56] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:43:53.033 [tomcat-handler-56] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:43:53.034 [tomcat-handler-56] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:43:53.034 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@431d832e]
2026-01-06 13:43:53.035 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:43:53.035 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6878c658] was not registered for synchronization because synchronization is not active
2026-01-06 13:43:53.035 [tomcat-handler-56] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1196637322 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:43:53.035 [tomcat-handler-56] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:43:53.035 [tomcat-handler-56] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:43:53.036 [tomcat-handler-56] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:43:53.036 [tomcat-handler-56] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6878c658]
2026-01-06 13:44:21.637 [tomcat-handler-57] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:44:21.638 [tomcat-handler-57] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:44:21.638 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:44:21.638 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6c8f87] was not registered for synchronization because synchronization is not active
2026-01-06 13:44:21.639 [tomcat-handler-57] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@562610740 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:44:21.640 [tomcat-handler-57] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:44:21.640 [tomcat-handler-57] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:44:21.641 [tomcat-handler-57] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:44:21.642 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6c8f87]
2026-01-06 13:44:21.642 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:44:21.642 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54550512] was not registered for synchronization because synchronization is not active
2026-01-06 13:44:21.642 [tomcat-handler-57] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1060026536 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:44:21.642 [tomcat-handler-57] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:44:21.642 [tomcat-handler-57] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:44:21.643 [tomcat-handler-57] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:44:21.643 [tomcat-handler-57] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54550512]
2026-01-06 13:44:36.684 [tomcat-handler-58] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:44:36.686 [tomcat-handler-58] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:44:36.686 [tomcat-handler-58] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:44:36.686 [tomcat-handler-58] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa9c4e7] was not registered for synchronization because synchronization is not active
2026-01-06 13:44:36.687 [tomcat-handler-58] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1403529621 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:44:36.687 [tomcat-handler-58] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:44:36.688 [tomcat-handler-58] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:44:36.689 [tomcat-handler-58] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:44:36.689 [tomcat-handler-58] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa9c4e7]
2026-01-06 13:44:36.689 [tomcat-handler-58] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:44:36.689 [tomcat-handler-58] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43a35f16] was not registered for synchronization because synchronization is not active
2026-01-06 13:44:36.689 [tomcat-handler-58] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@575415673 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:44:36.690 [tomcat-handler-58] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:44:36.690 [tomcat-handler-58] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:44:36.691 [tomcat-handler-58] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:44:36.691 [tomcat-handler-58] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43a35f16]
2026-01-06 13:44:37.949 [tomcat-handler-60] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:44:37.949 [tomcat-handler-59] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:44:37.950 [tomcat-handler-60] INFO  c.a.r.controller.ResourceController - GET /api/resources/3/chunks
2026-01-06 13:44:37.950 [tomcat-handler-59] INFO  c.a.r.controller.ResourceController - GET /api/resources/3
2026-01-06 13:44:37.951 [tomcat-handler-60] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:44:37.951 [tomcat-handler-59] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:44:37.951 [tomcat-handler-60] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c92f4fd] was not registered for synchronization because synchronization is not active
2026-01-06 13:44:37.951 [tomcat-handler-59] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6066fe33] was not registered for synchronization because synchronization is not active
2026-01-06 13:44:37.952 [tomcat-handler-59] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1451900056 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:44:37.952 [tomcat-handler-60] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1649743647 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:44:37.952 [tomcat-handler-59] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:44:37.952 [tomcat-handler-60] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:44:37.953 [tomcat-handler-59] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 3(Long)
2026-01-06 13:44:37.953 [tomcat-handler-60] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 3(Long)
2026-01-06 13:44:37.954 [tomcat-handler-59] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:44:37.954 [tomcat-handler-59] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6066fe33]
2026-01-06 13:44:37.959 [tomcat-handler-60] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 41
2026-01-06 13:44:37.959 [tomcat-handler-60] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c92f4fd]
2026-01-06 13:45:02.087 [tomcat-handler-61] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:45:02.088 [tomcat-handler-61] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:45:02.088 [tomcat-handler-61] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:45:02.088 [tomcat-handler-61] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d6df568] was not registered for synchronization because synchronization is not active
2026-01-06 13:45:02.089 [tomcat-handler-61] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1501227780 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:45:02.089 [tomcat-handler-61] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:45:02.089 [tomcat-handler-61] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d6df568]
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8775ba3] was not registered for synchronization because synchronization is not active
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@973289840 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:45:02.091 [tomcat-handler-61] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:45:02.092 [tomcat-handler-61] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:45:02.092 [tomcat-handler-61] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8775ba3]
2026-01-06 13:45:24.309 [tomcat-handler-62] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:45:24.310 [tomcat-handler-62] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:45:24.310 [tomcat-handler-62] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:45:24.310 [tomcat-handler-62] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea14959] was not registered for synchronization because synchronization is not active
2026-01-06 13:45:24.311 [tomcat-handler-62] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@205105005 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:45:24.311 [tomcat-handler-62] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:45:24.319 [tomcat-handler-62] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:45:24.321 [tomcat-handler-62] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:45:24.321 [tomcat-handler-62] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea14959]
2026-01-06 13:45:24.322 [tomcat-handler-62] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:45:24.322 [tomcat-handler-62] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65086d09] was not registered for synchronization because synchronization is not active
2026-01-06 13:45:24.322 [tomcat-handler-62] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1373047664 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:45:24.322 [tomcat-handler-62] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:45:24.322 [tomcat-handler-62] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:45:24.325 [tomcat-handler-62] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:45:24.326 [tomcat-handler-62] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65086d09]
2026-01-06 13:45:50.238 [tomcat-handler-63] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:45:50.239 [tomcat-handler-63] INFO  c.a.rag.controller.AuthController - GET /api/auth/me - userId: 7
2026-01-06 13:45:50.241 [tomcat-handler-63] DEBUG c.a.rag.service.impl.AuthServiceImpl - 获取当前用户信息: userId=7
2026-01-06 13:45:50.241 [tomcat-handler-63] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:45:50.241 [tomcat-handler-63] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67a06]
2026-01-06 13:45:50.241 [tomcat-handler-63] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1726299161 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will be managed by Spring
2026-01-06 13:45:50.241 [tomcat-handler-63] DEBUG c.a.rag.mapper.UserMapper.findById - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE id = ?
2026-01-06 13:45:50.242 [tomcat-handler-63] DEBUG c.a.rag.mapper.UserMapper.findById - ==> Parameters: 7(Long)
2026-01-06 13:45:50.243 [tomcat-handler-63] DEBUG c.a.rag.mapper.UserMapper.findById - <==      Total: 1
2026-01-06 13:45:50.243 [tomcat-handler-63] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67a06]
2026-01-06 13:45:50.244 [tomcat-handler-63] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67a06]
2026-01-06 13:45:50.244 [tomcat-handler-63] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67a06]
2026-01-06 13:45:50.244 [tomcat-handler-63] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67a06]
2026-01-06 13:46:00.559 [tomcat-handler-64] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:46:00.560 [tomcat-handler-64] INFO  c.a.rag.controller.AuthController - POST /api/auth/login - email: 123@123.com
2026-01-06 13:46:00.560 [tomcat-handler-64] INFO  c.a.rag.service.impl.AuthServiceImpl - 用户登录尝试: 123@123.com
2026-01-06 13:46:00.560 [tomcat-handler-64] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:46:00.560 [tomcat-handler-64] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aac99f9] was not registered for synchronization because synchronization is not active
2026-01-06 13:46:00.561 [tomcat-handler-64] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1156741652 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:46:00.561 [tomcat-handler-64] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==>  Preparing: SELECT id, username, email, password_hash, created_at, updated_at, last_active_at FROM users WHERE email = ?
2026-01-06 13:46:00.562 [tomcat-handler-64] DEBUG c.a.r.mapper.UserMapper.findByEmail - ==> Parameters: 123@123.com(String)
2026-01-06 13:46:00.563 [tomcat-handler-64] DEBUG c.a.r.mapper.UserMapper.findByEmail - <==      Total: 1
2026-01-06 13:46:00.563 [tomcat-handler-64] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aac99f9]
2026-01-06 13:46:00.642 [tomcat-handler-64] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:46:00.642 [tomcat-handler-64] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db31876] was not registered for synchronization because synchronization is not active
2026-01-06 13:46:00.642 [tomcat-handler-64] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1937650024 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:46:00.642 [tomcat-handler-64] DEBUG c.a.r.m.UserMapper.updateLastActive - ==>  Preparing: UPDATE users SET last_active_at = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
2026-01-06 13:46:00.643 [tomcat-handler-64] DEBUG c.a.r.m.UserMapper.updateLastActive - ==> Parameters: 2026-01-06 13:46:00.642627(Timestamp), 7(Long)
2026-01-06 13:46:00.647 [tomcat-handler-64] DEBUG c.a.r.m.UserMapper.updateLastActive - <==    Updates: 1
2026-01-06 13:46:00.647 [tomcat-handler-64] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db31876]
2026-01-06 13:46:00.647 [tomcat-handler-64] INFO  c.a.rag.service.impl.AuthServiceImpl - User logged in successfully: 7
2026-01-06 13:46:00.716 [tomcat-handler-65] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:46:00.718 [tomcat-handler-65] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:46:00.718 [tomcat-handler-65] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:46:00.718 [tomcat-handler-65] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b67cb84] was not registered for synchronization because synchronization is not active
2026-01-06 13:46:00.718 [tomcat-handler-65] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@777129526 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:46:00.718 [tomcat-handler-65] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:46:00.719 [tomcat-handler-65] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:46:00.721 [tomcat-handler-65] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 5
2026-01-06 13:46:00.721 [tomcat-handler-65] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b67cb84]
2026-01-06 13:46:00.721 [tomcat-handler-65] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:46:00.721 [tomcat-handler-65] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566a2027] was not registered for synchronization because synchronization is not active
2026-01-06 13:46:00.721 [tomcat-handler-65] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@59046533 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:46:00.721 [tomcat-handler-65] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:46:00.722 [tomcat-handler-65] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:46:00.723 [tomcat-handler-65] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:46:00.723 [tomcat-handler-65] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566a2027]
2026-01-06 13:47:08.304 [tomcat-handler-66] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:47:08.332 [tomcat-handler-66] INFO  c.a.r.controller.ResourceController - POST /api/resources - userId=7, title=react, file=react.md
2026-01-06 13:47:08.334 [tomcat-handler-66] INFO  c.a.r.s.impl.ResourceServiceImpl - 开始上传资源: react, 文件: react.md
2026-01-06 13:47:08.342 [tomcat-handler-66] INFO  c.a.r.s.impl.ResourceServiceImpl - 文件已保存: /Users/hubin5/app/Aetheris/uploads/1767678428334_react.md
2026-01-06 13:47:08.344 [tomcat-handler-66] DEBUG c.a.r.s.impl.ResourceServiceImpl - 文件内容哈希: e53056c8cd837e23d91eef4f2606f3b28a90e942b5e4b4c345100186cf2df07f
2026-01-06 13:47:08.344 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:08.344 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.344 [tomcat-handler-66] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@161396172 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will be managed by Spring
2026-01-06 13:47:08.344 [tomcat-handler-66] DEBUG c.a.r.m.R.findByContentHash - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE content_hash = ?
2026-01-06 13:47:08.345 [tomcat-handler-66] DEBUG c.a.r.m.R.findByContentHash - ==> Parameters: e53056c8cd837e23d91eef4f2606f3b28a90e942b5e4b4c345100186cf2df07f(String)
2026-01-06 13:47:08.346 [tomcat-handler-66] DEBUG c.a.r.m.R.findByContentHash - <==      Total: 0
2026-01-06 13:47:08.346 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.365 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319] from current transaction
2026-01-06 13:47:08.365 [tomcat-handler-66] DEBUG c.a.rag.mapper.ResourceMapper.insert - ==>  Preparing: INSERT INTO resources ( title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 13:47:08.366 [tomcat-handler-66] DEBUG c.a.rag.mapper.ResourceMapper.insert - ==> Parameters: react(String), react(String), MARKDOWN(String), /Users/hubin5/app/Aetheris/uploads/1767678428334_react.md(String), 67744(Long), react(String), e53056c8cd837e23d91eef4f2606f3b28a90e942b5e4b4c345100186cf2df07f(String), 7(Long), 2026-01-06 13:47:08.365427(Timestamp), 0(Integer), false(Boolean)
2026-01-06 13:47:08.370 [tomcat-handler-66] DEBUG c.a.rag.mapper.ResourceMapper.insert - <==    Updates: 1
2026-01-06 13:47:08.370 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.370 [tomcat-handler-66] INFO  c.a.r.s.impl.ResourceServiceImpl - 资源记录已创建: 6
2026-01-06 13:47:08.370 [tomcat-handler-66] INFO  c.a.rag.util.MarkdownProcessor - 开始处理 Markdown 文件: /Users/hubin5/app/Aetheris/uploads/1767678428334_react.md
2026-01-06 13:47:08.371 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - Markdown 文件长度: 59840 字符
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 提取到 383 个文本块
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 0: 章节 五. React>1. React 基础>2) 入门案例>Hello, 长度 987
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 1: 章节 五. React>1. React 基础>2) 入门案例>Hello, 长度 975
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 2: 章节 五. React>1. React 基础>3) 人物卡片案例, 长度 574
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 3: 章节 五. React>1. React 基础>3) 人物卡片案例, 长度 2149
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 4: 章节 五. React>1. React 基础>3) 人物卡片案例, 长度 754
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 5: 章节 五. React>1. React 基础>3) 人物卡片案例>事件处理, 长度 654
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 6: 章节 五. React>1. React 基础>3) 人物卡片案例>列表 & Key, 长度 799
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 7: 章节 五. React>1. React 基础>3) 人物卡片案例>条件渲染, 长度 978
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 8: 章节 五. React>1. React 基础>3) 人物卡片案例>条件渲染, 长度 834
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 9: 章节 五. React>1. React 基础>3) 人物卡片案例>参数解构, 长度 762
2026-01-06 13:47:08.407 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 10: 章节 五. React>1. React 基础>4) 处理变化的数据, 长度 979
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 11: 章节 五. React>1. React 基础>4) 处理变化的数据>axios, 长度 834
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 12: 章节 五. React>1. React 基础>4) 处理变化的数据>状态, 长度 820
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 13: 章节 五. React>1. React 基础>4) 处理变化的数据>状态, 长度 999
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 14: 章节 五. React>1. React 基础>4) 处理变化的数据>useState, 长度 882
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 15: 章节 五. React>1. React 基础>4) 处理变化的数据>useState, 长度 816
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 16: 章节 五. React>1. React 基础>4) 处理变化的数据>useState, 长度 981
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 17: 章节 五. React>1. React 基础>4) 处理变化的数据>useState, 长度 977
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 18: 章节 五. React>1. React 基础>4) 处理变化的数据>useEffect, 长度 493
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 19: 章节 五. React>1. React 基础>4) 处理变化的数据>useEffect, 长度 723
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 20: 章节 五. React>1. React 基础>4) 处理变化的数据>useContext, 长度 652
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 21: 章节 五. React>1. React 基础>4) 处理变化的数据>useContext, 长度 1526
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 22: 章节 五. React>1. React 基础>4) 处理变化的数据>表单, 长度 458
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 23: 章节 五. React>2. React 进阶, 长度 1536
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 24: 章节 五. React>2. React 进阶>1) Ant Design>表格, 长度 998
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 25: 章节 五. React>2. React 进阶>1) Ant Design>客户端分页, 长度 1310
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 26: 章节 五. React>2. React 进阶>1) Ant Design>客户端分页, 长度 205
2026-01-06 13:47:08.408 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 27: 章节 五. React>2. React 进阶>1) Ant Design>客户端分页, 长度 1279
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 28: 章节 五. React>2. React 进阶>1) Ant Design>服务端分页, 长度 267
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 29: 章节 五. React>2. React 进阶>1) Ant Design>服务端分页, 长度 1898
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 30: 章节 五. React>2. React 进阶>1) Ant Design>条件查询, 长度 333
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 31: 章节 五. React>2. React 进阶>1) Ant Design>条件查询, 长度 3258
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 32: 章节 五. React>2. React 进阶>1) Ant Design>删除, 长度 447
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 33: 章节 五. React>2. React 进阶>1) Ant Design>删除, 长度 774
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 34: 章节 五. React>2. React 进阶>1) Ant Design>修改, 长度 1082
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 35: 章节 五. React>2. React 进阶>1) Ant Design>修改, 长度 202
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 36: 章节 五. React>2. React 进阶>1) Ant Design>修改, 长度 2212
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 37: 章节 五. React>2. React 进阶>1) Ant Design>修改, 长度 304
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 38: 章节 五. React>2. React 进阶>1) Ant Design>新增, 长度 1945
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 39: 章节 五. React>2. React 进阶>1) Ant Design>新增, 长度 202
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 40: 章节 五. React>2. React 进阶>1) Ant Design>新增, 长度 2065
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 41: 章节 五. React>2. React 进阶>1) Ant Design>新增, 长度 344
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 42: 章节 五. React>2. React 进阶>1) Ant Design>删除选中, 长度 2685
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 43: 章节 五. React>2. React 进阶>1) Ant Design>删除选中, 长度 938
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 44: 章节 五. React>2. React 进阶>1) Ant Design>useRequest, 长度 1855
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 45: 章节 五. React>2. React 进阶>1) Ant Design>useRequest, 长度 233
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 46: 章节 五. React>2. React 进阶>1) Ant Design>useAndtTable, 长度 1029
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 47: 章节 五. React>2. React 进阶>1) Ant Design>useAndtTable, 长度 212
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 48: 章节 五. React>2. React 进阶>2) MobX, 长度 1274
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 49: 章节 五. React>2. React 进阶>2) MobX>使用, 长度 932
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 50: 章节 五. React>2. React 进阶>2) MobX>使用, 长度 362
2026-01-06 13:47:08.409 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 51: 章节 五. React>2. React 进阶>2) MobX>使用, 长度 933
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 52: 章节 五. React>2. React 进阶>2) MobX>使用, 长度 502
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 53: 章节 五. React>2. React 进阶>2) MobX>使用, 长度 927
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 54: 章节 五. React>2. React 进阶>2) MobX>注解方式, 长度 420
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 55: 章节 五. React>2. React 进阶>2) MobX>注解方式, 长度 1142
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 56: 章节 五. React>2. React 进阶>3) React Router>使用, 长度 392
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 57: 章节 五. React>2. React 进阶>3) React Router>使用, 长度 944
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 58: 章节 五. React>2. React 进阶>3) React Router>使用, 长度 664
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 59: 章节 五. React>2. React 进阶>3) React Router>动态路由, 长度 983
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 60: 章节 五. React>2. React 进阶>3) React Router>动态路由, 长度 328
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 61: 章节 五. React>2. React 进阶>3) React Router>动态路由, 长度 1592
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 62: 章节 五. React>2. React 进阶>3) React Router>动态菜单, 长度 878
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 63: 章节 五. React>2. React 进阶>3) React Router>动态菜单, 长度 439
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 64: 章节 五. React>2. React 进阶>3) React Router>动态菜单, 长度 2279
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 65: 章节 五. React>2. React 进阶>3) React Router>登录, 长度 569
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 66: 章节 五. React>2. React 进阶>3) React Router>登录, 长度 3669
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 67: 章节 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查, 长度 815
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 68: 章节 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查, 长度 582
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 69: 章节 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查, 长度 1201
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 70: 章节 五. React>附录>代码片段, 长度 975
2026-01-06 13:47:08.410 [tomcat-handler-66] DEBUG c.a.rag.util.MarkdownProcessor - 创建切片 71: 章节 五. React>附录>代码片段, 长度 230
2026-01-06 13:47:08.410 [tomcat-handler-66] INFO  c.a.rag.util.MarkdownProcessor - Markdown 处理完成，共生成 72 个切片
2026-01-06 13:47:08.420 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319] from current transaction
2026-01-06 13:47:08.442 [tomcat-handler-66] DEBUG c.a.r.mapper.ChunkMapper.batchInsert - ==>  Preparing: INSERT INTO resource_chunks ( resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 13:47:08.451 [tomcat-handler-66] DEBUG c.a.r.mapper.ChunkMapper.batchInsert - ==> Parameters: 6(Long), 0(Integer), 五. React1. React 基础react 是前端三大框架之一没有 vue 的基础更好，因为两者思想不太一样，不能用 vue 的习惯学习 react需要有 js 基础，视频 19-58需要有 ts 基础，视频 110-116本教程采用更流行的【函数式组件 + hooks】方式进行讲解没有 vue 的基础更好，因为两者思想不太一样，不能用 vue 的习惯学习 react需要有 js 基础，视频 19-58需要有 ts 基础，视频 110-116本教程采用更流行的【函数式组件 + hooks】方式进行讲解1) 环境准备创建项目首先，通过 react 脚手架创建项目npx create-react-app client --template typescript
client 是项目名目前 react 版本是 18.xclient 是项目名目前 react 版本是 18.x运行项目cd client
npm start
会自动打开浏览器，默认监听 3000 端口会自动打开浏览器，默认监听 3000 端口image-20221001110328233修改端口在项目根目录下新建文件 .env.development，它可以定义开发环境下的环境变量PORT=7070
重启项目，端口就变成了 7070参考文档：Advanced Configuration | Create React App (create-react-app.dev)参考文档：Advanced Configuration | Create React App (create-react-app.dev)浏览器插件插件地址 New React Developer Tools – React Blog (reactjs.org)image-20221004105110150VSCode推荐安装 Prettier 代码格式化插件image-202210040908161422) 入门案例Hello编写一个 src/pages/Hello.tsx 组件export default function Hello()  {
  return <h3>Hello, World!</h3>
}
组件中使用了 jsx 语法，即在 js 中直接使用 html 标签或组件标签函数式组件必须返回标签片段(String), 五. React>1. React 基础>2) 入门案例>Hello(String), null, null, 五. React>1. React 基础>2) 入门案例>Hello(String), 609b3e573995210f85dab82d1c523fd5aa070c83ae950fb90cad7539dbadfe4d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 1(Integer), 装 Prettier 代码格式化插件image-202210040908161422) 入门案例Hello编写一个 src/pages/Hello.tsx 组件export default function Hello()  {
  return <h3>Hello, World!</h3>
}
组件中使用了 jsx 语法，即在 js 中直接使用 html 标签或组件标签函数式组件必须返回标签片段组件中使用了 jsx 语法，即在 js 中直接使用 html 标签或组件标签函数式组件必须返回标签片段在 index.js 引入组件import React from 'react'
import ReactDOM from 'react-dom/client'
import './index.css'
import reportWebVitals from './reportWebVitals'
// 1. 引入组件
import Hello from './pages/Hello'

const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement)
root.render(
  <React.StrictMode>
    {/* 2. 将原来的 <App/> 改为 <Hello></Hello> */}
    <Hello></Hello>
  </React.StrictMode>
)

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals()
将欢迎词作为属性传递给组件<Hello msg='你好'></Hello>
字符串值，可以直接使用双引号赋值其它类型的值，用字符串值，可以直接使用双引号赋值其它类型的值，用而组件修改为(String), 五. React>1. React 基础>2) 入门案例>Hello(String), null, null, 五. React>1. React 基础>2) 入门案例>Hello(String), 4dc83ff0521b765a9a923d5535667a91f022fc4fbb5a0ebae0677f407a7cfd82(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 2(Integer), (console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals()
将欢迎词作为属性传递给组件<Hello msg='你好'></Hello>
字符串值，可以直接使用双引号赋值其它类型的值，用字符串值，可以直接使用双引号赋值其它类型的值，用而组件修改为export default function Hello(props: { msg: string }) {
  return <h3>{props.msg}</h3>
}
jsx 原理export default function Hello(props: { msg: string }) {
  return <h3>{props.msg}</h3>
}
在 v17 之前，其实相当于import { createElement } from "react";
export default function Hello(props: {msg: string}) {
  return createElement('h3', null, `${props.msg}`)
}
3) 人物卡片案例样式已经准备好 /src/css/P1.css(String), 五. React>1. React 基础>3) 人物卡片案例(String), null, null, 五. React>1. React 基础>3) 人物卡片案例(String), e588e724746a06413cbcf1ef816443afe54b2764fcdc24d44da39a7aa4ca0823(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 3(Integer), </h3>
}
在 v17 之前，其实相当于import { createElement } from "react";
export default function Hello(props: {msg: string}) {
  return createElement('h3', null, `${props.msg}`)
}
3) 人物卡片案例样式已经准备好 /src/css/P1.css#root {
  display: flex;
  width: 100vw;
  height: 100vh;
  justify-content: center;
  align-items: center;
}

div.student {
  flex-shrink: 0;
  flex-grow: 0;
  position: relative;
  width: 128px;
  height: 330px;
  /* font-family: '华文行楷'; */
  font-size: 14px;
  text-align: center;
  margin: 20px;
  display: flex;
  justify-content: flex-start;
  background-color: #7591AD;
  align-items: center;
  flex-direction: column;
  border-radius: 5px;
  box-shadow: 0 0 8px #2c2c2c;
  color: #e8f6fd;
}

.photo {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  border-radius: 0%;
  overflow: hidden;
  transition: 0.3s;
  border-radius: 5px;
}

.photo img {
  width: 100%;
  height: 100%;
  /* object-fit: scale-down; */
  object-fit: cover;
}

.photo::before {
  position: absolute;
  content: '';
  width: 100%;
  height: 100%;
  background-image: linear-gradient(to top, #333, transparent);
}

div.student h2 {
  position: absolute;
  font-size: 20px;
  width: 100%;
  height: 68px;
  font-weight: normal;
  text-align: center;
  margin: 0;
  line-height: 68px;
  visibility: hidden;
}

h2::before {
  position: absolute;
  top: 0;
  left: 0;
  content: '';
  width: 100%;
  height: 68px;
  background-color: rgba(0, 0, 0, 0.3);
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;  
}

div.student h1 {
  position: absolute;
  top: 250px;
  font-size: 22px;
  margin: 0;
  transition: 0.3s;
  font-weight: normal;
}

div.student p {
  margin-top: 300px;
  width: 80%;
  font-weight: normal;
  text-align: center;
  padding-bottom: 5px;
  border-bottom: 1px solid #8ea2b8;
}

.student:hover .photo::before {
  display: none;
}

.student:hover .photo {
  width: 90px;
  height: 90px;
  top: 90px;
  border-radius: 50%;
  box-shadow: 0 0 15px #111;
}

.student:hover img {
  object-position: 50% 0%;
}

.student:hover h1 {
  position: absolute;
  top: 190px;
  width: 40px;
}

div.student:hover h2 {
  visibility: visible;
}
(String), 五. React>1. React 基础>3) 人物卡片案例(String), null, null, 五. React>1. React 基础>3) 人物卡片案例(String), 9a273e704fd5eddc5d27159d77a827f7ce7e3cc884813e6b5f99e0812b1aba76(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 4(Integer), -shadow: 0 0 15px #111;
}

.student:hover img {
  object-position: 50% 0%;
}

.student:hover h1 {
  position: absolute;
  top: 190px;
  width: 40px;
}

div.student:hover h2 {
  visibility: visible;
}
类型 /src/model/Student.tsexport interface Student {
  id: number,
  name: string,
  sex: string,
  age: number,
  photo: string
}
组件 /src/pages/P1.tsximport { Student } from '../model/Student'
import '../css/P1.css'
export default function P1(props: { student: Student }) {
  return (
    <div className='student'>
      <div className='photo'>
        <img src={props.student.photo}/>
      </div>
      <h1>{props.student.name}</h1>
      <h2>{props.student.id}</h2>      
      <p>性别 {props.student.sex} 年龄 {props.student.age}</p>
    </div>
  )
}
使用组件(String), 五. React>1. React 基础>3) 人物卡片案例(String), null, null, 五. React>1. React 基础>3) 人物卡片案例(String), d7367f568dc5bd892622b615903da627a9d5850a7d5a778233a97c385223f9e5(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 5(Integer), mg src={props.student.photo}/>
      </div>
      <h1>{props.student.name}</h1>
      <h2>{props.student.id}</h2>      
      <p>性别 {props.student.sex} 年龄 {props.student.age}</p>
    </div>
  )
}
使用组件const stu1 = { id: 1, name: '风清扬', sex: '男', age: 99, photo: '/imgs/1.png' }
const stu2 = { id: 2, name: '玮哥', sex: '男', age: 20, photo: '/imgs/2.png' }
const stu3 = { id: 3, name: '长宏', sex: '男', age: 30, photo: '/imgs/3.png'}

<P1 student={stu1}></P1>
<P1 student={stu2}></P1>
<P1 student={stu3}></P1>
路径src 下的资源，要用相对路径引入public 下的资源，记得 / 代表路径的起点src 下的资源，要用相对路径引入public 下的资源，记得 / 代表路径的起点标签命名组件标签必须用大驼峰命名普通 html 标签必须用小写命名组件标签必须用大驼峰命名普通 html 标签必须用小写命名事件处理(String), 五. React>1. React 基础>3) 人物卡片案例>事件处理(String), null, null, 五. React>1. React 基础>3) 人物卡片案例>事件处理(String), 70813367648564c247c82772e8d9c1c6cf0f1a0215b9ddbef4b529540683077b(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 6(Integer), <P1 student={stu2}></P1>
<P1 student={stu3}></P1>
路径src 下的资源，要用相对路径引入public 下的资源，记得 / 代表路径的起点src 下的资源，要用相对路径引入public 下的资源，记得 / 代表路径的起点标签命名组件标签必须用大驼峰命名普通 html 标签必须用小写命名组件标签必须用大驼峰命名普通 html 标签必须用小写命名事件处理import { Student } from '../model/Student'
import '../css/P1.css'
export default function P1(props: { student: Student }) {
    
  function handleClick(e : React.MouseEvent){
    console.log(student)
    console.log(e)
  }
  
  return (
    <div className='student'>
      <div className='photo' onClick={handleClick}>
        <img src={props.student.photo}/>
      </div>
      <h1>{props.student.name}</h1>
      <h2>{props.student.id}</h2>
      <p>性别 {props.student.sex} 年龄 {props.student.age}</p>
    </div>
  )
}
事件以小驼峰命名事件处理函数可以有一个事件对象参数，可以获取事件相关信息事件以小驼峰命名事件处理函数可以有一个事件对象参数，可以获取事件相关信息列表 & Key(String), 五. React>1. React 基础>3) 人物卡片案例>列表 & Key(String), null, null, 五. React>1. React 基础>3) 人物卡片案例>列表 & Key(String), d343804f4a5f39612252df9f8758e84eb8e71476f0da10f8604aa9fb32dbd8fb(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 7(Integer), ame}</h1>
      <h2>{props.student.id}</h2>
      <p>性别 {props.student.sex} 年龄 {props.student.age}</p>
    </div>
  )
}
事件以小驼峰命名事件处理函数可以有一个事件对象参数，可以获取事件相关信息事件以小驼峰命名事件处理函数可以有一个事件对象参数，可以获取事件相关信息列表 & Keyimport { Student } from '../model/Student'
import P1 from './P1'

export default function P2(props: { students: Student[] }) {
  return (
    <>
      {props.students.map((s) => ( <P1 student={s} key={s.id}></P1> ))}
    </>
  )
}
key 在循环时是必须的，否则会有 warningkey 在循环时是必须的，否则会有 warning也可以这么做import { Student } from '../model/Student'
import P1 from './P1'

export default function P2(props: { students: Student[] }) {
  const list = props.students.map((s) => <P1 student={s} key={s.id}></P1>)
  return <>{list}</>
}
使用组件const stu1 = { id: 1, name: '风清扬', sex: '男', age: 99, photo: '/1.png' }
const stu2 = { id: 2, name: '玮哥', sex: '男', age: 45, photo: '/2.png' }
const stu3 = { id: 3, name: '长宏', sex: '男', age: 45, photo: '/3.png'}

<P2 students={[stu1,stu2,stu3]}></P2>
条件渲染P1 修改为(String), 五. React>1. React 基础>3) 人物卡片案例>条件渲染(String), null, null, 五. React>1. React 基础>3) 人物卡片案例>条件渲染(String), 1a461d3cabf9d9fc73cc9b5229a4b6fd17eb0ce7c8727c1a6177acaf4ad685a6(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 8(Integer), /1.png' }
const stu2 = { id: 2, name: '玮哥', sex: '男', age: 45, photo: '/2.png' }
const stu3 = { id: 3, name: '长宏', sex: '男', age: 45, photo: '/3.png'}

<P2 students={[stu1,stu2,stu3]}></P2>
条件渲染P1 修改为import { Student } from '../model/Student'
import '../css/P1.css'
export default function P1(props: { student: Student; hideAge?: boolean }) {
  function handleClick() {
    console.log(props.student)
  }

  const ageFragment = !props.hideAge && <span>年龄 {props.student.age}</span>

  return (
    <div className='student'>
      <div className='photo' onClick={handleClick}>
        <img src={props.student.photo} />
      </div>
      <h1>{props.student.name}</h1>
      <h2>{props.student.id}</h2>
      <p>
        性别 {props.student.sex} {ageFragment}
      </p>
    </div>
  )
}
子元素如果是布尔值，nullish，不会渲染子元素如果是布尔值，nullish，不会渲染P2 修改为(String), 五. React>1. React 基础>3) 人物卡片案例>条件渲染(String), null, null, 五. React>1. React 基础>3) 人物卡片案例>条件渲染(String), 0723416575b44aef0ded0b42ea89592206f51efe5ca166ad146cf5054715fa49(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 9(Integer),    <h1>{props.student.name}</h1>
      <h2>{props.student.id}</h2>
      <p>
        性别 {props.student.sex} {ageFragment}
      </p>
    </div>
  )
}
子元素如果是布尔值，nullish，不会渲染子元素如果是布尔值，nullish，不会渲染P2 修改为import { Student } from '../model/Student'
import P1 from './P1'

export default function P2(props: { students: Student[]; hideAge?: boolean }) {
  const list = props.students.map((s) => (
    <P1 student={s} hideAge={props.hideAge} key={s.id}></P1>
  ))
  return <>{list}</>
}
使用组件const stu1 = { id: 1, name: '风清扬', sex: '男', age: 99, photo: '/1.png' }
const stu2 = { id: 2, name: '玮哥', sex: '男', age: 45, photo: '/2.png' }
const stu3 = { id: 3, name: '长宏', sex: '男', age: 45, photo: '/3.png'}

<P2 students={[stu1,stu2,stu3]} hideAge={true}></P2>
参数解构以 P1 组件为例(String), 五. React>1. React 基础>3) 人物卡片案例>参数解构(String), null, null, 五. React>1. React 基础>3) 人物卡片案例>参数解构(String), 8c3726af9399b5f72762bc6bec3dea10fae6ebd4398fc56f4b605b009be95ed8(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 10(Integer), u2 = { id: 2, name: '玮哥', sex: '男', age: 45, photo: '/2.png' }
const stu3 = { id: 3, name: '长宏', sex: '男', age: 45, photo: '/3.png'}

<P2 students={[stu1,stu2,stu3]} hideAge={true}></P2>
参数解构以 P1 组件为例import { Student } from '../model/Student'
import '../css/P1.css'
export default function P1
({ student, hideAge = false }: { student: Student, hideAge?: boolean }) {
  
  function handleClick() {
    console.log(student)
  }

  const ageFragment = !hideAge && <span>年龄 {student.age}</span>

  return (
    <div className='student'>
      <div className='photo' onClick={handleClick}>
        <img src={student.photo} />
      </div>
      <h1>{student.name}</h1>
      <h2>{student.id}</h2>
      <p>
        性别 {student.sex} {ageFragment}
      </p>
    </div>
  )
}
可以利用解构赋值语句，让 props 的使用更为简单对象解构赋值还有一个额外的好处，给属性赋默认值可以利用解构赋值语句，让 props 的使用更为简单对象解构赋值还有一个额外的好处，给属性赋默认值使用组件const stu1 = { id: 1, name: '风清扬', sex: '男', age: 99, photo: '/1.png' }

<P1 student={stu1}></P1>
4) 处理变化的数据(String), 五. React>1. React 基础>4) 处理变化的数据(String), null, null, 五. React>1. React 基础>4) 处理变化的数据(String), 45b9195134a81536311d76290bbd16d3c8d1727b37e9c63943e30b322e45e372(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 11(Integer), ，让 props 的使用更为简单对象解构赋值还有一个额外的好处，给属性赋默认值可以利用解构赋值语句，让 props 的使用更为简单对象解构赋值还有一个额外的好处，给属性赋默认值使用组件const stu1 = { id: 1, name: '风清扬', sex: '男', age: 99, photo: '/1.png' }

<P1 student={stu1}></P1>
4) 处理变化的数据入门案例侧重的是数据展示，并未涉及到数据的变动，接下来我们开始学习 react 如何处理数据变化axios首先来学习 axios，作用是发送请求、接收响应，从服务器获取真实数据安装npm install axios
定义组件import axios from 'axios'
export default function P4({ id }: { id: number }) {
  async function updateStudent() {
    const resp = await axios.get(`http://localhost:8080/api/students/${id}`)
    console.log(resp.data.data)
  }

  updateStudent()

  return <></>
}
其中 /api/students/${id} 是提前准备好的后端服务 api，会延迟 2s 返回结果其中 /api/students/${id} 是提前准备好的后端服务 api，会延迟 2s 返回结果使用组件<P4 id={1}></P4>
在控制台上打印{
    "id": 1,
    "name": "宋远桥",
    "sex": "男",
    "age": 40
}
当属性变化时，会重新触发 P4 组件执行，例如将 id 从 1 修改为 2image-20221005160308705执行流程(String), 五. React>1. React 基础>4) 处理变化的数据>axios(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>axios(String), f521cbc953750886395ff4df119d5dd15304eb81998e396beb6c49ca8ebb8cec(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 12(Integer), students/${id} 是提前准备好的后端服务 api，会延迟 2s 返回结果使用组件<P4 id={1}></P4>
在控制台上打印{
    "id": 1,
    "name": "宋远桥",
    "sex": "男",
    "age": 40
}
当属性变化时，会重新触发 P4 组件执行，例如将 id 从 1 修改为 2image-20221005160308705执行流程首次调用函数组件，返回的 jsx 代码会被渲染成【虚拟 dom 节点】（也称 Fiber 节点）根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来当函数组件的 props 或 state 发生变化时，才会重新调用函数组件，返回 jsxjsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点由于严格模式会触发两次渲染，为了避免干扰，请先注释掉 index.tsx 中的首次调用函数组件，返回的 jsx 代码会被渲染成【虚拟 dom 节点】（也称 Fiber 节点）根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来当函数组件的 props 或 state 发生变化时，才会重新调用函数组件，返回 jsxjsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点jsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点由于严格模式会触发两次渲染，为了避免干扰，请先注释掉 index.tsx 中的状态先来看一个例子，能否把服务器返回的数据显示在页面上(String), 五. React>1. React 基础>4) 处理变化的数据>状态(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>状态(String), 0f95e557dadd1e5943b207ab1fca92c916cb47e4db490df10432356aad87ed25(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 13(Integer), 用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点jsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点由于严格模式会触发两次渲染，为了避免干扰，请先注释掉 index.tsx 中的状态先来看一个例子，能否把服务器返回的数据显示在页面上import axios from 'axios'
let count = 0
export default function P5(props: { id: number }) {
  
  function getTime() {
    const d = new Date()
    return d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()
  }
  
  async function updateStudent() {
    const resp = await axios.get(
      `http://localhost:8080/api/students/${props.id}`
    )
    Object.assign(student, resp.data.data)
    console.log(current, student, getTime())
  }

  const current = count++
  let student = { name: 'xx' }
  console.log(current, student, getTime())
  updateStudent()
  
  return <h3>姓名是：{student.name}</h3>
}
count 是一个全局变量，记录 P5 函数第几次被调用count 是一个全局变量，记录 P5 函数第几次被调用执行效果，控制台上0 {name: 'xx'} '16:22:16'
0 {id: 1, name: '宋远桥', sex: '男', age: 40} '16:22:18'
此时页面仍显示那么修改一下 props 的 id 呢？进入开发工具把 id 从 1 修改为 2，控制台上(String), 五. React>1. React 基础>4) 处理变化的数据>状态(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>状态(String), 4dd3b1a8d7dfe5b03b1aa83b5b14738d25cdd4479b46d93af61c92a04dc3444b(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 14(Integer), >
}
count 是一个全局变量，记录 P5 函数第几次被调用count 是一个全局变量，记录 P5 函数第几次被调用执行效果，控制台上0 {name: 'xx'} '16:22:16'
0 {id: 1, name: '宋远桥', sex: '男', age: 40} '16:22:18'
此时页面仍显示那么修改一下 props 的 id 呢？进入开发工具把 id 从 1 修改为 2，控制台上1 {name: 'xx'} '16:24:0'
1 {id: 2, name: '俞莲舟', sex: '男', age: 38} '16:24:2'
此时页面仍显示为什么页面没有显示两秒后更新的值？第一次，页面显示的是 P5 函数的返回结果，这时 student.name 还未被更新成宋远桥，页面显示 xx虽然 2s 后数据更新了，但此时并未触发函数执行，页面不变第二次，虽然 props 修改触发了函数重新执行，但既然函数重新执行，函数内的 student 又被赋值为 ，页面还是显示 xx2s 后数据更新，跟第一次一样，并未重新触发函数执行，页面不变第一次，页面显示的是 P5 函数的返回结果，这时 student.name 还未被更新成宋远桥，页面显示 xx虽然 2s 后数据更新了，但此时并未触发函数执行，页面不变虽然 2s 后数据更新了，但此时并未触发函数执行，页面不变第二次，虽然 props 修改触发了函数重新执行，但既然函数重新执行，函数内的 student 又被赋值为 ，页面还是显示 xx2s 后数据更新，跟第一次一样，并未重新触发函数执行，页面不变2s 后数据更新，跟第一次一样，并未重新触发函数执行，页面不变结论：函数是无状态的，执行完毕后，它内部用的数据都不会保存下来要想让函数有状态，就需要使用 useState 把数据保存在函数之外的地方，这些数据，称之为状态函数是无状态的，执行完毕后，它内部用的数据都不会保存下来要想让函数有状态，就需要使用 useState 把数据保存在函数之外的地方，这些数据，称之为状态useState(String), 五. React>1. React 基础>4) 处理变化的数据>useState(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useState(String), 64488971eee2c03acc00850447cbcb957052ee98bb186db06c1776831765e18a(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 15(Integer), 行，页面不变2s 后数据更新，跟第一次一样，并未重新触发函数执行，页面不变结论：函数是无状态的，执行完毕后，它内部用的数据都不会保存下来要想让函数有状态，就需要使用 useState 把数据保存在函数之外的地方，这些数据，称之为状态函数是无状态的，执行完毕后，它内部用的数据都不会保存下来要想让函数有状态，就需要使用 useState 把数据保存在函数之外的地方，这些数据，称之为状态useStateimport axios from 'axios'
import { useReducer, useState } from 'react'
import { Student } from '../model/Student'
let count = 0
export default function P5(props: { id: number }) {

  // ...

  async function updateStudent() {
    const resp = await axios.get(
      `http://localhost:8080/api/students/${props.id}`
    )
    Object.assign(student, resp.data.data)
    console.log(current, student, getTime())
  }

  const current = count++
  let [student] = useState<Student>({ name: 'xx' })
  console.log(current, student, getTime())
  updateStudent()

  return <h3>姓名是：{student.name}</h3>
}
接下来使用 setXXX 方法更新 State(String), 五. React>1. React 基础>4) 处理变化的数据>useState(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useState(String), f5ee463cba14e4002e78d87a401a4bf97b82f1ef31e5f178bd03812475545921(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 16(Integer), const current = count++
  let [student] = useState<Student>({ name: 'xx' })
  console.log(current, student, getTime())
  updateStudent()

  return <h3>姓名是：{student.name}</h3>
}
接下来使用 setXXX 方法更新 Stateimport axios from 'axios'
import { useState } from 'react'
import { Student } from '../model/Student'
export default 

function P5(props: { id: number }) {
  async function updateStudent() {
    const resp = await axios.get(`/api/students/${props.id}`)
    setStudent(resp.data.data)
  }

  let [student, setStudent] = useState<Student>({ name: 'xx' })
  updateStudent()

  return <h3>姓名是：{student.name}</h3>
}
工作流程如下首次使用 useState，用它的参数初始化 Stateimage-202210051739583512s 后数据更新，setStudent 函数会更新 State 数据，并会触发下一次渲染（P5 的调用）image-20221005174347981再次调用 useState，这时返回更新后的数据image-20221005174739593这时再返回 jsx，内容就是  了P.S.使用了 useState 之后，会执行两次 xhr 请求，后一次请求是 react 开发工具发送的，不用理会问题还未结束，第二次 P5 调用时，updateStudent 还会执行，结果会导致 2s 后响应返回继续调用 setStudent，这会导致每隔 2s 调用一次 P5 函数（渲染一次）image-20221005175440228(String), 五. React>1. React 基础>4) 处理变化的数据>useState(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useState(String), e37f093b2561ebbee1f8f73b3a23355906072c8ac9edbfdc5cd566ed5eabae75(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 17(Integer), 174739593这时再返回 jsx，内容就是  了P.S.使用了 useState 之后，会执行两次 xhr 请求，后一次请求是 react 开发工具发送的，不用理会问题还未结束，第二次 P5 调用时，updateStudent 还会执行，结果会导致 2s 后响应返回继续调用 setStudent，这会导致每隔 2s 调用一次 P5 函数（渲染一次）image-20221005175440228如何让 updateStudent 只执行一次呢？一种土办法是再设置一个布尔 Stateimage-20221005181042078接下来数据更新image-20221005181428984第二次进入 P5 函数时，由于 fetch 条件不成立，因此不会再执行两个 setXXX 方法image-20221005182505908函数式组件的工作流程首次调用函数组件，返回的 jsx 代码会被渲染成【虚拟 dom 节点】（也称 Fiber 节点）此时使用 useState 会将组件工作过程中需要数据绑定到【虚拟 dom 节点】上根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来当函数组件的 props 或 state 发生变化时，才会重新调用函数组件，返回 jsxprops 变化由父组件决定，state 变化由组件自身决定jsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点首次调用函数组件，返回的 jsx 代码会被渲染成【虚拟 dom 节点】（也称 Fiber 节点）此时使用 useState 会将组件工作过程中需要数据绑定到【虚拟 dom 节点】上根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来此时使用 useState 会将组件工作过程中需要数据绑定到【虚拟 dom 节点】上根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来当函数组件的 props 或 state 发生变化时，才会重新调用函数组件，返回 jsxprops 变化由父组件决定，state 变化由组件自身决定jsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点(String), 五. React>1. React 基础>4) 处理变化的数据>useState(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useState(String), bf4560ebb9e242f7abc90a9f1be5b5b80e647e3ba0e00585ede6bebc83447818(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 18(Integer),  会将组件工作过程中需要数据绑定到【虚拟 dom 节点】上根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来当函数组件的 props 或 state 发生变化时，才会重新调用函数组件，返回 jsxprops 变化由父组件决定，state 变化由组件自身决定jsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点props 变化由父组件决定，state 变化由组件自身决定jsx 与上次的【虚拟 dom 节点】对比如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点如果没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点useEffectEffect 称之为副作用（没有贬义），函数组件的主要目的，是为了渲染生成 html 元素，除了这个主要功能以外，管理状态，fetch 数据 ... 等等之外的功能，都可以称之为副作用。useXXX 打头的一系列方法，都是为副作用而生的，在 react 中把它们称为 HooksuseEffect 三种用法(String), 五. React>1. React 基础>4) 处理变化的数据>useEffect(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useEffect(String), 58fef68532b3de1718e36c090fc07112ed33e2d4aaad0cee9e2e1258e28365a9(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 19(Integer), 没变化，复用上次的节点有变化，创建新的【虚拟 dom 节点】替换掉上次的节点useEffectEffect 称之为副作用（没有贬义），函数组件的主要目的，是为了渲染生成 html 元素，除了这个主要功能以外，管理状态，fetch 数据 ... 等等之外的功能，都可以称之为副作用。useXXX 打头的一系列方法，都是为副作用而生的，在 react 中把它们称为 HooksuseEffect 三种用法import axios from "axios"
import { useEffect, useState } from "react"

/*
useEffect
  参数1：箭头函数, 在真正渲染 html 之前会执行它
  参数2：
    情况1：没有, 代表每次执行组件函数时, 都会执行副作用函数
    情况2：[], 代表副作用函数只会执行一次
    情况3：[依赖项], 依赖项变化时，副作用函数会执行
*/
export default function P6({ id, age }: { id: number, age: number }) {

  console.log('1.主要功能')
    
  // useEffect(() => console.log('3.副作用功能')) 
  // useEffect(() => console.log('3.副作用功能'), []) 
  useEffect(() => console.log('3.副作用功能'), [id]) 

  console.log('2.主要功能')

  return <h3>{id}</h3>
}
用它改写 P5 案例(String), 五. React>1. React 基础>4) 处理变化的数据>useEffect(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useEffect(String), 73c6c2bb8be2a950ed8849ad7129c0238afc95eaef150f9c5e7edc11ce89ad71(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 20(Integer), seEffect(() => console.log('3.副作用功能')) 
  // useEffect(() => console.log('3.副作用功能'), []) 
  useEffect(() => console.log('3.副作用功能'), [id]) 

  console.log('2.主要功能')

  return <h3>{id}</h3>
}
用它改写 P5 案例import axios from "axios"
import { useEffect, useState } from "react"

export default function P6({ id, age }: { id: number, age: number }) {

  const [student, setStudent] = useState({name:'xx'})

  useEffect(()=>{
    async function updateStudent() {
      const resp = await axios.get(`http://localhost:8080/api/students/${id}`)    
      setStudent(resp.data.data)
    }
    updateStudent()
  }, [id])

  return <h3>{student.name}</h3>
}
useContext(String), 五. React>1. React 基础>4) 处理变化的数据>useContext(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useContext(String), af384d0ecdfe441c0bca2cbf55d2d4adb9c031932f0be1b1a544b31c759a2881(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 21(Integer), 
      const resp = await axios.get(`http://localhost:8080/api/students/${id}`)    
      setStudent(resp.data.data)
    }
    updateStudent()
  }, [id])

  return <h3>{student.name}</h3>
}
useContextimport axios from 'axios'
import { createContext, useContext, useEffect, useState } from 'react'
import { R, Student } from '../model/Student'

/*
  createContext         创建上下文对象
  useContext            读取上下文对象的值
  <上下文对象.Provider>  修改上下文对象的值
*/
const HiddenContext = createContext(false)

// 给以下组件提供数据，控制年龄隐藏、显示
export default function P7() {
  const [students, setStudents] = useState<Student[]>([])
  const [hidden, setHidden] = useState(false)
  useEffect(()=>{
    async function updateStudents() {
      const resp = await axios.get<R<Student[]>>("http://localhost:8080/api/students")
      setStudents(resp.data.data)
    }
    updateStudents()
  }, [])

  function hideOrShow() {
    // 参数：上一次状态值，旧值
    // 返回值：要更新的新值
    setHidden((old)=>{
      return !old
    })
  }
  return <HiddenContext.Provider value={hidden}>
    <input type="button" value={hidden?'显示':'隐藏'} onClick={hideOrShow}/>
    <P71 students={students}></P71>
  </HiddenContext.Provider>  
}

// 负责处理学生集合
function P71({ students }: { students: Student[] }) {
  const list = students.map(s=><P72 student={s} key={s.id}></P72>)
  return <>{list}</>
}

// 负责显示单个学生
function P72({ student }: { student: Student }) {
  const hidden = useContext(HiddenContext)
  const jsx = !hidden && <span>{student.age}</span>
  return <div>{student.name} {jsx}</div>
}
(String), 五. React>1. React 基础>4) 处理变化的数据>useContext(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>useContext(String), 8a6e257c7a116ae7174c8d2a09e457c192aec63f6bed3efbb507857da1393b0b(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 22(Integer), // 负责显示单个学生
function P72({ student }: { student: Student }) {
  const hidden = useContext(HiddenContext)
  const jsx = !hidden && <span>{student.age}</span>
  return <div>{student.name} {jsx}</div>
}
如果组件分散在多个文件中，HiddenContext 应该 export 导出，用到它的组件 import 导入React 中因修改触发的组件重新渲染，都应当是自上而下的setHidden 方法如果更新的是对象，那么要返回一个新对象，而不是在旧对象上做修改如果组件分散在多个文件中，HiddenContext 应该 export 导出，用到它的组件 import 导入React 中因修改触发的组件重新渲染，都应当是自上而下的setHidden 方法如果更新的是对象，那么要返回一个新对象，而不是在旧对象上做修改表单(String), 五. React>1. React 基础>4) 处理变化的数据>表单(String), null, null, 五. React>1. React 基础>4) 处理变化的数据>表单(String), 1d2a986be7e6f9ff784e7571f623e5284479aa324fa27504003fb4f566781c9a(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 23(Integer), act 中因修改触发的组件重新渲染，都应当是自上而下的setHidden 方法如果更新的是对象，那么要返回一个新对象，而不是在旧对象上做修改如果组件分散在多个文件中，HiddenContext 应该 export 导出，用到它的组件 import 导入React 中因修改触发的组件重新渲染，都应当是自上而下的setHidden 方法如果更新的是对象，那么要返回一个新对象，而不是在旧对象上做修改表单import axios from 'axios'
import React, { useState } from 'react'
import '../css/P8.css'

export default function P8() {

  const [student, setStudent] = useState({name:'', sex:'男', age:18})
  const [message, setMessage] = useState('')

  const options = ['男', '女']
  const jsx = options.map(e => <option key={e}>{e}</option>)

  // e 事件对象, e.target 事件源
  function onChange(e : React.ChangeEvent<HTMLInputElement|HTMLSelectElement>) {
    setStudent((old)=>{
      // 返回的新值，不能与旧值是同一个对象
      return {...old, [e.target.name]:e.target.value}
    })
  }

  async function onClick() {
    const resp = await axios.post('http://localhost:8080/api/students', student)
    setMessage(resp.data.data)
  }
  
  const messageJsx = message && <div className='success'>{message}</div>

  return (
    <form>
      <div>
        <label>姓名</label>
        <input type="text" value={student.name} onChange={onChange} name='name'/>
      </div>
      <div>
        <label>性别</label>
        <select value={student.sex} onChange={onChange} name='sex'>
          {jsx}
        </select>
      </div>
      <div>
        <label>年龄</label>
        <input type="text" value={student.age} onChange={onChange} name='age' />
      </div>
      <div>
        <input type='button' value='新增' onClick={onClick}/>
      </div>
      {messageJsx}
    </form>
  )
}
(String), 五. React>2. React 进阶(String), null, null, 五. React>2. React 进阶(String), 2765d03f4f5776b34d9c43f967d20cf1474fa896f6fee6ae8a441dfd385aee16(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 24(Integer), ype="text" value={student.age} onChange={onChange} name='age' />
      </div>
      <div>
        <input type='button' value='新增' onClick={onClick}/>
      </div>
      {messageJsx}
    </form>
  )
}
2. React 进阶1) Ant Designreact 组件库官网地址：https://ant.design/镜像地址1：https://ant-design.gitee.io/镜像地址2：https://ant-design.antgroup.com/官网地址：https://ant.design/镜像地址1：https://ant-design.gitee.io/镜像地址2：https://ant-design.antgroup.com/入门安装npm install antd
目前版本是 4.x目前版本是 4.x引入样式，在 css 文件中加入@import '~antd/dist/antd.css';
引入 antd 组件import { Button } from "antd";

export default function A1() {
  return <Button type='primary'>按钮</Button>
}
国际化试试其它组件import { Button, Modal } from "antd";

export default function A1() {
  return <Modal open={true} title='对话框'>内容</Modal>
}
发现确定和取消按钮是英文的，这是因为 antd 支持多种语言，而默认语言是英文要想改为中文，建议修改最外层的组件 index.tsx// ...
import { ConfigProvider } from 'antd'
import zhCN from 'antd/es/locale/zh_CN'

root.render(
  <ConfigProvider locale={zhCN}>
    <A1></A1>
  </ConfigProvider>
)
表格(String), 五. React>2. React 进阶>1) Ant Design>表格(String), null, null, 五. React>2. React 进阶>1) Ant Design>表格(String), 6b74f433080be612a409304cb880bfd83663083367855e34e20e2f49293f8cec(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 25(Integer), 是英文要想改为中文，建议修改最外层的组件 index.tsx// ...
import { ConfigProvider } from 'antd'
import zhCN from 'antd/es/locale/zh_CN'

root.render(
  <ConfigProvider locale={zhCN}>
    <A1></A1>
  </ConfigProvider>
)
表格import { Table } from 'antd'
import { ColumnsType } from 'antd/lib/table'
import axios from 'axios'
import { useEffect, useState } from 'react'
import { R, Student } from '../model/Student'

export default function A3() {
  const [students, setStudents] = useState<Student[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    async function getStudents() {
      const resp = await axios.get<R<Student[]>>(
        'http://localhost:8080/api/students'
      )
      setStudents(resp.data.data)
      setLoading(false)
    }

    getStudents()
  }, [])

  // title: 列标题  dataIndex: 要关联的属性名
  const columns: ColumnsType<Student> = [
    {
      title: '编号',
      dataIndex: 'id',
    },
    {
      title: '姓名',
      dataIndex: 'name',
    },
    {
      title: '性别',
      dataIndex: 'sex',
    },
    {
      title: '年龄',
      dataIndex: 'age',
    },
  ]

  // columns: 列定义
  // dataSource: 数据源，一般是数组包对象
  // rowKey: 作为唯一标识的属性名
  // loading: 显示加载图片
  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}></Table>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>客户端分页(String), null, null, 五. React>2. React 进阶>1) Ant Design>客户端分页(String), f9b5525879f7fa620fda4c9f58efe904812158127ee1064492b36f76ce441dc4(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 26(Integer), ataSource: 数据源，一般是数组包对象
  // rowKey: 作为唯一标识的属性名
  // loading: 显示加载图片
  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}></Table>
  )
}
客户端分页(String), 五. React>2. React 进阶>1) Ant Design>客户端分页(String), null, null, 五. React>2. React 进阶>1) Ant Design>客户端分页(String), 2504104f6b26c5e09986112b4c584c20a2c8624c5617cc029dfff1fc5f0a0375(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 27(Integer), urce: 数据源，一般是数组包对象
  // rowKey: 作为唯一标识的属性名
  // loading: 显示加载图片
  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}></Table>
  )
}
客户端分页import { Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import { useEffect, useState } from 'react'
import { R, Student } from '../model/Student'

export default function A3() {
  const [students, setStudents] = useState<Student[]>([])
  const [loading, setLoading] = useState(true)
  const [pagination, setPagination] = useState<TablePaginationConfig>(
    {current:1, pageSize:5}
  )

  // 参数: 新的分页数据
  function onTableChange(newPagination: TablePaginationConfig) {
    setPagination(newPagination)
  }

  useEffect(() => {
    async function getStudents() {
      const resp = await axios.get<R<Student[]>>(
        'http://localhost:8080/api/students'
      )
      setStudents(resp.data.data)
      setLoading(false)
    }

    getStudents()
  }, [])

  // ... 省略

  // pagination: 分页数据
  // onChange: 当页号，页大小改变时触发
  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}
      pagination={pagination}
      onChange={onTableChange}></Table>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>客户端分页(String), null, null, 五. React>2. React 进阶>1) Ant Design>客户端分页(String), 5dcff3e40a83843355654a0aef1e41cbc086c64fd63ae936f9c7453bf44028fe(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 28(Integer), 大小改变时触发
  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}
      pagination={pagination}
      onChange={onTableChange}></Table>
  )
}
本例还是查询所有数据，分页是客户端 Table 组件自己实现的本例还是查询所有数据，分页是客户端 Table 组件自己实现的服务端分页(String), 五. React>2. React 进阶>1) Ant Design>服务端分页(String), null, null, 五. React>2. React 进阶>1) Ant Design>服务端分页(String), b22aa2766496de5530cf30bd68d83c59aaa11bb4bced1d6de38ea1d8f875f9a3(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 29(Integer), rce={students}
      rowKey='id'
      loading={loading}
      pagination={pagination}
      onChange={onTableChange}></Table>
  )
}
本例还是查询所有数据，分页是客户端 Table 组件自己实现的本例还是查询所有数据，分页是客户端 Table 组件自己实现的服务端分页import { Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import { useEffect, useState } from 'react'
import { PageResp, R, Student } from '../model/Student'

export default function A4() {
  const [students, setStudents] = useState<Student[]>([])
  const [loading, setLoading] = useState(true)
  const [pagination, setPagination] = useState<TablePaginationConfig>({
    current: 1,
    pageSize: 5,
  })

  function onTableChange(newPagination: TablePaginationConfig) {
    setPagination(newPagination)
  }

  useEffect(() => {
    async function getStudents() {
      // params 用来给请求添加 url 后的 ? 参数
      const resp = await axios.get<R<PageResp<Student>>>(
        'http://localhost:8080/api/students/q',
        {
          params: {
            page: pagination.current,
            size: pagination.pageSize,
          },
        }
      )
      // 返回结果中：list 代表当前页集合, total 代表总记录数
      setStudents(resp.data.data.list)
      setPagination((old) => {
        return { ...old, total: resp.data.data.total }
      })
      setLoading(false)
    }

    getStudents()
  }, [pagination.current, pagination.pageSize])
  // useEffect 需要在依赖项( current 和 pageSize ) 改变时重新执行

  const columns: ColumnsType<Student> = [
    {
      title: '编号',
      dataIndex: 'id',
    },
    {
      title: '姓名',
      dataIndex: 'name',
    },
    {
      title: '性别',
      dataIndex: 'sex',
    },
    {
      title: '年龄',
      dataIndex: 'age',
    },
  ]

  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}
      pagination={pagination}
      onChange={onTableChange}></Table>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>服务端分页(String), null, null, 五. React>2. React 进阶>1) Ant Design>服务端分页(String), a684e250ff415df08a0adc3a7a8d06d68f437cf49b6b1c5ff40982e375bdb577(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 30(Integer), },
  ]

  return (
    <Table
      columns={columns}
      dataSource={students}
      rowKey='id'
      loading={loading}
      pagination={pagination}
      onChange={onTableChange}></Table>
  )
}
本例需要服务端配合来实现分页，参见代码中新加的注释本例需要服务端配合来实现分页，参见代码中新加的注释其中 PageResp 类型定义为export interface PageResp<T> {
  list: T[],
  total: number
}
条件查询(String), 五. React>2. React 进阶>1) Ant Design>条件查询(String), null, null, 五. React>2. React 进阶>1) Ant Design>条件查询(String), 1910470e986879cd80cf3b331dd25faab9945cb237ea1820680819abc4b98482(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 31(Integer), ination={pagination}
      onChange={onTableChange}></Table>
  )
}
本例需要服务端配合来实现分页，参见代码中新加的注释本例需要服务端配合来实现分页，参见代码中新加的注释其中 PageResp 类型定义为export interface PageResp<T> {
  list: T[],
  total: number
}
条件查询import { Input, Select, Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { PageResp, R, Student, StudentQueryForm } from '../model/Student'

const { Option } = Select

export default function A5() {
  const [students, setStudents] = useState<Student[]>([])
  const [loading, setLoading] = useState(true)
  const [pagination, setPagination] = useState<TablePaginationConfig>({
    current: 1,
    pageSize: 5,
  })
  // 代表查询条件的状态数据
  const [form, setForm] = useState<StudentQueryForm>({})

  function onTableChange(newPagination: TablePaginationConfig) {
    setPagination(newPagination)
  }

  useEffect(() => {
    async function getStudents() {
      const resp = await axios.get<R<PageResp<Student>>>(
        'http://localhost:8080/api/students/q',
        {
          params: {
            page: pagination.current,
            size: pagination.pageSize,
            ...form // 补充查询参数
          },
        }
      )
      setStudents(resp.data.data.list)
      setPagination((old) => {
        return { ...old, total: resp.data.data.total }
      })
      setLoading(false)
    }

    getStudents()
  }, [pagination.current, pagination.pageSize, form.name, form.sex, form.age])
  // 依赖项除了分页条件外，新加了查询条件依赖
    
  const columns: ColumnsType<Student> = [
    {
      title: '编号',
      dataIndex: 'id',
    },
    {
      title: '姓名',
      dataIndex: 'name',
    },
    {
      title: '性别',
      dataIndex: 'sex',
    },
    {
      title: '年龄',
      dataIndex: 'age',
    },
  ]

  // name 条件改变时处理函数
  function onNameChange(e: React.ChangeEvent<HTMLInputElement>) {
    setForm((old)=>{
      return {...old, name: e.target.value}
    })
  }

  // sex 条件改变时处理函数
  function onSexChange(value: string) {
    setForm((old)=>{
      return {...old, sex: value}
    })
  }

  // age 条件改变时处理函数
  function onAgeChange(value: string) {
    setForm((old)=>{
      return {...old, age: value}
    })
  }

  return (
    <div>
      <div>
        <Input
          style={{ width: 120 }}
          placeholder='请输入姓名'
          value={form.name}
          onChange={onNameChange}></Input>
        <Select
          style={{ width: 120 }}
          placeholder='请选择性别'
          allowClear={true}
          value={form.sex}
          onChange={onSexChange}>
          <Option value='男'>男</Option>
          <Option value='女'>女</Option>
        </Select>
        <Select
          style={{ width: 120 }}
          placeholder='请选择年龄'
          allowClear={true}
          value={form.age}
          onChange={onAgeChange}>
          <Option value='1,19'>20以下</Option>
          <Option value='20,29'>20左右</Option>
          <Option value='30,39'>30左右</Option>
          <Option value='40,120'>40以上</Option>
        </Select>
      </div>
      <Table
        columns={columns}
        dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>条件查询(String), null, null, 五. React>2. React 进阶>1) Ant Design>条件查询(String), 37fd46520daeff6aa83073914a6c4e5aeaea054301b5ac9034b5edc54abcaeba(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 32(Integer), <Table
        columns={columns}
        dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}
建议 axios 发请求是用 params 而不要自己拼字符串，因为自己拼串需要去掉值为 undefined 的属性建议 axios 发请求是用 params 而不要自己拼字符串，因为自己拼串需要去掉值为 undefined 的属性其中 StudentQueryForm 为export interface StudentQueryForm {
  name?: string,
  sex?: string,
  age?: string,
  [key: string]: any
}
删除(String), 五. React>2. React 进阶>1) Ant Design>删除(String), null, null, 五. React>2. React 进阶>1) Ant Design>删除(String), 173222cd2cf65e4bb63393ab89e0748427ff29a265de42b813f71af79eb5405f(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 33(Integer), defined 的属性建议 axios 发请求是用 params 而不要自己拼字符串，因为自己拼串需要去掉值为 undefined 的属性其中 StudentQueryForm 为export interface StudentQueryForm {
  name?: string,
  sex?: string,
  age?: string,
  [key: string]: any
}
删除import { Button, message, Popconfirm } from 'antd'
import axios from 'axios'
import { R } from '../model/Student'

export default function A6Delete({ id, onSuccess }: { id: number, onSuccess:()=>void }) {
  async function onConfirm() {
    const resp = await axios.delete<R<string>>(
      `http://localhost:8080/api/students/${id}`
    )
    message.success(resp.data.data)
    // 改变 form 依赖项
    onSuccess()
  }
  return (
    <Popconfirm title='确定要删除学生吗?' onConfirm={onConfirm}>
      <Button danger size='small'>
        删除
      </Button>
    </Popconfirm>
  )
}
使用删除组件(String), 五. React>2. React 进阶>1) Ant Design>删除(String), null, null, 五. React>2. React 进阶>1) Ant Design>删除(String), 3a1905d72d24f30adafcf5df3c2e814468cc31b406f873d396566d086efa4d55(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 34(Integer), 
    // 改变 form 依赖项
    onSuccess()
  }
  return (
    <Popconfirm title='确定要删除学生吗?' onConfirm={onConfirm}>
      <Button danger size='small'>
        删除
      </Button>
    </Popconfirm>
  )
}
使用删除组件import { Button, Input, Select, Space, Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { PageResp, R, Student, StudentQueryForm } from '../model/Student'
import A6Delete from './A6Delete'

const { Option } = Select

export default function A6() {
  // ... 省略

  function onDeleteSuccess() {
    setForm((old)=>{
      return {...old}
    })
  }
    
  const columns: ColumnsType<Student> = [
    // ... 省略
    {
      title: '操作',
      dataIndex: 'operation',
      // value: 属性值, student
      render: (_, student)=>{
        return <>
          <Space>
            <A6Delete id={student.id} onSuccess={onDeleteSuccess}></A6Delete>
            <Button type='default' size='small'>修改</Button>
          </Space>
        </>
      }
    }
  ]

  // ... 省略
}
(String), 五. React>2. React 进阶>1) Ant Design>修改(String), null, null, 五. React>2. React 进阶>1) Ant Design>修改(String), eb46c163c1a189315ac8d1e491d5986f8a12136af4283a3c4afa022ecab3e7dc(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 35(Integer),           <A6Delete id={student.id} onSuccess={onDeleteSuccess}></A6Delete>
            <Button type='default' size='small'>修改</Button>
          </Space>
        </>
      }
    }
  ]

  // ... 省略
}
修改(String), 五. React>2. React 进阶>1) Ant Design>修改(String), null, null, 五. React>2. React 进阶>1) Ant Design>修改(String), 635e4f303ab77381219a3b613cf2d9a00798aae499ccd71c56e04c240fbe734d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 36(Integer),         <A6Delete id={student.id} onSuccess={onDeleteSuccess}></A6Delete>
            <Button type='default' size='small'>修改</Button>
          </Space>
        </>
      }
    }
  ]

  // ... 省略
}
修改import { Form, Input, InputNumber, message, Modal, Radio } from 'antd'
import { Rule } from 'antd/lib/form'
import axios from 'axios'
import { useEffect } from 'react'
import { R, Student } from '../model/Student'

export default function A6Update({
  open,
  student,
  onSuccess,
  onCancel,
}: {
  open: boolean
  student: Student
  onSuccess?: () => void
  onCancel?: () => void
}) {
  const { Item } = Form
  const { Group } = Radio
  const options = [
    { label: '男', value: '男' },
    { label: '女', value: '女' },
  ]

  const [form] = Form.useForm() // 代表了表单对象

  const nameRules: Rule[] = [
    { required: true, message: '姓名必须' },
    { min: 2, type: 'string', message: '至少两个字符' },
  ]

  const ageRules: Rule[] = [
    { required: true, message: '年龄必须' },
    { min: 1, type: 'number', message: '最小1岁' },
    { max: 120, type: 'number', message: '最大120岁' },
  ]

  async function onOk() {
    // 验证并获取表单数据
    try {
      const values = await form.validateFields()
      console.log(values)
      const resp = await axios.put<R<string>>(
        `http://localhost:8080/api/students/${values.id}`,
        values
      )
      message.success(resp.data.data)
      onSuccess && onSuccess()
    } catch (e) {
      console.error(e)
    }
  }

  useEffect(() => {
    // 修改表单数据
    form.setFieldsValue(student) // id, name, sex, age
  }, [student])

  return (
    <Modal
      open={open}
      title='修改学生'
      onOk={onOk}
      onCancel={onCancel}
      forceRender={true}>
      <Form form={form}>
        <Item label='编号' name='id'>
          <Input readOnly></Input>
        </Item>
        <Item label='姓名' name='name' rules={nameRules}>
          <Input></Input>
        </Item>
        <Item label='性别' name='sex'>
          <Group
            options={options}
            optionType='button'
            buttonStyle='solid'></Group>
        </Item>
        <Item label='年龄' name='age' rules={ageRules}>
          <InputNumber></InputNumber>
        </Item>
      </Form>
    </Modal>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>修改(String), null, null, 五. React>2. React 进阶>1) Ant Design>修改(String), 6defaa35997368e0ee9dac88f70c413565e6ed982378deabdc3342d2e2305981(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 37(Integer), '
            buttonStyle='solid'></Group>
        </Item>
        <Item label='年龄' name='age' rules={ageRules}>
          <InputNumber></InputNumber>
        </Item>
      </Form>
    </Modal>
  )
}
forceRender 是避免因为使用 useForm 后，表单套在 Modal 中会出现的警告错误forceRender 是避免因为使用 useForm 后，表单套在 Modal 中会出现的警告错误使用组件(String), 五. React>2. React 进阶>1) Ant Design>修改(String), null, null, 五. React>2. React 进阶>1) Ant Design>修改(String), 89d4326715f3e3779c7db92f04576604c693a259d1920038ac93b754589c3496(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 38(Integer), eRules}>
          <InputNumber></InputNumber>
        </Item>
      </Form>
    </Modal>
  )
}
forceRender 是避免因为使用 useForm 后，表单套在 Modal 中会出现的警告错误forceRender 是避免因为使用 useForm 后，表单套在 Modal 中会出现的警告错误使用组件import { Button, Input, Select, Space, Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { PageResp, R, Student, StudentQueryForm } from '../model/Student'
import A6Delete from './A6Delete'
import A6Update from './A6Update'

const { Option } = Select

export default function A6() {
  // ... 省略
  const columns: ColumnsType<Student> = [
    // ... 省略
    {
      title: '操作',
      dataIndex: 'operation',
      // value: 属性值, student
      render: (_, student) => {
        return (
          <>
            <Space>
              <A6Delete id={student.id} onSuccess={onDeleteSuccess}></A6Delete>
              <Button
                type='default'
                size='small'
                onClick={() => {
                  onUpdateClick(student)
                }}>
                修改
              </Button>
            </Space>
          </>
        )
      },
    },
  ]

  // -------------- 修改功能开始 -------------
  function onUpdateClick(student: Student) {
    setUpdateOpen(true)
    setUpdateForm(student)
  }

  function onUpdateCancel() {
    setUpdateOpen(false)
  }

  function onUpdateSuccess() {
    setUpdateOpen(false)
    setForm((old) => {
      return { ...old }
    })
  }

  const [updateOpen, setUpdateOpen] = useState(false)
  const [updateForm, setUpdateForm] = useState<Student>({
    id: 0,
    name: '',
    sex: '男',
    age: 18,
  })
  // -------------- 修改功能结束 -------------

  return (
    <div>
      <A6Update
        open={updateOpen}
        student={updateForm}
        onSuccess={onUpdateSuccess}
        onCancel={onUpdateCancel}></A6Update>
      <!-- ... 省略 -->
    </div>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>新增(String), null, null, 五. React>2. React 进阶>1) Ant Design>新增(String), ec27c1f68cffecbcba36253d722bb0e6f463c5f595bf324ea3e0c496ad82d381(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 39(Integer),   <div>
      <A6Update
        open={updateOpen}
        student={updateForm}
        onSuccess={onUpdateSuccess}
        onCancel={onUpdateCancel}></A6Update>
      <!-- ... 省略 -->
    </div>
  )
}
新增(String), 五. React>2. React 进阶>1) Ant Design>新增(String), null, null, 五. React>2. React 进阶>1) Ant Design>新增(String), 53edb1dc62ce22f156be26552dc3d0930f73cc40a4275d48c5a7a414962cdddf(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 40(Integer), <div>
      <A6Update
        open={updateOpen}
        student={updateForm}
        onSuccess={onUpdateSuccess}
        onCancel={onUpdateCancel}></A6Update>
      <!-- ... 省略 -->
    </div>
  )
}
新增import { Form, Input, InputNumber, message, Modal, Radio } from 'antd'
import { Rule } from 'antd/lib/form'
import axios from 'axios'
import { useEffect } from 'react'
import { R, Student } from '../model/Student'

export default function A6Insert({
  open,
  student,
  onSuccess,
  onCancel,
}: {
  open: boolean
  student: Student
  onSuccess?: () => void
  onCancel?: () => void
}) {
  const { Item } = Form
  const { Group } = Radio
  const options = [
    { label: '男', value: '男' },
    { label: '女', value: '女' },
  ]

  const [form] = Form.useForm() // 代表了表单对象

  const nameRules: Rule[] = [
    { required: true, message: '姓名必须' },
    { min: 2, type: 'string', message: '至少两个字符' },
  ]

  const ageRules: Rule[] = [
    { required: true, message: '年龄必须' },
    { min: 1, type: 'number', message: '最小1岁' },
    { max: 120, type: 'number', message: '最大120岁' },
  ]

  async function onOk() {
    // 验证并获取表单数据
    try {
      const values = await form.validateFields()
      console.log(values)
      const resp = await axios.post<R<string>>(
        `http://localhost:8080/api/students`,
        values
      )
      message.success(resp.data.data)
      onSuccess && onSuccess()
      form.resetFields() // 重置表单
    } catch (e) {
      console.error(e)
    }
  }

  return (
    <Modal
      open={open}
      title='新增学生'
      onOk={onOk}
      onCancel={onCancel}
      forceRender={true}>
      <Form form={form} initialValues={student}>
        <Item label='姓名' name='name' rules={nameRules}>
          <Input></Input>
        </Item>
        <Item label='性别' name='sex'>
          <Group
            options={options}
            optionType='button'
            buttonStyle='solid'></Group>
        </Item>
        <Item label='年龄' name='age' rules={ageRules}>
          <InputNumber></InputNumber>
        </Item>
      </Form>
    </Modal>
  )
}

(String), 五. React>2. React 进阶>1) Ant Design>新增(String), null, null, 五. React>2. React 进阶>1) Ant Design>新增(String), c376f8d65e1dceaf6094b024ddb48af2c91979f5893ba5e97c45832eff353b11(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 41(Integer), 
            buttonStyle='solid'></Group>
        </Item>
        <Item label='年龄' name='age' rules={ageRules}>
          <InputNumber></InputNumber>
        </Item>
      </Form>
    </Modal>
  )
}

initialValues 只会触发一次表单赋初值form.resetFields() 会将表单重置为 initialValues 时的状态initialValues 只会触发一次表单赋初值form.resetFields() 会将表单重置为 initialValues 时的状态使用组件(String), 五. React>2. React 进阶>1) Ant Design>新增(String), null, null, 五. React>2. React 进阶>1) Ant Design>新增(String), 21097d6ffb03cf2f0629bcc0ca22c1aa0dafded7eab5103b894076a60a2700b8(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 42(Integer), mber>
        </Item>
      </Form>
    </Modal>
  )
}

initialValues 只会触发一次表单赋初值form.resetFields() 会将表单重置为 initialValues 时的状态initialValues 只会触发一次表单赋初值form.resetFields() 会将表单重置为 initialValues 时的状态使用组件import { Button, Input, Select, Space, Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { PageResp, R, Student, StudentQueryForm } from '../model/Student'
import A6Delete from './A6Delete'
import A6Insert from './A6Insert'
import A6SelectedDelete from './A6SelectedDelete'
import A6Update from './A6Update'

const { Option } = Select

export default function A6() {
  // ... 省略

  // -------------- 新增功能开始 -------------
  function onInsertClick() {
    setInsertOpen(true)
  }

  function onInsertCancel() {
    setInsertOpen(false)
  }

  function onInsertSuccess() {
    setInsertOpen(false)
    setForm((old) => {
      return { ...old }
    })
  }

  const [insertOpen, setInsertOpen] = useState(false)
  const [insertForm, setInsertForm] = useState<Student>({
    id: 0,
    name: '',
    sex: '男',
    age: 18,
  })
  // -------------- 新增功能结束 -------------

  
  return (
    <div>
      <A6Insert
        open={insertOpen}
        student={insertForm}
        onSuccess={onInsertSuccess}
        onCancel={onInsertCancel}></A6Insert>
      <A6Update
        open={updateOpen}
        student={updateForm}
        onSuccess={onUpdateSuccess}
        onCancel={onUpdateCancel}></A6Update>
      <div>
        <Space>
          <Input
            style={{ width: 120 }}
            placeholder='请输入姓名'
            value={form.name}
            onChange={onNameChange}></Input>
          <Select
            style={{ width: 120 }}
            placeholder='请选择性别'
            allowClear={true}
            value={form.sex}
            onChange={onSexChange}>
            <Option value='男'>男</Option>
            <Option value='女'>女</Option>
          </Select>
          <Select
            style={{ width: 120 }}
            placeholder='请选择年龄'
            allowClear={true}
            value={form.age}
            onChange={onAgeChange}>
            <Option value='1,19'>20以下</Option>
            <Option value='20,29'>20左右</Option>
            <Option value='30,39'>30左右</Option>
            <Option value='40,120'>40以上</Option>
          </Select>

          <Button type='primary' onClick={onInsertClick}>新增</Button>
        </Space>
      </div>
      <Table
        columns={columns}
        dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}

(String), 五. React>2. React 进阶>1) Ant Design>删除选中(String), null, null, 五. React>2. React 进阶>1) Ant Design>删除选中(String), ef195699daae6aa5115d50e3dfa935ee32310da0b1a5ecb6b9d30d57b88432ed(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 43(Integer), Table
        columns={columns}
        dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}

删除选中import { Button, message, Popconfirm } from "antd";
import axios from "axios";
import React from "react";
import { R } from "../model/Student";

export default function A6DeleteSelected(
  {ids, onSuccess}: {ids:React.Key[], onSuccess?:()=>void} // Key[] 是 number 或 string 的数组
){
  const disabled = ids.length === 0
  async function onConfirm() {
    const resp = await axios.delete<R<string>>('http://localhost:8080/api/students', {
      data: ids
    })
    message.success(resp.data.data)
    onSuccess && onSuccess()
  }
  return (
    <Popconfirm title='真的要删除选中的学生吗?' onConfirm={onConfirm} disabled={disabled}>
      <Button danger type='primary' disabled={disabled}>
        删除选中
      </Button>
    </Popconfirm>
  )
}
与 A6 结合(String), 五. React>2. React 进阶>1) Ant Design>删除选中(String), null, null, 五. React>2. React 进阶>1) Ant Design>删除选中(String), 0ee17cc9f281e4434ff6f7c236b73cff187c421e0917897f6b054816b2dfeda0(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 44(Integer),  (
    <Popconfirm title='真的要删除选中的学生吗?' onConfirm={onConfirm} disabled={disabled}>
      <Button danger type='primary' disabled={disabled}>
        删除选中
      </Button>
    </Popconfirm>
  )
}
与 A6 结合import { Button, Input, Select, Space, Table } from 'antd'
import { ColumnsType, TablePaginationConfig } from 'antd/lib/table'
import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { PageResp, R, Student, StudentQueryForm } from '../model/Student'
import A6Delete from './A6Delete'
import A6Insert from './A6Insert'
import A6SelectedDelete from './A6SelectedDelete'
import A6Update from './A6Update'

const { Option } = Select

export default function A6() {
  // ... 省略

  // -------------- 删除选中功能开始 -------------
  const [ids, setIds] = useState<React.Key[]>([])
  function onIdsChange(ids:React.Key[]) {
    // console.log(ids)
    setIds(ids)
  }
  function onDeleteSelectedSuccess() {
    setForm((old)=>{
      return {...old}
    })
    setIds([])
  }
  // -------------- 删除选中功能结束 -------------
  return (
    <div>
      <A6Insert
        open={insertOpen}
        student={insertForm}
        onSuccess={onInsertSuccess}
        onCancel={onInsertCancel}></A6Insert>
      <A6Update
        open={updateOpen}
        student={updateForm}
        onSuccess={onUpdateSuccess}
        onCancel={onUpdateCancel}></A6Update>
      <div>
        <Space>
          <!-- ... 省略 -->
          <A6SelectedDelete ids={ids} onSuccess={onDeleteSelectedSuccess}></A6SelectedDelete>
        </Space>
      </div>
      <Table
        rowSelection={{
          selectedRowKeys: selectedKeys,
          onChange: onSelectChange,
        }}
        columns={columns}
        dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>useRequest(String), null, null, 五. React>2. React 进阶>1) Ant Design>useRequest(String), 48e3c5faaaf6adfeed78b73b6b5cc9234aee41335e0d58ecd312195c74cc7514(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 45(Integer),     }}
        columns={columns}
        dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}
useRequest安装npm install ahooks
使用(String), 五. React>2. React 进阶>1) Ant Design>useRequest(String), null, null, 五. React>2. React 进阶>1) Ant Design>useRequest(String), e4c20126507fac7f447a1567ab64f3a9e418680637f25eff9ecb5e4671d8c7fc(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 46(Integer),         dataSource={students}
        rowKey='id'
        loading={loading}
        pagination={pagination}
        onChange={onTableChange}></Table>
    </div>
  )
}
useRequest安装npm install ahooks
使用import { useRequest } from 'ahooks'
import { Table } from 'antd'
import { ColumnsType } from 'antd/lib/table'
import axios from 'axios'
import { Student, R } from '../model/Student'

export default function A3() {
  function getStudents() {
    return axios.get<R<Student[]>>('http://localhost:8080/api/students')
  }

  const { loading, data } = useRequest(getStudents)  

  const columns: ColumnsType<Student> = [
    {
      title: '编号',
      dataIndex: 'id',
    },
    {
      title: '姓名',
      dataIndex: 'name',
    },
    {
      title: '性别',
      dataIndex: 'sex',
    },
    {
      title: '年龄',
      dataIndex: 'age',
    },
  ]

  return (
    <Table
      dataSource={data?.data.data}
      columns={columns}
      rowKey='id'
      loading={loading}
      pagination={{ hideOnSinglePage: true }}></Table>
  )
}
(String), 五. React>2. React 进阶>1) Ant Design>useAndtTable(String), null, null, 五. React>2. React 进阶>1) Ant Design>useAndtTable(String), 45615b3c2a6ea57b839f6f890e8879bab5e789663f763110729f55ecc7f0c094(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 47(Integer), e',
    },
  ]

  return (
    <Table
      dataSource={data?.data.data}
      columns={columns}
      rowKey='id'
      loading={loading}
      pagination={{ hideOnSinglePage: true }}></Table>
  )
}
useAndtTable(String), 五. React>2. React 进阶>1) Ant Design>useAndtTable(String), null, null, 五. React>2. React 进阶>1) Ant Design>useAndtTable(String), d8b3e7eba58cb2bb51ef82ca791f5445f6e0e53dbb21c782e83ba9b850382eb7(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 48(Integer),  ]

  return (
    <Table
      dataSource={data?.data.data}
      columns={columns}
      rowKey='id'
      loading={loading}
      pagination={{ hideOnSinglePage: true }}></Table>
  )
}
useAndtTableimport { useAntdTable } from 'ahooks'
import { Table } from 'antd'
import { ColumnsType } from 'antd/lib/table'
import axios from 'axios'
import { Student, R } from '../model/Student'

interface PageResp<T> {
  total: number
  list: T[]
}

interface PageReq {
  current: number
  pageSize: number
  sorter?: any
  filter?: any
}

export default function A3() {
  async function getStudents({ current, pageSize }: PageReq) {
    const resp = await axios.get<R<PageResp<Student>>>(
      `http://localhost:8080/api/students/q?page=${current}&size=${pageSize}`
    )
    return resp.data.data
  }

  const { tableProps } = useAntdTable(getStudents, {
    defaultParams: [{ current: 1, pageSize: 5 }],
  })
  console.log(tableProps)

  const columns: ColumnsType<Student> = [
    {
      title: '编号',
      dataIndex: 'id',
    },
    {
      title: '姓名',
      dataIndex: 'name',
    },
    {
      title: '性别',
      dataIndex: 'sex',
    },
    {
      title: '年龄',
      dataIndex: 'age',
    },
  ]

  return <Table {...tableProps} columns={columns} rowKey='id'></Table>
}
(String), 五. React>2. React 进阶>2) MobX(String), null, null, 五. React>2. React 进阶>2) MobX(String), e58ef2928513b04816eed7ac07807317f91050b0850a8d68915feedbe25337c0(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 49(Integer), ',
    },
    {
      title: '性别',
      dataIndex: 'sex',
    },
    {
      title: '年龄',
      dataIndex: 'age',
    },
  ]

  return <Table {...tableProps} columns={columns} rowKey='id'></Table>
}
2) MobX介绍需求，组件0 改变了数据，其它组件也想获得改变后的数据，如图所示image-20221025104453534这种多个组件之间要共享状态数据，useState 就不够用了，useContext 也不好用了能够和 react 配合使用的状态管理库有MobXReduxMobXRedux其中 Redux API 非常难以使用，这里选择了更加符合人类习惯的 MobX，它虽然采用了面向对象的语法，但也能和函数式的代码很好地结合文档MobX 中文文档MobX 官方文档MobX 中文文档MobX 官方文档安装npm install mobx mobx-react-lite
mobx 目前版本是 6.xmobx-react-lite 目前版本是 3.xmobx 目前版本是 6.xmobx-react-lite 目前版本是 3.x名词Action, State, ViewActions 用来修改状态数据的方法Observable state 状态数据，可观察Derived values 派生值，也叫 Computed values 计算值，会根据状态数据的改变而改变，具有缓存功能Reactions 状态数据发生变化后要执行的操作，如 react 函数组件被重新渲染Actions 用来修改状态数据的方法Observable state 状态数据，可观察Derived values 派生值，也叫 Computed values 计算值，会根据状态数据的改变而改变，具有缓存功能Reactions 状态数据发生变化后要执行的操作，如 react 函数组件被重新渲染使用首先，定义一个在函数之外存储状态数据的 store，它与 useState 不同：(String), 五. React>2. React 进阶>2) MobX>使用(String), null, null, 五. React>2. React 进阶>2) MobX>使用(String), 5a6fc883b1af5a9b6320592a1d3a70daa40b8f6f870815170d8efcc086848a1d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 50(Integer), 数组件被重新渲染Actions 用来修改状态数据的方法Observable state 状态数据，可观察Derived values 派生值，也叫 Computed values 计算值，会根据状态数据的改变而改变，具有缓存功能Reactions 状态数据发生变化后要执行的操作，如 react 函数组件被重新渲染使用首先，定义一个在函数之外存储状态数据的 store，它与 useState 不同：useState 里的状态数据是存储在每个组件节点上，不同组件之间没法共享而 MobX 的 store 就是一个普通 js 对象，只要保证多个组件都访问此对象即可useState 里的状态数据是存储在每个组件节点上，不同组件之间没法共享而 MobX 的 store 就是一个普通 js 对象，只要保证多个组件都访问此对象即可(String), 五. React>2. React 进阶>2) MobX>使用(String), null, null, 五. React>2. React 进阶>2) MobX>使用(String), f7607f93af21826aeb87a1958836cadf69b99b6036970077d8d57e42406d5112(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 51(Integer), 定义一个在函数之外存储状态数据的 store，它与 useState 不同：useState 里的状态数据是存储在每个组件节点上，不同组件之间没法共享而 MobX 的 store 就是一个普通 js 对象，只要保证多个组件都访问此对象即可useState 里的状态数据是存储在每个组件节点上，不同组件之间没法共享而 MobX 的 store 就是一个普通 js 对象，只要保证多个组件都访问此对象即可import axios from 'axios'
import { makeAutoObservable } from 'mobx'
import { R, Student } from '../model/Student'

class StudentStore {
  student: Student = { name: '' }

  constructor() {
    makeAutoObservable(this)
  }

  async fetch(id: number) {
    const resp = await axios.get<R<Student>>(
      `http://localhost:8080/api/students/${id}`
    )
    runInAction(() => {
      this.student = resp.data.data
    })
  }
    
  get print() {
    const first = this.student.name.charAt(0)
    if (this.student.sex === '男') {
      return first.concat('大侠')
    } else if (this.student.sex === '女') {
      return first.concat('女侠')
    } else {
      return ''
    }
  } 
}

export default new StudentStore()
其中 makeAutoObservable 会(String), 五. React>2. React 进阶>2) MobX>使用(String), null, null, 五. React>2. React 进阶>2) MobX>使用(String), 9237bde95ecfb7c5ebf91b5bf41d16114d37c26c15f805bd96cda1e39da53bde(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 52(Integer), eturn first.concat('大侠')
    } else if (this.student.sex === '女') {
      return first.concat('女侠')
    } else {
      return ''
    }
  } 
}

export default new StudentStore()
其中 makeAutoObservable 会将对象的属性 student 变成 Observable state，即状态数据将对象的方法 fetch 变成 Action，即修改数据的方法将 get 方法变成 Computed values将对象的属性 student 变成 Observable state，即状态数据将对象的方法 fetch 变成 Action，即修改数据的方法将 get 方法变成 Computed values在异步操作里为状态属性赋值，需要放在 runInAction 里，否则会有警告错误使用 store，所有使用 store 的组件，为了感知状态数据的变化，需要用 observer 包装，对应着图中 reactions(String), 五. React>2. React 进阶>2) MobX>使用(String), null, null, 五. React>2. React 进阶>2) MobX>使用(String), 6d17a69a243f08d0db86a6d704c75dfdb28cbd9f3a5784642c92010b58104c9d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 53(Integer), 性 student 变成 Observable state，即状态数据将对象的方法 fetch 变成 Action，即修改数据的方法将 get 方法变成 Computed values在异步操作里为状态属性赋值，需要放在 runInAction 里，否则会有警告错误使用 store，所有使用 store 的组件，为了感知状态数据的变化，需要用 observer 包装，对应着图中 reactionsimport Search from 'antd/lib/input/Search'
import { observer } from 'mobx-react-lite'
import studentStore from '../store/StudentStore'
import A71 from './A71'
import Test2 from './Test2'

const A7 = () => {
  return (
    <div>
      <Search
        placeholder='input search text'
        onSearch={(v) => studentStore.fetch(Number(v))}
        style={{ width: 100 }}
      />
      <h3>组件0 {studentStore.student.name}</h3>
      <A71></A71>
      <A72></A72>
    </div>
  )
}

export default observer(A7)
其它组件import { observer } from 'mobx-react-lite'
import studentStore from '../store/StudentStore'

const A71 = () =>{
  return <h3 style={{color:'red'}}>组件1 {studentStore.student.name}</h3>
}

export default observer(A71)
(String), 五. React>2. React 进阶>2) MobX>使用(String), null, null, 五. React>2. React 进阶>2) MobX>使用(String), 1be37894eab0547def237c7f9dbcab3cd379c467812cd85f77f813f4c0eb0e4f(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 54(Integer), r } from 'mobx-react-lite'
import studentStore from '../store/StudentStore'

const A71 = () =>{
  return <h3 style={{color:'red'}}>组件1 {studentStore.student.name}</h3>
}

export default observer(A71)
import { observer } from 'mobx-react-lite'
import studentStore from '../store/StudentStore'

const A72 = () =>{
  return <h3 style={{color:'red'}}>组件1 {studentStore.student.name}</h3>
}

export default observer(A72)
注解方式(String), 五. React>2. React 进阶>2) MobX>注解方式(String), null, null, 五. React>2. React 进阶>2) MobX>注解方式(String), 9ca28dc8366d4b072ce071decc526518d81d46245a45d083d382df25d1435771(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 55(Integer), from 'mobx-react-lite'
import studentStore from '../store/StudentStore'

const A72 = () =>{
  return <h3 style={{color:'red'}}>组件1 {studentStore.student.name}</h3>
}

export default observer(A72)
注解方式import { R, Student } from "../model/Student";
import { action, computed, makeAutoObservable, makeObservable, observable, runInAction } from 'mobx'
import axios from "axios";

class StudentStore {
  // 属性 - 对应状态数据 observable state
  @observable student: Student = { id: 0, name: '' }
  // 方法 - 对应 action 方法
  @action setName(name: string) {
    this.student.name = name
  }
  @action async fetch(id: number) {
    const resp = await axios.get<R<Student>>(`http://localhost:8080/api/students/${id}`)
    runInAction(() => {
      this.student = resp.data.data
    })
  }
  // get 方法 - 对应 derived value
  @computed get displayName() {
    const first = this.student.name.charAt(0)
    if (this.student.sex === '男') {
      return first + '大侠'
    } else if (this.student.sex === '女') {
      return first + '女侠'
    } else {
      return ''
    }
  }
  // 构造器
  constructor() {
    makeObservable(this)
  }
}

export default new StudentStore()
(String), 五. React>2. React 进阶>2) MobX>注解方式(String), null, null, 五. React>2. React 进阶>2) MobX>注解方式(String), 738bd5060d8d388c8276683552a81dd7d1a3e2e21cb6c0020258238a20730368(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 56(Integer),    } else if (this.student.sex === '女') {
      return first + '女侠'
    } else {
      return ''
    }
  }
  // 构造器
  constructor() {
    makeObservable(this)
  }
}

export default new StudentStore()
需要在 tsconifg.json 中加入配置{
  "compilerOptions": {
    // ...
    "experimentalDecorators": true
  }
}
3) React Router安装npm install react-router-dom
目前版本是 6.x目前版本是 6.x使用新建文件 src/router/router.tsx(String), 五. React>2. React 进阶>3) React Router>使用(String), null, null, 五. React>2. React 进阶>3) React Router>使用(String), 4f9cbb6de8b7516b48a01ee9e101f2a07af1187f289b07d97190848729e01f2d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 57(Integer), Store()
需要在 tsconifg.json 中加入配置{
  "compilerOptions": {
    // ...
    "experimentalDecorators": true
  }
}
3) React Router安装npm install react-router-dom
目前版本是 6.x目前版本是 6.x使用新建文件 src/router/router.tsximport { lazy } from 'react'
import { Navigate, RouteObject, useRoutes } from 'react-router-dom'

export function load(name: string) {
  const Page = lazy(() => import(`../pages/${name}`))
  return <Page></Page>
}

const staticRoutes: RouteObject[] = [
  { path: '/login', element: load('A8Login') },
  {
    path: '/',
    element: load('A8Main'),
    children: [
      { path: 'student', element: load('A8MainStudent') },
      { path: 'teacher', element: load('A8MainTeacher') },
      { path: 'user', element: load('A8MainUser') }
    ],
  },
  { path: '/404', element: load('A8Notfound') },
  { path: '/*', element: <Navigate to={'/404'}></Navigate> },
]

export default function Router() {
  return useRoutes(staticRoutes)
}
index.tsx 修改为(String), 五. React>2. React 进阶>3) React Router>使用(String), null, null, 五. React>2. React 进阶>3) React Router>使用(String), 0a434e2d8dc1f7db224fd5732c7cc6e390dc69a5ef5eedc02f7e3ebc9f45226f(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 58(Integer), },
  { path: '/404', element: load('A8Notfound') },
  { path: '/*', element: <Navigate to={'/404'}></Navigate> },
]

export default function Router() {
  return useRoutes(staticRoutes)
}
index.tsx 修改为import ReactDOM from 'react-dom/client';
import './index.css';
import { ConfigProvider } from 'antd';
import zhCN from 'antd/es/locale/zh_CN'

import { BrowserRouter } from 'react-router-dom';
import Router from './router/router';

const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);

root.render(
  <ConfigProvider locale={zhCN}>
    <BrowserRouter>
      <Router></Router>
    </BrowserRouter>
  </ConfigProvider>  
)
A8Main 的代码(String), 五. React>2. React 进阶>3) React Router>使用(String), null, null, 五. React>2. React 进阶>3) React Router>使用(String), 9eee881915b05f8c6c466e4ced57fcce435192ba08cfa2f61a00ed7f6c0c7d4d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 59(Integer), (
  document.getElementById('root') as HTMLElement
);

root.render(
  <ConfigProvider locale={zhCN}>
    <BrowserRouter>
      <Router></Router>
    </BrowserRouter>
  </ConfigProvider>  
)
A8Main 的代码import { Layout } from "antd";
import { Link, Outlet } from "react-router-dom";

export default function A8Main () {  
  return <Layout>
    <Layout.Header>头部导航</Layout.Header>
    <Layout>
      <Layout.Sider>侧边导航
        <Link to='/student'>学生管理</Link>
        <Link to='/teacher'>教师管理</Link>
        <Link to='/user'>用户管理</Link>
      </Layout.Sider>
      <Layout.Content>
        <Outlet></Outlet>
      </Layout.Content>
    </Layout>
  </Layout>
}
Navigate 的作用是重定向load 方法的作用是懒加载组件，更重要的是根据字符串找到真正的组件，这是动态路由所需要的children 来进行嵌套路由映射，嵌套路由在跳转后，并不是替换整个页面，而是用新页面替换父页面的 Outlet 部分Navigate 的作用是重定向load 方法的作用是懒加载组件，更重要的是根据字符串找到真正的组件，这是动态路由所需要的children 来进行嵌套路由映射，嵌套路由在跳转后，并不是替换整个页面，而是用新页面替换父页面的 Outlet 部分动态路由路由分成两部分：静态路由，固定的部分，如主页、404、login 这几个页面动态路由，变化的部分，经常是主页内的嵌套路由，比如 Student、Teacher 这些(String), 五. React>2. React 进阶>3) React Router>动态路由(String), null, null, 五. React>2. React 进阶>3) React Router>动态路由(String), c5ed7ce3da6c12d0f681279aa3a7d9f86834a23c42df3bc3a5265a65f3705ebd(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 60(Integer), e 的作用是重定向load 方法的作用是懒加载组件，更重要的是根据字符串找到真正的组件，这是动态路由所需要的children 来进行嵌套路由映射，嵌套路由在跳转后，并不是替换整个页面，而是用新页面替换父页面的 Outlet 部分动态路由路由分成两部分：静态路由，固定的部分，如主页、404、login 这几个页面动态路由，变化的部分，经常是主页内的嵌套路由，比如 Student、Teacher 这些静态路由，固定的部分，如主页、404、login 这几个页面动态路由，变化的部分，经常是主页内的嵌套路由，比如 Student、Teacher 这些动态路由应该是根据用户登录后，根据角色的不同，从后端服务获取，因为这些数据是变化的，所以用 mobx 来管理(String), 五. React>2. React 进阶>3) React Router>动态路由(String), null, null, 五. React>2. React 进阶>3) React Router>动态路由(String), c8430ba542ebdc57d6c6cb95780aff670880b125c6f4c71e47b0c0ae4192a49d(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 61(Integer), 路由，固定的部分，如主页、404、login 这几个页面动态路由，变化的部分，经常是主页内的嵌套路由，比如 Student、Teacher 这些静态路由，固定的部分，如主页、404、login 这几个页面动态路由，变化的部分，经常是主页内的嵌套路由，比如 Student、Teacher 这些动态路由应该是根据用户登录后，根据角色的不同，从后端服务获取，因为这些数据是变化的，所以用 mobx 来管理import axios from 'axios'
import { makeAutoObservable, runInAction } from 'mobx'
import { Navigate, RouteObject } from 'react-router-dom'
import { MenuAndRoute, R, Route } from '../model/Student'
import { load } from '../router/MyRouter'

class RoutesStore {
  dynamicRoutes: Route[]

  async fetch(username: string) {
    const resp = await axios.get<R<MenuAndRoute>>(
      `http://localhost:8080/api/menu/${username}`
    )
    runInAction(() => {
      this.dynamicRoutes = resp.data.data.routeList
      localStorage.setItem('dynamicRoutes', JSON.stringify(this.dynamicRoutes))
    })
  }

  constructor() {
    makeAutoObservable(this)
    const r = localStorage.getItem('dynamicRoutes')
    this.dynamicRoutes = r ? JSON.parse(r) : []
  }

  reset() {
    this.dynamicRoutes = []
    localStorage.removeItem('dynamicRoutes')
  }

  get routes() {
    const staticRoutes: RouteObject[] = [
      { path: '/login', element: load('A8Login') },
      { path: '/', element: load('A8Main') },
      { path: '/404', element: load('A8Notfound') },
      { path: '/*', element: <Navigate to={'/404'}></Navigate> },
    ]
    const main = staticRoutes[1]

    main.children = this.dynamicRoutes.map((r) => {
      console.log(r.path, r.element)
      return {
        path: r.path,
        element: load(r.element),
      }
    })
    return staticRoutes
  }
}

export default new RoutesStore()
(String), 五. React>2. React 进阶>3) React Router>动态路由(String), null, null, 五. React>2. React 进阶>3) React Router>动态路由(String), ef5ff696b7483c6e6b055d028f6dfe08e643116c38d5d0979add7584dec282b0(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 62(Integer), map((r) => {
      console.log(r.path, r.element)
      return {
        path: r.path,
        element: load(r.element),
      }
    })
    return staticRoutes
  }
}

export default new RoutesStore()
其中用 localStorage 进行了数据的持久化，避免刷新后丢失数据其中用 localStorage 进行了数据的持久化，避免刷新后丢失数据MyRouter 文件修改为import { observer } from 'mobx-react-lite'
import { lazy } from 'react'
import { Navigate, RouteObject, useRoutes } from 'react-router-dom'
import RoutesStore from '../store/RoutesStore'

// 把字符串组件 => 组件标签
export function load(name: string) {
  // A8Login
  const Page = lazy(() => import(`../pages/${name}`))
  return <Page></Page>
}

// 路由对象
function MyRouter() {  
  const router = useRoutes(RoutesStore.routes)
  return router
}

export default observer(MyRouter)
注意导入 router 对象时，用 observer 做了包装，这样能够在 store 发生变化时重建 router 对象动态菜单图标要独立安装依赖npm install @ant-design/icons
图标组件，用来将字符串图标转换为标签图标(String), 五. React>2. React 进阶>3) React Router>动态菜单(String), null, null, 五. React>2. React 进阶>3) React Router>动态菜单(String), 4909aeb43af89cdb623c00c0e8f03d4c395987407bc0dd75dad698abf9ff3fdb(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 63(Integer), es(RoutesStore.routes)
  return router
}

export default observer(MyRouter)
注意导入 router 对象时，用 observer 做了包装，这样能够在 store 发生变化时重建 router 对象动态菜单图标要独立安装依赖npm install @ant-design/icons
图标组件，用来将字符串图标转换为标签图标import * as icons from '@ant-design/icons'

interface Module {
  [p: string]: any
}

const all: Module = icons

export default function Icon({ name }: { name: string }) {
  const Icon = all[name]
  return <Icon></Icon>
}
修改 RoutesStore.tsx(String), 五. React>2. React 进阶>3) React Router>动态菜单(String), null, null, 五. React>2. React 进阶>3) React Router>动态菜单(String), d72ab8e266fbca76ae9ba990d6d5d86a990ddf3996f66f2bda8db043cd5cfe0a(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 64(Integer), ns'

interface Module {
  [p: string]: any
}

const all: Module = icons

export default function Icon({ name }: { name: string }) {
  const Icon = all[name]
  return <Icon></Icon>
}
修改 RoutesStore.tsximport axios from 'axios'
import { makeAutoObservable, runInAction } from 'mobx'
import { Link, Navigate, RouteObject } from 'react-router-dom'
import { Menu, MenuAndRoute, R, Route } from '../model/Student'
import { load } from '../router/MyRouter'
import Icon from './Icon'

function convertMenu(m: Menu): any {
  const Label = m.routePath ? <Link to={m.routePath}>{m.label}</Link> : m.label
  return {
    label: Label,
    key: m.key,
    icon: <Icon name={m.icon}></Icon>,
    children: m.children && m.children.map(convertMenu)
  }
}

class RoutesStore {
  // 动态部分
  dynamicRoutes: Route[] = []
  dynamicMenus: Menu[] = []

  async fetch(username: string) {
    const resp = await axios.get<R<MenuAndRoute>>(
      `http://localhost:8080/api/menu/${username}`
    )
    runInAction(() => {
      this.dynamicRoutes = resp.data.data.routeList
      localStorage.setItem('dynamicRoutes', JSON.stringify(this.dynamicRoutes))

      this.dynamicMenus = resp.data.data.menuTree
      localStorage.setItem('dynamicMenus', JSON.stringify(this.dynamicMenus))
    })
  }

  get menus() {
    return this.dynamicMenus.map(convertMenu)
  }

  get routes() {
    const staticRoutes: RouteObject[] = [
      { path: '/login', element: load('A8Login') },
      { path: '/', element: load('A8Main'), children: [] },
      { path: '/404', element: load('A8Notfound') },
      { path: '/*', element: <Navigate to={'/404'}></Navigate> },
    ]
    staticRoutes[1].children = this.dynamicRoutes.map((r) => {
      return {
        path: r.path,
        element: load(r.element),
      }
    })
    return staticRoutes
  }

  constructor() {
    makeAutoObservable(this)
    const json = localStorage.getItem('dynamicRoutes')
    this.dynamicRoutes = json ? JSON.parse(json) : []

    const json2 = localStorage.getItem('dynamicMenus')
    this.dynamicMenus = json2 ? JSON.parse(json2) : []
  }

  reset() {
    localStorage.removeItem('dynamicRoutes')
    this.dynamicRoutes = []
    localStorage.removeItem('dynamicMenus')
    this.dynamicMenus = []
  }
}

export default new RoutesStore()

(String), 五. React>2. React 进阶>3) React Router>动态菜单(String), null, null, 五. React>2. React 进阶>3) React Router>动态菜单(String), 26e76a2f477c30821d4d7f4475b8a16272c12302eb8e770598baedf4a169f6f1(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 65(Integer), }

  reset() {
    localStorage.removeItem('dynamicRoutes')
    this.dynamicRoutes = []
    localStorage.removeItem('dynamicMenus')
    this.dynamicMenus = []
  }
}

export default new RoutesStore()

其中 convertMenu 为核心方法，负责将服务器返回的 Menu 转换成 antd Menu 组件需要的 Menu使用<Menu items={RoutesStore.menus} mode='inline' theme="dark"></Menu>
跳转若发生错误，可能是因为组件懒加载引起的，需要用 Suspense 解决root.render(
  <ConfigProvider locale={zhCN}>
    <BrowserRouter>
      <Suspense fallback={<h3>加载中...</h3>}>
        <MyRouter></MyRouter>
      </Suspense>
    </BrowserRouter>
  </ConfigProvider>
)
登录(String), 五. React>2. React 进阶>3) React Router>登录(String), null, null, 五. React>2. React 进阶>3) React Router>登录(String), 2360de3c74e8aaf6e4da4fa6638812b1bc9d40a69fab9f198f59efc5c4224252(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 66(Integer), t.render(
  <ConfigProvider locale={zhCN}>
    <BrowserRouter>
      <Suspense fallback={<h3>加载中...</h3>}>
        <MyRouter></MyRouter>
      </Suspense>
    </BrowserRouter>
  </ConfigProvider>
)
登录import { ItemType } from 'antd/lib/menu/hooks/useItems'
import axios from 'axios'
import { makeAutoObservable, runInAction } from 'mobx'
import { Link, Navigate, RouteObject } from 'react-router-dom'
import { LoginReq, LoginResp, Menu, MenuAndRoute, R, Route } from '../model/Student'
import { load } from '../router/MyRouter'
import Icon from './Icon'

function convertMenu(m: Menu): ItemType {
  const Label = m.routePath? <Link to={m.routePath}>{m.label}</Link> : m.label
  return {
    key: m.key,
    label: Label,
    icon: <Icon name={m.icon}></Icon>, 
    children: m.children && m.children.map(convertMenu)
  }
}

class RoutesStore {
  // 动态部分
  dynamicRoutes: Route[] = []
  dynamicMenus: Menu[] = []

  token: string = ''
  state: string = 'pending' // 取值 pending done error
  message: string = '' // 取值: 1. 空串 正常  2. 非空串 错误消息

  async login(loginReq: LoginReq) {
    this.state = 'pending'
    this.message = ''
    const resp1 = await axios.post<R<LoginResp>>(
      'http://localhost:8080/api/loginJwt',
      loginReq
    )
    if(resp1.data.code === 999) {
      const resp2 = await axios.get<R<MenuAndRoute>>(
        `http://localhost:8080/api/menu/${loginReq.username}`
      )
      runInAction(()=>{
        this.token = resp1.data.data.token
        localStorage.setItem('token', this.token)

        this.dynamicRoutes = resp2.data.data.routeList
        localStorage.setItem('dynamicRoutes', JSON.stringify(this.dynamicRoutes))

        this.dynamicMenus = resp2.data.data.menuTree
        localStorage.setItem('dynamicMenus', JSON.stringify(this.dynamicMenus))

        this.state = 'done'
      })
    } else {
      runInAction(()=>{
        this.message = resp1.data.message || '未知错误'
        this.state = 'error'
      })
    }
  }

  async fetch(username: string) {
    const resp = await axios.get<R<MenuAndRoute>>(
      `http://localhost:8080/api/menu/${username}`
    )
    runInAction(() => {
      this.dynamicRoutes = resp.data.data.routeList
      localStorage.setItem('dynamicRoutes', JSON.stringify(this.dynamicRoutes))

      this.dynamicMenus = resp.data.data.menuTree
      localStorage.setItem('dynamicMenus', JSON.stringify(this.dynamicMenus))
    })
  }
    
  get routes() {
    const staticRoutes: RouteObject[] = [
      { path: '/login', element: load('A8Login') },
      { path: '/', element: load('A8Main'), children: [] },
      { path: '/404', element: load('A8Notfound') },
      { path: '/*', element: <Navigate to={'/404'}></Navigate> },
    ]
    staticRoutes[1].children = this.dynamicRoutes.map((r) => {
      return {
        path: r.path,
        element: load(r.element),
      }
    })
    return staticRoutes
  }

  get menus() {
    return this.dynamicMenus.map(convertMenu)
  }

  constructor() {
    makeAutoObservable(this)
    const json = localStorage.getItem('dynamicRoutes')
    this.dynamicRoutes = json ? JSON.parse(json) : []

    const json1 = localStorage.getItem('dynamicMenus')
    this.dynamicMenus = json1 ? JSON.parse(json1) : []

    const token = localStorage.getItem('token')
    this.token = token ?? ''
      
    this.message = ''
    this.state = 'pending'  
  }

  reset() {
    localStorage.removeItem('dynamicRoutes')
    this.dynamicRoutes = []

    localStorage.removeItem('dynamicMenus')
    this.dynamicMenus = []

    localStorage.removeItem('token')
    this.token = ''
      
    this.message = ''
    this.state = 'pending'    
  }
}

export default new RoutesStore()
(String), 五. React>2. React 进阶>3) React Router>登录(String), null, null, 五. React>2. React 进阶>3) React Router>登录(String), f44deca20596bb01f7658456d04b60cdd093997ac6242621aeb193af89c9fecf(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 67(Integer), dynamicMenus')
    this.dynamicMenus = []

    localStorage.removeItem('token')
    this.token = ''
      
    this.message = ''
    this.state = 'pending'    
  }
}

export default new RoutesStore()
登录页面function A8Login() {
  function onFinish(values: { username: string; password: string }) {
    RoutesStore.login(values)
  }

  const nav = useNavigate()
  useEffect(() => {
    if (RoutesStore.state === 'done') {
      nav('/')
    } else if (RoutesStore.state === 'error') {
      message.error(RoutesStore.message)
    }
  }, [RoutesStore.state])

  // ...
}

export default observer(A8Login)
用 useNavigate() 返回的函数跳转的代码不能包含在函数式组件的主逻辑中，只能放在其它事件处理函数中写在副作用函数 useEffect 之中用 useNavigate() 返回的函数跳转的代码不能包含在函数式组件的主逻辑中，只能放在其它事件处理函数中写在副作用函数 useEffect 之中其它事件处理函数中写在副作用函数 useEffect 之中注销、欢迎词、登录检查Store 中增加 get username 方法(String), 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查(String), null, null, 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查(String), e0681a31c8a0ccfd7e4555877eebd8e04d7d8a0e395f701cc81ab11a90d2dfe6(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 68(Integer),  返回的函数跳转的代码不能包含在函数式组件的主逻辑中，只能放在其它事件处理函数中写在副作用函数 useEffect 之中用 useNavigate() 返回的函数跳转的代码不能包含在函数式组件的主逻辑中，只能放在其它事件处理函数中写在副作用函数 useEffect 之中其它事件处理函数中写在副作用函数 useEffect 之中注销、欢迎词、登录检查Store 中增加 get username 方法class RoutesStore {
  // ...

  // eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.-l-MjMPGJVOf3zoIJgoqpV3LWoqvCCgcaI1ga86ismU
  get username() {
    if(this.token.length === 0) {
      return ''
    }
    const json = atob(this.token.split('.')[1])
    return JSON.parse(json).sub
  }
    
  // ...
}
token 的前两部分都可以解码出来，其中 [1] 就是 token 的内容部分token 的前两部分都可以解码出来，其中 [1] 就是 token 的内容部分主页组件改为(String), 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查(String), null, null, 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查(String), d2821d366cec622d5310bd87b239c51d1fef82b329ef2f5c69a122739b2245c7(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 69(Integer), turn ''
    }
    const json = atob(this.token.split('.')[1])
    return JSON.parse(json).sub
  }
    
  // ...
}
token 的前两部分都可以解码出来，其中 [1] 就是 token 的内容部分token 的前两部分都可以解码出来，其中 [1] 就是 token 的内容部分主页组件改为import { Button, Layout, Menu } from 'antd'
import { observer } from 'mobx-react-lite'
import { useEffect } from 'react'
import { Navigate, Outlet, useNavigate } from 'react-router-dom'
import RoutesStore from '../store/RoutesStore'

function A8Main() {
  const nav = useNavigate()

  function onClick() {
    RoutesStore.reset()
    nav('/login')
  }

  /* useEffect(()=>{
    if(RoutesStore.username === '') {
      nav('/login')
    }
  }, []) */

  if(RoutesStore.username === '') {
    return <Navigate to='/login'></Navigate>
  }

  return (
    <Layout>
      <Layout.Header>
        <span>欢迎您【{RoutesStore.username}】</span>
        <Button size='small' onClick={onClick}>注销</Button>
      </Layout.Header>
      <Layout>
        <Layout.Sider>
          <Menu items={RoutesStore.menus} theme='dark' mode='inline'></Menu>
        </Layout.Sider>
        <Layout.Content>
          <Outlet></Outlet>
        </Layout.Content>
      </Layout>
    </Layout>
  )
}

export default observer(A8Main)
(String), 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查(String), null, null, 五. React>2. React 进阶>3) React Router>注销、欢迎词、登录检查(String), 5d4a37c8fe3238bc3b726cf7de09e0536556663d6b983e9fd57cb9b8f53ea16e(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 70(Integer), dark' mode='inline'></Menu>
        </Layout.Sider>
        <Layout.Content>
          <Outlet></Outlet>
        </Layout.Content>
      </Layout>
    </Layout>
  )
}

export default observer(A8Main)
这个例子中推荐用 Navigate 来完成跳转/student，/teacher 等路由不需要检查，因为登录成功后才有这个例子中推荐用 Navigate 来完成跳转/student，/teacher 等路由不需要检查，因为登录成功后才有附录代码片段ctrl+shift+p 输入关键词代码image-20221026102533928定义 fun.code-snippets{
	"函数组件": {
		"scope": "javascript,typescript,typescriptreact",
		"prefix": "fun",
		"body": [
			"export default function ${1:函数名} () {",
      "  $0",      
      "  return <></>",
			"}"
		],
		"description": "快速生成react函数式组件"
	}
}
定义 ofun.code-snippets{
	"mobx函数组件": {
		"scope": "javascript,typescript,typescriptreact",
		"prefix": "ofun",
		"body": [
      "import { observer } from \"mobx-react-lite\"",
      "",
			"function ${1:函数名} () {",
      "  $0",      
      "  return <></>",
			"}",
      "export default observer($1)",
		],
		"description": "快速生成mobx react函数式组件"
	}
}
(String), 五. React>附录>代码片段(String), null, null, 五. React>附录>代码片段(String), 97b7d5a1a263155128d5033f7ff4162d0b75cc3df4c219b3349a1763f4c56b05(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp), 6(Long), 71(Integer),  \"mobx-react-lite\"",
      "",
			"function ${1:函数名} () {",
      "  $0",      
      "  return <></>",
			"}",
      "export default observer($1)",
		],
		"description": "快速生成mobx react函数式组件"
	}
}
这样可以在 tsx 中用快捷键  以及  创建相应的代码片段(String), 五. React>附录>代码片段(String), null, null, 五. React>附录>代码片段(String), fa6c9fe5cb2e91669ff871fe9def74f93e4bf22a39353de34dc9991d381a4483(String), false(Boolean), 2026-01-06 13:47:08.410854(Timestamp)
2026-01-06 13:47:08.475 [tomcat-handler-66] DEBUG c.a.r.mapper.ChunkMapper.batchInsert - <==    Updates: 72
2026-01-06 13:47:08.476 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.476 [tomcat-handler-66] INFO  c.a.r.s.impl.ResourceServiceImpl - 已插入 72 个切片
2026-01-06 13:47:08.477 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319] from current transaction
2026-01-06 13:47:08.477 [tomcat-handler-66] DEBUG c.a.r.m.R.updateChunkStatus - ==>  Preparing: UPDATE resources SET chunk_count = ?, vectorized = ? WHERE id = ?
2026-01-06 13:47:08.477 [tomcat-handler-66] DEBUG c.a.r.m.R.updateChunkStatus - ==> Parameters: 72(Integer), false(Boolean), 6(Long)
2026-01-06 13:47:08.478 [tomcat-handler-66] DEBUG c.a.r.m.R.updateChunkStatus - <==    Updates: 1
2026-01-06 13:47:08.478 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.478 [tomcat-handler-66] INFO  c.a.r.service.impl.VectorServiceImpl - 开始向量化资源切片: resourceId=6
2026-01-06 13:47:08.479 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319] from current transaction
2026-01-06 13:47:08.479 [tomcat-handler-66] DEBUG c.a.r.m.C.findUnvectorizedByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? AND vectorized = FALSE ORDER BY chunk_index ASC
2026-01-06 13:47:08.479 [tomcat-handler-66] DEBUG c.a.r.m.C.findUnvectorizedByResourceId - ==> Parameters: 6(Long)
2026-01-06 13:47:08.487 [tomcat-handler-66] DEBUG c.a.r.m.C.findUnvectorizedByResourceId - <==      Total: 72
2026-01-06 13:47:08.487 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.487 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 批量向量化 72 个切片
2026-01-06 13:47:08.487 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.487 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.507 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=108
2026-01-06 13:47:08.507 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=108
2026-01-06 13:47:08.507 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.507 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.509 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=109
2026-01-06 13:47:08.509 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=109
2026-01-06 13:47:08.509 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.509 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.511 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=110
2026-01-06 13:47:08.511 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=110
2026-01-06 13:47:08.511 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.511 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.513 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=111
2026-01-06 13:47:08.513 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=111
2026-01-06 13:47:08.513 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.513 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.515 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=112
2026-01-06 13:47:08.515 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=112
2026-01-06 13:47:08.515 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.515 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.517 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=113
2026-01-06 13:47:08.517 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=113
2026-01-06 13:47:08.517 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.517 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.519 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=114
2026-01-06 13:47:08.519 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=114
2026-01-06 13:47:08.519 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.519 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.520 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=115
2026-01-06 13:47:08.520 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=115
2026-01-06 13:47:08.520 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.520 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.522 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=116
2026-01-06 13:47:08.522 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=116
2026-01-06 13:47:08.522 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.522 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.524 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=117
2026-01-06 13:47:08.524 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=117
2026-01-06 13:47:08.524 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.524 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.526 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=118
2026-01-06 13:47:08.526 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=118
2026-01-06 13:47:08.526 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.526 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.528 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=119
2026-01-06 13:47:08.528 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=119
2026-01-06 13:47:08.528 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.528 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.530 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=120
2026-01-06 13:47:08.530 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=120
2026-01-06 13:47:08.530 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.530 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.532 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=121
2026-01-06 13:47:08.532 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=121
2026-01-06 13:47:08.532 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.532 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.533 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=122
2026-01-06 13:47:08.533 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=122
2026-01-06 13:47:08.533 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.533 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.535 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=123
2026-01-06 13:47:08.535 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=123
2026-01-06 13:47:08.535 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.535 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.537 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=124
2026-01-06 13:47:08.537 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=124
2026-01-06 13:47:08.537 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.537 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.539 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=125
2026-01-06 13:47:08.539 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=125
2026-01-06 13:47:08.539 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.539 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.542 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=126
2026-01-06 13:47:08.542 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=126
2026-01-06 13:47:08.542 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.542 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.545 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=127
2026-01-06 13:47:08.546 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=127
2026-01-06 13:47:08.546 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.546 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.549 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=128
2026-01-06 13:47:08.549 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=128
2026-01-06 13:47:08.550 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.550 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.553 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=129
2026-01-06 13:47:08.553 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=129
2026-01-06 13:47:08.553 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.553 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.555 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=130
2026-01-06 13:47:08.555 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=130
2026-01-06 13:47:08.556 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.556 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.558 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=131
2026-01-06 13:47:08.558 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=131
2026-01-06 13:47:08.558 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.558 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.560 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=132
2026-01-06 13:47:08.560 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=132
2026-01-06 13:47:08.560 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.560 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.562 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=133
2026-01-06 13:47:08.562 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=133
2026-01-06 13:47:08.562 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.562 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.563 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=134
2026-01-06 13:47:08.563 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=134
2026-01-06 13:47:08.563 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.563 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.566 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=135
2026-01-06 13:47:08.566 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=135
2026-01-06 13:47:08.566 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.566 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.568 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=136
2026-01-06 13:47:08.568 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=136
2026-01-06 13:47:08.568 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.568 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.570 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=137
2026-01-06 13:47:08.570 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=137
2026-01-06 13:47:08.570 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.570 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.572 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=138
2026-01-06 13:47:08.572 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=138
2026-01-06 13:47:08.572 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.572 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.574 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=139
2026-01-06 13:47:08.574 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=139
2026-01-06 13:47:08.574 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.574 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.576 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=140
2026-01-06 13:47:08.576 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=140
2026-01-06 13:47:08.576 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.576 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.578 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=141
2026-01-06 13:47:08.578 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=141
2026-01-06 13:47:08.578 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.578 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.580 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=142
2026-01-06 13:47:08.580 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=142
2026-01-06 13:47:08.580 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.580 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.582 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=143
2026-01-06 13:47:08.582 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=143
2026-01-06 13:47:08.582 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.582 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.585 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=144
2026-01-06 13:47:08.585 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=144
2026-01-06 13:47:08.585 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.585 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.587 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=145
2026-01-06 13:47:08.587 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=145
2026-01-06 13:47:08.587 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.587 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.589 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=146
2026-01-06 13:47:08.589 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=146
2026-01-06 13:47:08.589 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.589 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.591 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=147
2026-01-06 13:47:08.592 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=147
2026-01-06 13:47:08.592 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.592 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.593 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=148
2026-01-06 13:47:08.593 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=148
2026-01-06 13:47:08.593 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.593 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.595 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=149
2026-01-06 13:47:08.595 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=149
2026-01-06 13:47:08.595 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.595 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.597 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=150
2026-01-06 13:47:08.597 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=150
2026-01-06 13:47:08.597 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.597 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.599 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=151
2026-01-06 13:47:08.599 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=151
2026-01-06 13:47:08.599 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.599 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.601 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=152
2026-01-06 13:47:08.601 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=152
2026-01-06 13:47:08.601 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.601 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.603 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=153
2026-01-06 13:47:08.603 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=153
2026-01-06 13:47:08.603 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.603 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.604 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=154
2026-01-06 13:47:08.605 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=154
2026-01-06 13:47:08.605 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.605 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.606 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=155
2026-01-06 13:47:08.607 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=155
2026-01-06 13:47:08.607 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.607 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.608 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=156
2026-01-06 13:47:08.609 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=156
2026-01-06 13:47:08.609 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.609 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.610 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=157
2026-01-06 13:47:08.610 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=157
2026-01-06 13:47:08.610 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.610 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.612 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=158
2026-01-06 13:47:08.612 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=158
2026-01-06 13:47:08.612 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.612 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.614 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=159
2026-01-06 13:47:08.614 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=159
2026-01-06 13:47:08.614 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.614 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.615 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=160
2026-01-06 13:47:08.615 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=160
2026-01-06 13:47:08.615 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.615 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.617 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=161
2026-01-06 13:47:08.617 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=161
2026-01-06 13:47:08.617 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.617 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.619 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=162
2026-01-06 13:47:08.619 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=162
2026-01-06 13:47:08.619 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.619 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.620 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=163
2026-01-06 13:47:08.621 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=163
2026-01-06 13:47:08.621 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.621 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.622 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=164
2026-01-06 13:47:08.622 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=164
2026-01-06 13:47:08.622 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.622 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.624 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=165
2026-01-06 13:47:08.624 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=165
2026-01-06 13:47:08.624 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.624 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.626 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=166
2026-01-06 13:47:08.626 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=166
2026-01-06 13:47:08.626 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.626 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.627 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=167
2026-01-06 13:47:08.627 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=167
2026-01-06 13:47:08.627 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.627 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.629 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=168
2026-01-06 13:47:08.629 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=168
2026-01-06 13:47:08.629 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.629 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.631 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=169
2026-01-06 13:47:08.631 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=169
2026-01-06 13:47:08.631 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.631 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.633 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=170
2026-01-06 13:47:08.633 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=170
2026-01-06 13:47:08.633 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.633 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.634 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=171
2026-01-06 13:47:08.634 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=171
2026-01-06 13:47:08.634 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.634 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.636 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=172
2026-01-06 13:47:08.636 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=172
2026-01-06 13:47:08.636 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.636 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.637 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=173
2026-01-06 13:47:08.637 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=173
2026-01-06 13:47:08.637 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.637 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.639 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=174
2026-01-06 13:47:08.639 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=174
2026-01-06 13:47:08.639 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.639 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.641 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=175
2026-01-06 13:47:08.641 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=175
2026-01-06 13:47:08.641 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.641 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.642 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=176
2026-01-06 13:47:08.642 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=176
2026-01-06 13:47:08.642 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.642 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.644 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=177
2026-01-06 13:47:08.644 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=177
2026-01-06 13:47:08.644 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.644 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.645 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=178
2026-01-06 13:47:08.645 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=178
2026-01-06 13:47:08.645 [tomcat-handler-66] DEBUG c.a.rag.gateway.ModelGatewayImpl - 委托给 EmbeddingGateway 生成嵌入向量
2026-01-06 13:47:08.645 [tomcat-handler-66] WARN  c.a.rag.gateway.EmbeddingGateway - EmbeddingGateway.embed() not yet implemented - returning dummy embedding
2026-01-06 13:47:08.647 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 向量已写入 Redis: chunkId=179
2026-01-06 13:47:08.647 [tomcat-handler-66] DEBUG c.a.r.service.impl.VectorServiceImpl - 切片向量化成功: chunkId=179
2026-01-06 13:47:08.647 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319] from current transaction
2026-01-06 13:47:08.648 [tomcat-handler-66] DEBUG c.a.r.m.C.batchUpdateVectorized - ==>  Preparing: UPDATE resource_chunks SET vectorized = ? WHERE id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2026-01-06 13:47:08.648 [tomcat-handler-66] DEBUG c.a.r.m.C.batchUpdateVectorized - ==> Parameters: true(Boolean), 108(Long), 109(Long), 110(Long), 111(Long), 112(Long), 113(Long), 114(Long), 115(Long), 116(Long), 117(Long), 118(Long), 119(Long), 120(Long), 121(Long), 122(Long), 123(Long), 124(Long), 125(Long), 126(Long), 127(Long), 128(Long), 129(Long), 130(Long), 131(Long), 132(Long), 133(Long), 134(Long), 135(Long), 136(Long), 137(Long), 138(Long), 139(Long), 140(Long), 141(Long), 142(Long), 143(Long), 144(Long), 145(Long), 146(Long), 147(Long), 148(Long), 149(Long), 150(Long), 151(Long), 152(Long), 153(Long), 154(Long), 155(Long), 156(Long), 157(Long), 158(Long), 159(Long), 160(Long), 161(Long), 162(Long), 163(Long), 164(Long), 165(Long), 166(Long), 167(Long), 168(Long), 169(Long), 170(Long), 171(Long), 172(Long), 173(Long), 174(Long), 175(Long), 176(Long), 177(Long), 178(Long), 179(Long)
2026-01-06 13:47:08.651 [tomcat-handler-66] DEBUG c.a.r.m.C.batchUpdateVectorized - <==    Updates: 72
2026-01-06 13:47:08.651 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.651 [tomcat-handler-66] INFO  c.a.r.service.impl.VectorServiceImpl - 批量更新向量化状态: 72 个切片
2026-01-06 13:47:08.651 [tomcat-handler-66] INFO  c.a.r.s.impl.ResourceServiceImpl - 向量化任务已触发: 资源ID=6
2026-01-06 13:47:08.659 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.660 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:08.660 [tomcat-handler-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74170319]
2026-01-06 13:47:11.509 [tomcat-handler-67] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:47:11.510 [tomcat-handler-67] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:47:11.510 [tomcat-handler-67] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:11.510 [tomcat-handler-67] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214f25df] was not registered for synchronization because synchronization is not active
2026-01-06 13:47:11.511 [tomcat-handler-67] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@745828236 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:47:11.511 [tomcat-handler-67] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:47:11.511 [tomcat-handler-67] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 6
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214f25df]
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca3bd5b] was not registered for synchronization because synchronization is not active
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@77204173 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:47:11.513 [tomcat-handler-67] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:47:11.514 [tomcat-handler-67] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:47:11.514 [tomcat-handler-67] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca3bd5b]
2026-01-06 13:47:15.078 [tomcat-handler-68] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:47:15.079 [tomcat-handler-69] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:47:15.079 [tomcat-handler-68] INFO  c.a.r.controller.ResourceController - GET /api/resources/6
2026-01-06 13:47:15.079 [tomcat-handler-68] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:15.080 [tomcat-handler-68] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64fb2078] was not registered for synchronization because synchronization is not active
2026-01-06 13:47:15.080 [tomcat-handler-69] INFO  c.a.r.controller.ResourceController - GET /api/resources/6/chunks
2026-01-06 13:47:15.080 [tomcat-handler-69] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:15.080 [tomcat-handler-69] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75690f78] was not registered for synchronization because synchronization is not active
2026-01-06 13:47:15.081 [tomcat-handler-69] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@439520121 wrapping com.mysql.cj.jdbc.ConnectionImpl@5dc6e856] will not be managed by Spring
2026-01-06 13:47:15.081 [tomcat-handler-68] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@234824668 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:47:15.081 [tomcat-handler-69] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==>  Preparing: SELECT id, resource_id, chunk_index, chunk_text, location_info, page_start, page_end, chapter_path, text_hash, vectorized, created_at FROM resource_chunks WHERE resource_id = ? ORDER BY chunk_index ASC
2026-01-06 13:47:15.081 [tomcat-handler-68] DEBUG c.a.r.mapper.ResourceMapper.findById - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources WHERE id = ?
2026-01-06 13:47:15.081 [tomcat-handler-68] DEBUG c.a.r.mapper.ResourceMapper.findById - ==> Parameters: 6(Long)
2026-01-06 13:47:15.081 [tomcat-handler-69] DEBUG c.a.r.m.ChunkMapper.findByResourceId - ==> Parameters: 6(Long)
2026-01-06 13:47:15.082 [tomcat-handler-68] DEBUG c.a.r.mapper.ResourceMapper.findById - <==      Total: 1
2026-01-06 13:47:15.082 [tomcat-handler-68] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64fb2078]
2026-01-06 13:47:15.086 [tomcat-handler-69] DEBUG c.a.r.m.ChunkMapper.findByResourceId - <==      Total: 72
2026-01-06 13:47:15.086 [tomcat-handler-69] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75690f78]
2026-01-06 13:47:33.629 [tomcat-handler-70] DEBUG c.a.r.c.SecurityConfig$JwtAuthenticationFilter - Authenticated user: 7
2026-01-06 13:47:33.630 [tomcat-handler-70] INFO  c.a.r.controller.ResourceController - GET /api/resources - page=0, size=10
2026-01-06 13:47:33.631 [tomcat-handler-70] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:33.631 [tomcat-handler-70] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae397a4] was not registered for synchronization because synchronization is not active
2026-01-06 13:47:33.632 [tomcat-handler-70] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1473005391 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:47:33.632 [tomcat-handler-70] DEBUG c.a.r.m.ResourceMapper.findPaged - ==>  Preparing: SELECT id, title, tags, file_type, file_path, file_size, description, content_hash, uploaded_by, upload_time, chunk_count, vectorized FROM resources ORDER BY upload_time DESC LIMIT ?, ?
2026-01-06 13:47:33.632 [tomcat-handler-70] DEBUG c.a.r.m.ResourceMapper.findPaged - ==> Parameters: 0(Integer), 10(Integer)
2026-01-06 13:47:33.635 [tomcat-handler-70] DEBUG c.a.r.m.ResourceMapper.findPaged - <==      Total: 6
2026-01-06 13:47:33.635 [tomcat-handler-70] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae397a4]
2026-01-06 13:47:33.636 [tomcat-handler-70] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-06 13:47:33.636 [tomcat-handler-70] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0d95a5] was not registered for synchronization because synchronization is not active
2026-01-06 13:47:33.636 [tomcat-handler-70] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@892502941 wrapping com.mysql.cj.jdbc.ConnectionImpl@586c226b] will not be managed by Spring
2026-01-06 13:47:33.636 [tomcat-handler-70] DEBUG c.a.rag.mapper.ResourceMapper.count - ==>  Preparing: SELECT COUNT(*) FROM resources
2026-01-06 13:47:33.636 [tomcat-handler-70] DEBUG c.a.rag.mapper.ResourceMapper.count - ==> Parameters: 
2026-01-06 13:47:33.637 [tomcat-handler-70] DEBUG c.a.rag.mapper.ResourceMapper.count - <==      Total: 1
2026-01-06 13:47:33.637 [tomcat-handler-70] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0d95a5]
2026-01-06 16:38:43.029 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-06 16:38:43.031 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-06 16:38:43.156 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-06 16:38:43.157 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
