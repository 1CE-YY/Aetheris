# Aetheris RAG System - Environment Variables Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control

# =============================================
# MySQL Configuration
# =============================================
MYSQL_ROOT_PASSWORD=root123
MYSQL_DATABASE=aetheris_rag
MYSQL_USERNAME=aetheris
MYSQL_PASSWORD=aetheris123
MYSQL_PORT=3306

# MySQL connection URL (will be constructed automatically)
MYSQL_URL=jdbc:mysql://localhost:3306/aetheris_rag?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true

# =============================================
# Redis Configuration
# =============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=aetheris123
REDIS_DB=0

# Redis connection pool settings
REDIS_MAX_ACTIVE=8
REDIS_MAX_IDLE=8
REDIS_MIN_IDLE=2
REDIS_MAX_WAIT=-1ms
REDIS_TIMEOUT=5000ms

# =============================================
# Zhipu AI API Configuration
# =============================================
# Get your API key from: https://open.bigmodel.cn/
ZHIPU_API_KEY=your-zhipu-ai-api-key-here

# Embedding model configuration
EMBEDDING_MODEL=embedding-v2
EMBEDDING_BASE_URL=https://open.bigmodel.cn/api/paas/v4/
EMBEDDING_TIMEOUT=30s
EMBEDDING_MAX_TOKENS=8192
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_BACKOFF=1s
EMBEDDING_RATE_LIMIT=10
EMBEDDING_CACHE_ENABLED=true
EMBEDDING_CACHE_TTL_DAYS=30

# Chat model configuration
CHAT_MODEL=glm-4-flash
CHAT_BASE_URL=https://open.bigmodel.cn/api/paas/v4/
CHAT_TEMPERATURE=0.7
CHAT_TOP_P=0.9
CHAT_MAX_TOKENS=2000
CHAT_TIMEOUT=60s
CHAT_MAX_RETRIES=2
CHAT_RETRY_BACKOFF=2s
CHAT_RATE_LIMIT=5

# =============================================
# RAG Configuration
# =============================================
# Chunk settings
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Retrieval settings
RETRIEVAL_TOP_K=5
RETRIEVAL_SCORE_THRESHOLD=0.5

# Vector index settings
VECTOR_INDEX_NAME=chunk_vector_index
VECTOR_DIMENSION=1024
VECTOR_DISTANCE_METRIC=COSINE
VECTOR_HNSW_M=16
VECTOR_HNSW_EF_CONSTRUCTION=128

# =============================================
# User Profile Configuration
# =============================================
PROFILE_ENABLED=true
PROFILE_WINDOW_SIZE=10
PROFILE_UPDATE_TRIGGER=query
PROFILE_QUERY_WEIGHT=1.0
PROFILE_CLICK_WEIGHT=2.0
PROFILE_FAVORITE_WEIGHT=3.0

# =============================================
# Recommendation Configuration
# =============================================
RECOMMENDATION_TOP_N=10
RECOMMENDATION_ENABLED=true

# =============================================
# JWT Configuration
# =============================================
# IMPORTANT: Generate a strong random key for production (minimum 32 characters recommended)
# Use: openssl rand -base64 32
JWT_SECRET=change-this-to-a-strong-random-key-in-production-use-openssl-rand-base64-32
JWT_EXPIRATION=86400

# =============================================
# Server Configuration
# =============================================
SERVER_PORT=8080
TOMCAT_MAX_THREADS=200
TOMCAT_MIN_THREADS=10

# =============================================
# File Upload Configuration
# =============================================
MAX_FILE_SIZE=50MB
MAX_REQUEST_SIZE=50MB

# File storage paths (absolute or relative paths)
FILE_UPLOAD_PATH=./uploads
FILE_TEMP_PATH=./uploads/temp

# =============================================
# Database Connection Pool Configuration
# =============================================
DB_MAX_POOL_SIZE=10
DB_MIN_IDLE=5
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000

# =============================================
# Flyway Migration Configuration
# =============================================
FLYWAY_ENABLED=true

# =============================================
# Logging Configuration
# =============================================
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_SPRING=INFO
LOG_LEVEL_MYBATIS=DEBUG
LOG_FILE=logs/application.log
LOG_MAX_SIZE=100MB
LOG_MAX_HISTORY=30
